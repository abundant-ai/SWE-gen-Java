diff --git a/src/main/java/org/mockito/internal/debugging/LocationImpl.java b/src/main/java/org/mockito/internal/debugging/LocationImpl.java
index 8561b62d3..f1d14a69f 100644
--- a/src/main/java/org/mockito/internal/debugging/LocationImpl.java
+++ b/src/main/java/org/mockito/internal/debugging/LocationImpl.java
@@ -16,6 +16,7 @@ public class LocationImpl implements Location, Serializable {
 
     private final Throwable stackTraceHolder;
     private final StackTraceFilter stackTraceFilter;
+    private final String sourceFile;
 
     public LocationImpl() {
         this(defaultStackTraceFilter);
@@ -32,6 +33,13 @@ public class LocationImpl implements Location, Serializable {
     private LocationImpl(StackTraceFilter stackTraceFilter, Throwable stackTraceHolder) {
         this.stackTraceFilter = stackTraceFilter;
         this.stackTraceHolder = stackTraceHolder;
+        if (stackTraceHolder.getStackTrace() == null || stackTraceHolder.getStackTrace().length == 0) {
+            //there are corner cases where exception can have a null or empty stack trace
+            //for example, a custom exception can override getStackTrace() method
+            this.sourceFile = "<unknown source file>";
+        } else {
+            this.sourceFile = stackTraceFilter.findSourceFile(stackTraceHolder.getStackTrace(), "<unknown source file>");
+        }
     }
 
     @Override
@@ -43,4 +51,9 @@ public class LocationImpl implements Location, Serializable {
         }
         return "-> at " + filtered[0].toString();
     }
+
+    @Override
+    public String getSourceFile() {
+        return sourceFile;
+    }
 }
diff --git a/src/main/java/org/mockito/internal/exceptions/stacktrace/StackTraceFilter.java b/src/main/java/org/mockito/internal/exceptions/stacktrace/StackTraceFilter.java
index e8b0cb064..bf11d4c83 100644
--- a/src/main/java/org/mockito/internal/exceptions/stacktrace/StackTraceFilter.java
+++ b/src/main/java/org/mockito/internal/exceptions/stacktrace/StackTraceFilter.java
@@ -37,4 +37,17 @@ public class StackTraceFilter implements Serializable {
         StackTraceElement[] result = new StackTraceElement[filtered.size()];
         return filtered.toArray(result);
     }
+
+    /**
+     * Finds the source file of the target stack trace.
+     * Returns the default value if source file cannot be found.
+     */
+    public String findSourceFile(StackTraceElement[] target, String defaultValue) {
+        for (StackTraceElement e : target) {
+            if (CLEANER.isIn(e)) {
+                return e.getFileName();
+            }
+        }
+        return defaultValue;
+    }
 }
diff --git a/src/main/java/org/mockito/internal/junit/DefaultStubbingLookupListener.java b/src/main/java/org/mockito/internal/junit/DefaultStubbingLookupListener.java
index 4885d6339..21212a675 100644
--- a/src/main/java/org/mockito/internal/junit/DefaultStubbingLookupListener.java
+++ b/src/main/java/org/mockito/internal/junit/DefaultStubbingLookupListener.java
@@ -57,8 +57,11 @@ class DefaultStubbingLookupListener implements StubbingLookupListener {
         List<Invocation> matchingStubbings = new LinkedList<Invocation>();
         for (Stubbing s : stubbings) {
             if (UnusedStubbingReporting.shouldBeReported(s)
-                && s.getInvocation().getMethod().getName().equals(invocation.getMethod().getName())) {
-                matchingStubbings.add(s.getInvocation());
+                && s.getInvocation().getMethod().getName().equals(invocation.getMethod().getName())
+                //If stubbing and invocation are in the same source file we assume they are in the test code,
+                // and we don't flag it as mismatch:
+                && !s.getInvocation().getLocation().getSourceFile().equals(invocation.getLocation().getSourceFile())) {
+                    matchingStubbings.add(s.getInvocation());
             }
         }
         return matchingStubbings;
diff --git a/src/main/java/org/mockito/invocation/Location.java b/src/main/java/org/mockito/invocation/Location.java
index e36270489..933766828 100644
--- a/src/main/java/org/mockito/invocation/Location.java
+++ b/src/main/java/org/mockito/invocation/Location.java
@@ -4,14 +4,26 @@
  */
 package org.mockito.invocation;
 
+import org.mockito.NotExtensible;
+
 /**
  * Describes the location of something in the source code.
  */
+@NotExtensible
 public interface Location {
 
     /**
-     * @return the location
+     * Human readable location in the source code, see {@link Invocation#getLocation()}
+     *
+     * @return location
      */
     String toString();
 
+    /**
+     * Source file of this location
+     *
+     * @return source file
+     * @since 2.23.5
+     */
+    String getSourceFile();
 }
