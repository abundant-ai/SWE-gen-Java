diff --git a/gradle/dependency-management/agp-versions.properties b/gradle/dependency-management/agp-versions.properties
index 38c851f0045..ba4f64334d2 100644
--- a/gradle/dependency-management/agp-versions.properties
+++ b/gradle/dependency-management/agp-versions.properties
@@ -1,4 +1,4 @@
 # Generated - Update by running `./gradlew updateAgpVersions`
-latests=8.4.2,8.5.2,8.6.1,8.7.3,8.8.2,8.9.3,8.10.1,8.11.0,8.12.0-alpha08
-nightlyBuildId=13755604
+latests=8.4.2,8.5.2,8.6.1,8.7.3,8.8.2,8.9.3,8.10.1,8.11.0-rc01,8.12.0-alpha04
+nightlyBuildId=13611597
 nightlyVersion=8.12.0-dev
diff --git a/platforms/core-configuration/configuration-cache/build.gradle.kts b/platforms/core-configuration/configuration-cache/build.gradle.kts
index 64726fd1c4b..635fe63ee21 100644
--- a/platforms/core-configuration/configuration-cache/build.gradle.kts
+++ b/platforms/core-configuration/configuration-cache/build.gradle.kts
@@ -27,7 +27,6 @@ dependencies {
     api(projects.dependencyManagement)
     api(projects.fileTemp)
     api(projects.graphSerialization)
-    api(projects.logging)
     api(projects.loggingApi)
     api(projects.messaging)
     api(projects.native)
@@ -62,6 +61,7 @@ dependencies {
     implementation(projects.hashing)
     implementation(projects.inputTracking)
     implementation(projects.instrumentationAgentServices)
+    implementation(projects.logging)
     implementation(projects.modelCore)
     implementation(projects.persistentCache)
     implementation(projects.problemsApi)
diff --git a/platforms/core-configuration/configuration-cache/src/integTest/groovy/org/gradle/internal/cc/impl/promo/ConfigurationCachePromoIntegrationTest.groovy b/platforms/core-configuration/configuration-cache/src/integTest/groovy/org/gradle/internal/cc/impl/promo/ConfigurationCachePromoIntegrationTest.groovy
index 6f02d240dcb..ee1ef412dfd 100644
--- a/platforms/core-configuration/configuration-cache/src/integTest/groovy/org/gradle/internal/cc/impl/promo/ConfigurationCachePromoIntegrationTest.groovy
+++ b/platforms/core-configuration/configuration-cache/src/integTest/groovy/org/gradle/internal/cc/impl/promo/ConfigurationCachePromoIntegrationTest.groovy
@@ -16,6 +16,7 @@
 
 package org.gradle.internal.cc.impl.promo
 
+import org.gradle.api.internal.ConfigurationCacheDegradationController
 import org.gradle.initialization.StartParameterBuildOptions.ConfigurationCacheOption
 import org.gradle.initialization.StartParameterBuildOptions.IsolatedProjectsOption
 import org.gradle.internal.cc.impl.AbstractConfigurationCacheIntegrationTest
@@ -37,7 +38,25 @@ class ConfigurationCachePromoIntegrationTest extends AbstractConfigurationCacheI
         postBuildOutputContains(PROMO_PREFIX)
     }
 
-    def "shows promo message when build fails without giving explicit CC state"() {
+
+    def "shows no promo message if build fails at configuration time"() {
+        given:
+        buildFile """
+            throw new RuntimeException("failed")
+
+            tasks.register("run") {}
+        """
+
+        when:
+        fails("run")
+
+        then:
+        // TODO(https://github.com/gradle/gradle/issues/33857) post-build output scraping is broken for failed builds
+        outputDoesNotContain(PROMO_PREFIX)
+        postBuildOutputDoesNotContain(PROMO_PREFIX)
+    }
+
+    def "shows no promo message if build fails at execution time"() {
         given:
         buildFile """
             tasks.register("fail") { doLast { throw new UnsupportedOperationException("I must fail") } }
@@ -47,8 +66,9 @@ class ConfigurationCachePromoIntegrationTest extends AbstractConfigurationCacheI
         fails("fail")
 
         then:
-        // TODO(mlopatkin) post-build output scraping is broken for failed builds
-        outputContains(PROMO_PREFIX)
+        // TODO(https://github.com/gradle/gradle/issues/33857) post-build output scraping is broken for failed builds
+        outputDoesNotContain(PROMO_PREFIX)
+        postBuildOutputDoesNotContain(PROMO_PREFIX)
     }
 
     def "shows promo message when running with isolated projects disabled in command-line"() {
@@ -293,4 +313,77 @@ class ConfigurationCachePromoIntegrationTest extends AbstractConfigurationCacheI
         then:
         postBuildOutputContains(PROMO_PREFIX)
     }
+
+    def "shows no promo message if a task in the graph is marked as cc incompatible"() {
+        given:
+        buildFile """
+            tasks.register("incompatible") { task ->
+                $incompatibleReason
+                onlyIf { !Boolean.getBoolean("skip.incompatible") }
+
+                doLast {
+                    println("I am not compatible")
+                }
+            }
+
+            tasks.register("withIncompatibleDep") {
+                dependsOn ":incompatible"
+                doLast { println "I am compatible" }
+            }
+        """
+
+        when: "incompatible task runs"
+        run("incompatible")
+
+        then:
+        postBuildOutputDoesNotContain(PROMO_PREFIX)
+
+        when: "incompatible task runs as dependency"
+        run("withIncompatibleDep")
+
+        then:
+        postBuildOutputDoesNotContain(PROMO_PREFIX)
+
+        when: "incompatible task is a skipped dependency"
+        run("withIncompatibleDep", "-Dskip.incompatible=true")
+
+        then:
+        postBuildOutputDoesNotContain(PROMO_PREFIX)
+
+        when: "promo is present when incompatible task is excluded from the task graph"
+        run("withIncompatibleDep", "-x", "incompatible")
+
+        then:
+        postBuildOutputContains(PROMO_PREFIX)
+
+        where:
+        incompatibleReason << [
+            "notCompatibleWithConfigurationCache('reasons')",
+            "services.get(${ConfigurationCacheDegradationController.name}).requireConfigurationCacheDegradation(task, provider { 'reasons' })"
+        ]
+    }
+
+    def "shows promo message if an incompatible task is in the build logic build"() {
+        given:
+        buildFile("buildSrc/build.gradle", """
+            tasks.named("jar") { task ->
+                $incompatibleReason
+            }
+        """)
+        buildFile """
+            tasks.register("run") {}
+        """
+
+        when:
+        run("run")
+
+        then:
+        postBuildOutputContains(PROMO_PREFIX)
+
+        where:
+        incompatibleReason << [
+            "notCompatibleWithConfigurationCache('reasons')",
+            "services.get(${ConfigurationCacheDegradationController.name}).requireConfigurationCacheDegradation(task, provider { 'reasons' })"
+        ]
+    }
 }
diff --git a/platforms/core-configuration/configuration-cache/src/main/kotlin/org/gradle/internal/cc/impl/CrossProjectConfigurationReportingTaskExecutionGraph.kt b/platforms/core-configuration/configuration-cache/src/main/kotlin/org/gradle/internal/cc/impl/CrossProjectConfigurationReportingTaskExecutionGraph.kt
index 3bd0f5c7437..215b4077d8d 100644
--- a/platforms/core-configuration/configuration-cache/src/main/kotlin/org/gradle/internal/cc/impl/CrossProjectConfigurationReportingTaskExecutionGraph.kt
+++ b/platforms/core-configuration/configuration-cache/src/main/kotlin/org/gradle/internal/cc/impl/CrossProjectConfigurationReportingTaskExecutionGraph.kt
@@ -27,6 +27,7 @@ import org.gradle.api.internal.project.ProjectInternal
 import org.gradle.execution.plan.FinalizedExecutionPlan
 import org.gradle.execution.plan.Node
 import org.gradle.execution.taskgraph.TaskExecutionGraphInternal
+import org.gradle.execution.taskgraph.TaskExecutionGraphExecutionListener
 import org.gradle.internal.build.ExecutionResult
 import org.gradle.internal.configuration.problems.ProblemFactory
 import org.gradle.internal.configuration.problems.ProblemsListener
@@ -61,6 +62,14 @@ class CrossProjectConfigurationReportingTaskExecutionGraph(
         delegate.removeTaskExecutionGraphListener(listener.wrap())
     }
 
+    override fun addExecutionListener(listener: TaskExecutionGraphExecutionListener) {
+        delegate.addExecutionListener(listener)
+    }
+
+    override fun removeExecutionListener(listener: TaskExecutionGraphExecutionListener) {
+        delegate.removeExecutionListener(listener)
+    }
+
     override fun whenReady(closure: Closure<*>) {
         delegate.whenReady(CrossProjectModelAccessTrackingClosure(closure, referrerProject, crossProjectModelAccess))
     }
diff --git a/platforms/core-configuration/configuration-cache/src/main/kotlin/org/gradle/internal/cc/impl/promo/ConfigurationCachePromoHandler.kt b/platforms/core-configuration/configuration-cache/src/main/kotlin/org/gradle/internal/cc/impl/promo/ConfigurationCachePromoHandler.kt
index 8a25853f5d8..9e9cf2e1c1a 100644
--- a/platforms/core-configuration/configuration-cache/src/main/kotlin/org/gradle/internal/cc/impl/promo/ConfigurationCachePromoHandler.kt
+++ b/platforms/core-configuration/configuration-cache/src/main/kotlin/org/gradle/internal/cc/impl/promo/ConfigurationCachePromoHandler.kt
@@ -16,10 +16,16 @@
 
 package org.gradle.internal.cc.impl.promo
 
+import org.gradle.BuildResult
 import org.gradle.api.Task
+import org.gradle.api.execution.TaskExecutionGraph
 import org.gradle.api.internal.DocumentationRegistry
+import org.gradle.api.internal.TaskInternal
 import org.gradle.api.logging.Logging
 import org.gradle.initialization.RootBuildLifecycleListener
+import org.gradle.internal.InternalBuildAdapter
+import org.gradle.internal.build.BuildStateRegistry
+import org.gradle.internal.cc.impl.DefaultConfigurationCacheDegradationController
 import org.gradle.internal.configuration.problems.ProblemsListener
 import org.gradle.internal.configuration.problems.PropertyProblem
 import org.gradle.internal.configuration.problems.PropertyTrace
@@ -29,20 +35,67 @@ import org.gradle.internal.service.scopes.ServiceScope
 
 /**
  * This class handles configuration cache promo message at the end of the build.
+ * <p>
+ * The promo is shown unless:
+ * <ul>
+ *     <li>An incompatible API is used at configuration time (in other words, if a CC problem would be emitted by it).</li>
+ *     <li>A {@code noCompatibleWithConfigurationCache} task is present in the main task graph.</li>
+ *     <li>Graceful degradation is requested.</li>
+ *     <li>Build fails.</li>
+ * </ul>
  *
  * Instances of this class are thread-safe.
  */
 @ServiceScope(Scope.BuildTree::class)
-class ConfigurationCachePromoHandler(
+internal class ConfigurationCachePromoHandler(
+    private val buildRegistry: BuildStateRegistry,
+    private val degradationController: DefaultConfigurationCacheDegradationController,
     private val documentationRegistry: DocumentationRegistry
 ) : RootBuildLifecycleListener, ProblemsListener {
-    @Volatile
-    private var hasProblems = false
+    private val problems = object {
+        @Volatile
+        private var _seenProblems = false // if ever, only goes false -> true
 
-    override fun afterStart() = Unit
+        fun arePresent(): Boolean = _seenProblems
+
+        fun addIfNeeded(hasNewProblem: Boolean) {
+            if (hasNewProblem) {
+                _seenProblems = true
+            }
+        }
+    }
+
+    override fun afterStart() {
+        // We can't reach out to the task graph when the build is finished.
+        // We cannot collect the state of the tasks in the whenReady callback to avoid racing with user-specified ones, which may modify the compatibility state.
+        // We cannot listen for the task execution either, because incompatible tasks may not run (e.g. they may have onlyIf {false}).
+        // Note that skipping tasks with "-x" excludes them from the graph, so we still nudge. CC behaves similarly.
+        val rootBuildGradle = buildRegistry.rootBuild.mutableModel
+        rootBuildGradle.taskGraph.addExecutionListener(this::onRootBuildTaskGraphIsAboutToExecute)
+
+        rootBuildGradle.addBuildListener(object : InternalBuildAdapter() {
+            override fun buildFinished(result: BuildResult) {
+                problems.addIfNeeded(result.failure != null)
+            }
+        })
+    }
+
+    private fun onRootBuildTaskGraphIsAboutToExecute(graph: TaskExecutionGraph) {
+        if (!problems.arePresent()) {
+            // Collecting degradation reasons may be somewhat expensive, let's skip it if the build is already incompatible.
+            // We can only collect the reasons before the start of the execution phase. CC does that too.
+            degradationController.collectDegradationReasons()
+            problems.addIfNeeded(degradationController.hasDegradationReasons)
+        }
+
+        // Checking task graph for compatibility may be even more expensive, so do it only after collecting the degradation reasons.
+        if (!problems.arePresent()) {
+            problems.addIfNeeded(graph.hasIncompatibleTasks())
+        }
+    }
 
     override fun beforeComplete() {
-        if (hasProblems) {
+        if (problems.arePresent()) {
             return
         }
 
@@ -52,11 +105,11 @@ class ConfigurationCachePromoHandler(
     }
 
     override fun onProblem(problem: PropertyProblem) {
-        hasProblems = true
+        problems.addIfNeeded(true)
     }
 
     override fun onError(trace: PropertyTrace, error: Exception, message: StructuredMessageBuilder) {
-        hasProblems = true
+        problems.addIfNeeded(true)
     }
 
     override fun forIncompatibleTask(trace: PropertyTrace, reason: String): ProblemsListener = this
@@ -64,4 +117,6 @@ class ConfigurationCachePromoHandler(
     override fun forTask(task: Task): ProblemsListener = this
 
     override fun onExecutionTimeProblem(problem: PropertyProblem) = onProblem(problem)
+
+    private fun TaskExecutionGraph.hasIncompatibleTasks() = allTasks.any { !(it as TaskInternal).isCompatibleWithConfigurationCache }
 }
diff --git a/platforms/core-runtime/logging/src/main/java/org/gradle/internal/deprecation/Documentation.java b/platforms/core-runtime/logging/src/main/java/org/gradle/internal/deprecation/Documentation.java
index e7b8c7647f5..11316a81d32 100644
--- a/platforms/core-runtime/logging/src/main/java/org/gradle/internal/deprecation/Documentation.java
+++ b/platforms/core-runtime/logging/src/main/java/org/gradle/internal/deprecation/Documentation.java
@@ -37,12 +37,8 @@ public static Documentation userManual(String id) {
         return new UserGuide(id, null);
     }
 
-    public static Documentation upgradeMinorGuide(int majorVersion, String upgradeGuideSection) {
-        return UpgradeGuide.forMinorVersion(majorVersion, upgradeGuideSection);
-    }
-
-    public static Documentation upgradeMajorGuide(int majorVersion, String upgradeGuideSection) {
-        return UpgradeGuide.forMajorVersion(majorVersion, upgradeGuideSection);
+    public static Documentation upgradeGuide(int majorVersion, String upgradeGuideSection) {
+        return new UpgradeGuide(majorVersion, upgradeGuideSection);
     }
 
     public static Documentation dslReference(Class<?> targetClass, String property) {
@@ -94,7 +90,7 @@ public T withDslReference(Class<?> targetClass, String property) {
          */
         @CheckReturnValue
         public T withUpgradeGuideSection(int majorVersion, String upgradeGuideSection) {
-            return withDocumentation(Documentation.upgradeMinorGuide(majorVersion, upgradeGuideSection));
+            return withDocumentation(Documentation.upgradeGuide(majorVersion, upgradeGuideSection));
         }
     }
 
@@ -138,16 +134,8 @@ public int hashCode() {
 
     private static class UpgradeGuide extends UserGuide {
 
-        private UpgradeGuide(String basePath, String section) {
-            super(basePath, section);
-        }
-
-        public static UpgradeGuide forMinorVersion(int majorVersion, String section) {
-            return new UpgradeGuide("upgrading_version_" + majorVersion, section);
-        }
-
-        public static UpgradeGuide forMajorVersion(int majorVersion, String section) {
-            return new UpgradeGuide("upgrading_major_version_" + majorVersion, section);
+        private UpgradeGuide(int majorVersion, String section) {
+            super("upgrading_version_" + majorVersion, section);
         }
 
         @Override
diff --git a/platforms/documentation/docs/src/docs/release/notes.md b/platforms/documentation/docs/src/docs/release/notes.md
index 4ea22509dcf..833d35ded39 100644
--- a/platforms/documentation/docs/src/docs/release/notes.md
+++ b/platforms/documentation/docs/src/docs/release/notes.md
@@ -112,7 +112,7 @@ Additional updates for the [Configuration Cache](userguide/configuration_cache.h
 <a name="jvm-17"></a>
 ### Gradle requires Java Virtual Machine (JVM) version 17 or higher to run
 
-Gradle requires a Java Virtual Machine (JVM) version [17 or higher](userguide/upgrading_major_version_9.html#jvm-17) to start the Gradle daemon.
+Gradle requires a Java Virtual Machine (JVM) version [17 or higher](userguide/upgrading_version_8.html#jvm-17) to start the Gradle daemon.
 
 If you need to build with older JVM versions, you can specify a separate JDK toolchain in the build definition by using [toolchains](userguide/toolchains.html).  
 Gradle still supports compiling, testing and running other JVM-based tools with Java 8 and higher.
@@ -133,7 +133,7 @@ Gradle uses Kotlin for build logic, which includes:
 - Plugins
 
 As a result, some behavior has changed, most notably the new K2 compiler and [nullability annotations on APIs](#jspecify).
-If you're upgrading, review the [Gradle 9.0.0 upgrade guide](userguide/upgrading_major_version_9.html#kotlin-2) for migration details.
+If you're upgrading, review the [Gradle 8.x upgrade guide](userguide/upgrading_version_8.html#kotlin-2) for migration details.
 
 <a name="groovy-4"></a>
 ### Update to Groovy 4
@@ -148,7 +148,7 @@ Build scripts written in the Groovy DSL (`.gradle` files)
 Ant integration
 Plugins
 
-Some behavior has changed between Groovy 3.0 and 4.0. If you're upgrading, review the [Gradle 9.0.0 upgrade guide](userguide/upgrading_major_version_9.html#groovy-4) for migration details.
+Some behavior has changed between Groovy 3.0 and 4.0. If you're upgrading, review the [Gradle 8.x upgrade guide](userguide/upgrading_version_8.html#groovy-4) for migration details.
 
 <a name="sem-ver"></a>
 ### Semantic Versioning for Gradle releases
@@ -185,7 +185,7 @@ Since Gradle 5.0 we've been using annotations from [JSR-305](https://jcp.org/en/
 Starting with Gradle 9, the Gradle API is annotated using [JSpecify](https://jspecify.dev/) instead.
 
 Kotlin 2.1, when combined with JSpecify annotations in the Gradle API, introduces stricter nullability handling.
-For more details and potential breakages, see the dedicated [upgrading guide section](userguide/upgrading_major_version_9.html#jspecify).
+For more details and potential breakages, see the dedicated [upgrading guide section](userguide/upgrading_version_8.html#jspecify).
 
 <a name="sem-ver-wrapper"></a>
 #### Support for major and minor version specification in Gradle Wrapper
@@ -211,13 +211,13 @@ Gradle’s [version information endpoint](https://services.gradle.org/versions/)
 
 #### Archive tasks produce reproducible archives by default
 
-Archive tasks such as `Jar`, `Ear`, `War`, `Zip`, `Tar`, and `AbstractArchiveTask` produce [reproducible archives by default](userguide/working_with_files.html#sec:reproducible_archives).
+Archive tasks such as `Jar`, `Ear`, `War`, `Zip`, `Tar`, and `AbstractArchiveTask` produce reproducible archives by default.
 This means that generated archives have reproducible file order and preconfigured file timestamps and permissions.
 As a result archives generated from the same inputs will be identical byte-for-byte.
 
 This change may affect builds that rely on non-deterministic archive characteristics like file order, file system timestamps, or file system permissions, or file executable bit.
 
-For more information, see the [upgrading guide section](userguide/upgrading_major_version_9.html#reproducible_archives_by_default).
+For more information, see the [upgrading guide section](userguide/upgrading_version_8.html#reproducible_archives_by_default).
 
 #### Detached configurations can resolve dependencies on their own project
 
diff --git a/platforms/documentation/docs/src/docs/userguide/dep-man/declaring-dependencies/dependency_verification.adoc b/platforms/documentation/docs/src/docs/userguide/dep-man/declaring-dependencies/dependency_verification.adoc
index ec315b4abf7..96a7e1fb403 100644
--- a/platforms/documentation/docs/src/docs/userguide/dep-man/declaring-dependencies/dependency_verification.adoc
+++ b/platforms/documentation/docs/src/docs/userguide/dep-man/declaring-dependencies/dependency_verification.adoc
@@ -824,7 +824,7 @@ gpg: Total number processed: 1
 gpg:               imported: 1
 
 # Write its ASCII-armored version
-$ gpg --keyring /tmp/keyring.gpg --export --armor 8756c4f765c9ac3cb6b85d62379ce192d401ab61 >> gradle/verification-keyring.keys
+$ gpg --keyring /tmp/keyring.gpg --export --armor 8756c4f765c9ac3cb6b85d62379ce192d401ab61 > gradle/verification-keyring.keys
 ----
 
 Once done, make sure to run <<#sec:verification-update,the generation command again>> so that the key is processed by Gradle.
diff --git a/platforms/documentation/docs/src/docs/userguide/releases/upgrading/upgrading_major_version_9.adoc b/platforms/documentation/docs/src/docs/userguide/releases/upgrading/upgrading_major_version_9.adoc
index 4078b951901..f4da0e5bd00 100644
--- a/platforms/documentation/docs/src/docs/userguide/releases/upgrading/upgrading_major_version_9.adoc
+++ b/platforms/documentation/docs/src/docs/userguide/releases/upgrading/upgrading_major_version_9.adoc
@@ -265,64 +265,6 @@ plugins {
 TIP: The `jvm-toolchains` plugin is automatically applied by the <<java_library_plugin.adoc#java_library_plugin,Java Library Plugin>> and other JVM-related plugins.
 If you are already applying one of those, no further action is needed.
 
-[[reproducible_archives_by_default]]
-==== Archive tasks (Jar, Ear, War, Zip, AbstractArchiveTask) produce reproducible archives by default
-
-NOTE: This change may affect existing builds that relied on the previous behavior of archive tasks, where file order was not deterministic, and file timestamps and permissions were taken from the file system.
-
-In Gradle 9.0, the default behavior of archive tasks (such as `Jar`, `Ear`, `War`, `Zip`, and `AbstractArchiveTask`) has changed to produce reproducible archives by default.
-That means that:
-
-- File order in the archive is now deterministic.
-- Files have fixed timestamps (timestamps depends on the archive type).
-- All directories have fixed permissions set to `0755`.
-- All files have fixed permissions set to `0644`.
-
-This change improves the reproducibility of builds and ensures that the generated archives are consistent across different environments.
-
-You can restore the previous behaviour for one or more properties for your task with the following configuration:
-
-====
-[.multi-language-sample]
-=====
-.build.gradle.kts
-[source,kotlin]
-----
-tasks.withType<AbstractArchiveTask>().configureEach {
-    // Make file order based on the file system
-    isReproducibleFileOrder = false
-    // Use file timestamps from the file system
-    isPreserveFileTimestamps = true
-    // Use permissions from the file system
-    useFileSystemPermissions()
-}
-----
-=====
-[.multi-language-sample]
-=====
-.build.gradle
-[source,groovy]
-----
-tasks.withType(AbstractArchiveTask).configureEach {
-    // Makes file order non deterministic
-    reproducibleFileOrder = false
-    // Use file timestamps from the file system
-    preserveFileTimestamps = true
-    // Use permissions from the file system
-    useFileSystemPermissions()
-}
-----
-=====
-====
-
-You can also preserve the file system permissions across archives tasks by configuring a property:
-
-[source,properties]
-.gradle.properties
-----
-org.gradle.archives.use-file-system-permissions=true
-----
-
 === `test` task fails when no tests are discovered
 
 When test sources are present and no filters are applied, the `test` task will now fail with an error if it runs but doesn’t discover any tests.
diff --git a/platforms/extensibility/plugin-development/src/integTest/groovy/org/gradle/plugin/devel/tasks/ValidatePluginsPart2IntegrationTest.groovy b/platforms/extensibility/plugin-development/src/integTest/groovy/org/gradle/plugin/devel/tasks/ValidatePluginsPart2IntegrationTest.groovy
index ca1d1a382fa..ae9cb5afdfd 100644
--- a/platforms/extensibility/plugin-development/src/integTest/groovy/org/gradle/plugin/devel/tasks/ValidatePluginsPart2IntegrationTest.groovy
+++ b/platforms/extensibility/plugin-development/src/integTest/groovy/org/gradle/plugin/devel/tasks/ValidatePluginsPart2IntegrationTest.groovy
@@ -863,7 +863,7 @@ class ValidatePluginsPart2IntegrationTest extends AbstractIntegrationSpec implem
         verifyAll(receivedProblem) {
             fqid == 'validation:missing-java-toolchain-plugin'
             contextualLabel == 'Using task ValidatePlugins without applying the Java Toolchain plugin is not supported.'
-            definition.documentationLink.url.endsWith("/userguide/upgrading_major_version_9.html#validate_plugins_without_java_toolchain_90")
+            definition.documentationLink.url.endsWith("/userguide/upgrading_version_8.html#validate_plugins_without_java_toolchain_90")
         }
     }
 }
diff --git a/platforms/extensibility/plugin-development/src/main/java/org/gradle/plugin/devel/tasks/ValidatePlugins.java b/platforms/extensibility/plugin-development/src/main/java/org/gradle/plugin/devel/tasks/ValidatePlugins.java
index 92078f6c81f..0434e5df05d 100644
--- a/platforms/extensibility/plugin-development/src/main/java/org/gradle/plugin/devel/tasks/ValidatePlugins.java
+++ b/platforms/extensibility/plugin-development/src/main/java/org/gradle/plugin/devel/tasks/ValidatePlugins.java
@@ -107,7 +107,7 @@ public void validateTaskClasses() throws IOException {
                     throw problemReporter.throwing(
                         exception,
                         problemReporter.create(problemId, problemSpec -> {
-                            problemSpec.documentedAt(Documentation.upgradeMajorGuide(9, "validate_plugins_without_java_toolchain_90").getUrl());
+                            problemSpec.documentedAt(Documentation.upgradeGuide(8, "validate_plugins_without_java_toolchain_90").getUrl());
                             problemSpec.contextualLabel(exception.getMessage());
                         })
                     );
diff --git a/platforms/software/maven/src/integTest/groovy/org/gradle/api/publish/maven/MavenPublishHttpIntegTest.groovy b/platforms/software/maven/src/integTest/groovy/org/gradle/api/publish/maven/MavenPublishHttpIntegTest.groovy
index 1b95d11cf59..d08abe6fa16 100644
--- a/platforms/software/maven/src/integTest/groovy/org/gradle/api/publish/maven/MavenPublishHttpIntegTest.groovy
+++ b/platforms/software/maven/src/integTest/groovy/org/gradle/api/publish/maven/MavenPublishHttpIntegTest.groovy
@@ -334,13 +334,8 @@ class MavenPublishHttpIntegTest extends AbstractMavenPublishIntegTest {
         fails 'publish'
 
         then:
-        if (GradleContextualExecuter.isConfigCache()) {
-            // graceful degradation causes early evaluation of credential providers (and build failure at configuration time)
-            failure.assertHasDescription("Identity may contain only letters and digits, received: incompatible_repo_name")
-        } else {
-            failure.assertHasDescription("Execution failed for task ':publishMavenPublicationToIncompatible_repo_nameRepository'.")
-            failure.assertHasCause("Identity may contain only letters and digits, received: incompatible_repo_name")
-        }
+        // graceful degradation causes early evaluation of credential providers (and build failure at configuration time)
+        failure.assertHasDescription("Identity may contain only letters and digits, received: incompatible_repo_name")
     }
 
     def "can publish to authenticated repository using inlined credentials"() {
diff --git a/platforms/software/publish/src/main/java/org/gradle/api/publish/internal/component/DefaultAdhocSoftwareComponent.java b/platforms/software/publish/src/main/java/org/gradle/api/publish/internal/component/DefaultAdhocSoftwareComponent.java
index 6b22743446d..2d7f678662d 100644
--- a/platforms/software/publish/src/main/java/org/gradle/api/publish/internal/component/DefaultAdhocSoftwareComponent.java
+++ b/platforms/software/publish/src/main/java/org/gradle/api/publish/internal/component/DefaultAdhocSoftwareComponent.java
@@ -106,7 +106,7 @@ public MetadataModificationException(String message) {
 
         @Override
         public List<String> getResolutions() {
-            return Collections.singletonList(Documentation.upgradeMinorGuide(8, "gmm_modification_after_publication_populated").getConsultDocumentationMessage());
+            return Collections.singletonList(Documentation.upgradeGuide(8, "gmm_modification_after_publication_populated").getConsultDocumentationMessage());
         }
     }
 }
diff --git a/subprojects/core/src/main/java/org/gradle/execution/taskgraph/DefaultTaskExecutionGraph.java b/subprojects/core/src/main/java/org/gradle/execution/taskgraph/DefaultTaskExecutionGraph.java
index 77842cef344..e22b08cd884 100644
--- a/subprojects/core/src/main/java/org/gradle/execution/taskgraph/DefaultTaskExecutionGraph.java
+++ b/subprojects/core/src/main/java/org/gradle/execution/taskgraph/DefaultTaskExecutionGraph.java
@@ -67,6 +67,7 @@ public class DefaultTaskExecutionGraph implements TaskExecutionGraphInternal {
     private final List<NodeExecutor> nodeExecutors;
     private final GradleInternal gradleInternal;
     private final ListenerBroadcast<TaskExecutionGraphListener> graphListeners;
+    private final ListenerBroadcast<TaskExecutionGraphExecutionListener> internalGraphListeners;
     private final ListenerBroadcast<org.gradle.api.execution.TaskExecutionListener> taskListeners;
     private final BuildScopeListenerRegistrationListener buildScopeListenerRegistrationListener;
     private final ServiceRegistry globalServices;
@@ -83,6 +84,7 @@ public DefaultTaskExecutionGraph(
         ListenerBuildOperationDecorator listenerBuildOperationDecorator,
         GradleInternal gradleInternal,
         ListenerBroadcast<TaskExecutionGraphListener> graphListeners,
+        ListenerBroadcast<TaskExecutionGraphExecutionListener> internalGraphListeners,
         ListenerBroadcast<org.gradle.api.execution.TaskExecutionListener> taskListeners,
         BuildScopeListenerRegistrationListener buildScopeListenerRegistrationListener,
         ServiceRegistry globalServices
@@ -93,6 +95,7 @@ public DefaultTaskExecutionGraph(
         this.listenerBuildOperationDecorator = listenerBuildOperationDecorator;
         this.gradleInternal = gradleInternal;
         this.graphListeners = graphListeners;
+        this.internalGraphListeners = internalGraphListeners;
         this.taskListeners = taskListeners;
         this.buildScopeListenerRegistrationListener = buildScopeListenerRegistrationListener;
         this.globalServices = globalServices;
@@ -119,6 +122,9 @@ public ExecutionResult<Void> execute(FinalizedExecutionPlan plan) {
         if (!hasFiredWhenReady) {
             throw new IllegalStateException("Task graph should be populated before execution starts.");
         }
+
+        internalGraphListeners.getSource().beforeGraphExecutionStarts(this);
+
         try (ProjectExecutionServiceRegistry projectExecutionServices = new ProjectExecutionServiceRegistry(globalServices)) {
             return executeWithServices(projectExecutionServices);
         } finally {
@@ -184,6 +190,16 @@ public void whenReady(final Action<TaskExecutionGraph> action) {
         );
     }
 
+    @Override
+    public void addExecutionListener(TaskExecutionGraphExecutionListener listener) {
+        internalGraphListeners.add(listener);
+    }
+
+    @Override
+    public void removeExecutionListener(TaskExecutionGraphExecutionListener listener) {
+        internalGraphListeners.remove(listener);
+    }
+
     @Override
     public void addTaskExecutionListener(org.gradle.api.execution.TaskExecutionListener listener) {
         notifyListenerRegistration("TaskExecutionGraph.addTaskExecutionListener", listener);
diff --git a/subprojects/core/src/main/java/org/gradle/execution/taskgraph/TaskExecutionGraphExecutionListener.java b/subprojects/core/src/main/java/org/gradle/execution/taskgraph/TaskExecutionGraphExecutionListener.java
new file mode 100644
index 00000000000..11a828ae5a4
--- /dev/null
+++ b/subprojects/core/src/main/java/org/gradle/execution/taskgraph/TaskExecutionGraphExecutionListener.java
@@ -0,0 +1,37 @@
+/*
+ * Copyright 2025 the original author or authors.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.gradle.execution.taskgraph;
+
+import org.gradle.internal.InternalListener;
+import org.gradle.internal.service.scopes.EventScope;
+import org.gradle.internal.service.scopes.Scope;
+import org.jspecify.annotations.NullMarked;
+
+/**
+ * Allows extra events about task graph execution to be received.
+ */
+@EventScope(Scope.Build.class)
+@NullMarked
+public interface TaskExecutionGraphExecutionListener extends InternalListener {
+    /**
+     * Called immediately before the graph starts executing tasks.
+     * No execution-related changes have been made to the graph yet.
+     *
+     * @param graph the graph to be executed
+     */
+    void beforeGraphExecutionStarts(TaskExecutionGraphInternal graph);
+}
diff --git a/subprojects/core/src/main/java/org/gradle/execution/taskgraph/TaskExecutionGraphInternal.java b/subprojects/core/src/main/java/org/gradle/execution/taskgraph/TaskExecutionGraphInternal.java
index ceb042568ce..f02bd6094d8 100644
--- a/subprojects/core/src/main/java/org/gradle/execution/taskgraph/TaskExecutionGraphInternal.java
+++ b/subprojects/core/src/main/java/org/gradle/execution/taskgraph/TaskExecutionGraphInternal.java
@@ -20,9 +20,9 @@
 import org.gradle.execution.plan.FinalizedExecutionPlan;
 import org.gradle.execution.plan.Node;
 import org.gradle.internal.build.ExecutionResult;
-import org.jspecify.annotations.Nullable;
 import org.gradle.internal.service.scopes.Scope;
 import org.gradle.internal.service.scopes.ServiceScope;
+import org.jspecify.annotations.Nullable;
 
 import java.util.List;
 import java.util.Set;
@@ -30,6 +30,20 @@
 
 @ServiceScope(Scope.Gradle.class)
 public interface TaskExecutionGraphInternal extends TaskExecutionGraph {
+    /**
+     * Adds the internal listener for task execution graph events.
+     * These listeners are not persisted through the configuration cache, beware if you want to receive graph execution events with CC enabled.
+     *
+     * @param listener the listener
+     */
+    void addExecutionListener(TaskExecutionGraphExecutionListener listener);
+
+    /**
+     * Removes the previously registered internal listener.
+     *
+     * @param listener the listener
+     */
+    void removeExecutionListener(TaskExecutionGraphExecutionListener listener);
 
     /**
      * Find a task with the given path in the task graph.
diff --git a/subprojects/core/src/main/java/org/gradle/internal/service/scopes/GradleScopeServices.java b/subprojects/core/src/main/java/org/gradle/internal/service/scopes/GradleScopeServices.java
index ea2f491c06a..a411a77734b 100644
--- a/subprojects/core/src/main/java/org/gradle/internal/service/scopes/GradleScopeServices.java
+++ b/subprojects/core/src/main/java/org/gradle/internal/service/scopes/GradleScopeServices.java
@@ -55,6 +55,7 @@
 import org.gradle.execution.selection.BuildTaskSelector;
 import org.gradle.execution.taskgraph.DefaultTaskExecutionGraph;
 import org.gradle.execution.taskgraph.TaskExecutionGraphInternal;
+import org.gradle.execution.taskgraph.TaskExecutionGraphExecutionListener;
 import org.gradle.execution.taskgraph.TaskListenerInternal;
 import org.gradle.initialization.DefaultTaskExecutionPreparer;
 import org.gradle.initialization.TaskExecutionPreparer;
@@ -143,6 +144,11 @@ ListenerBroadcast<TaskExecutionGraphListener> createTaskExecutionGraphListenerBr
         return listenerManager.createAnonymousBroadcaster(TaskExecutionGraphListener.class);
     }
 
+    @Provides
+    ListenerBroadcast<TaskExecutionGraphExecutionListener> createTaskExecutionGraphListenerInternalBroadcast(ListenerManager listenerManager) {
+        return listenerManager.createAnonymousBroadcaster(TaskExecutionGraphExecutionListener.class);
+    }
+
     @Provides
     TaskExecutionGraphInternal createTaskExecutionGraph(
         PlanExecutor planExecutor,
@@ -152,6 +158,7 @@ TaskExecutionGraphInternal createTaskExecutionGraph(
         GradleInternal gradleInternal,
         ListenerBroadcast<org.gradle.api.execution.TaskExecutionListener> taskListeners,
         ListenerBroadcast<TaskExecutionGraphListener> graphListeners,
+        ListenerBroadcast<TaskExecutionGraphExecutionListener> internalGraphListeners,
         ListenerManager listenerManager,
         ServiceRegistry gradleScopedServices
     ) {
@@ -162,6 +169,7 @@ TaskExecutionGraphInternal createTaskExecutionGraph(
             listenerBuildOperationDecorator,
             gradleInternal,
             graphListeners,
+            internalGraphListeners,
             taskListeners,
             listenerManager.getBroadcaster(BuildScopeListenerRegistrationListener.class),
             gradleScopedServices
