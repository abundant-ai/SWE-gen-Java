diff --git a/platforms/jvm/plugins-jvm-test-suite/src/main/java/org/gradle/api/plugins/JvmTestSuitePlugin.java b/platforms/jvm/plugins-jvm-test-suite/src/main/java/org/gradle/api/plugins/JvmTestSuitePlugin.java
index bf726529d10..3f0cf99c540 100644
--- a/platforms/jvm/plugins-jvm-test-suite/src/main/java/org/gradle/api/plugins/JvmTestSuitePlugin.java
+++ b/platforms/jvm/plugins-jvm-test-suite/src/main/java/org/gradle/api/plugins/JvmTestSuitePlugin.java
@@ -19,16 +19,12 @@
 import org.gradle.api.Incubating;
 import org.gradle.api.Plugin;
 import org.gradle.api.Project;
-import org.gradle.api.file.ConfigurableFileCollection;
-import org.gradle.api.file.FileCollection;
 import org.gradle.api.plugins.jvm.JvmTestSuite;
 import org.gradle.api.plugins.jvm.internal.DefaultJvmTestSuite;
 import org.gradle.api.tasks.testing.Test;
 import org.gradle.testing.base.TestingExtension;
 import org.gradle.testing.base.plugins.TestSuiteBasePlugin;
 
-import java.util.concurrent.Callable;
-
 /**
  * A {@link org.gradle.api.Plugin} that adds extensions for declaring, compiling and running {@link JvmTestSuite}s.
  * <p>
@@ -62,12 +58,8 @@ public void apply(Project project) {
         testing.getSuites().withType(JvmTestSuite.class).all(testSuite -> {
             testSuite.getTargets().all(target -> {
                 target.getTestTask().configure(test -> {
-                    ((ConfigurableFileCollection)test.getTestClassesDirs()).convention((Callable<FileCollection>) () ->
-                        testSuite.getSources().getOutput().getClassesDirs()
-                    );
-                    ((ConfigurableFileCollection)test.getClasspath()).convention((Callable<FileCollection>) () ->
-                        testSuite.getSources().getRuntimeClasspath()
-                    );
+                    test.getConventionMapping().map("testClassesDirs", () -> testSuite.getSources().getOutput().getClassesDirs());
+                    test.getConventionMapping().map("classpath", () -> testSuite.getSources().getRuntimeClasspath());
                 });
                 target.getBinaryResultsDirectory().convention(target.getTestTask().flatMap(Test::getBinaryResultsDirectory));
             });
diff --git a/platforms/software/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrPlugin.java b/platforms/software/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrPlugin.java
index a6109b93cc5..ed856be4eec 100644
--- a/platforms/software/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrPlugin.java
+++ b/platforms/software/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrPlugin.java
@@ -61,7 +61,7 @@ public void apply(final Project project) {
         JavaPluginHelper.getJavaComponent(project).getMainFeature().getApiConfiguration().extendsFrom(antlrConfiguration);
 
         // Wire the antlr configuration into all antlr tasks
-        project.getTasks().withType(AntlrTask.class).configureEach(antlrTask -> antlrTask.antlrClasspath.convention(antlrConfiguration));
+        project.getTasks().withType(AntlrTask.class).configureEach(antlrTask -> antlrTask.getConventionMapping().map("antlrClasspath", () -> project.getConfigurations().getByName(ANTLR_CONFIGURATION_NAME)));
 
         project.getExtensions().getByType(JavaPluginExtension.class).getSourceSets().all(
             new Action<SourceSet>() {
diff --git a/platforms/software/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrTask.java b/platforms/software/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrTask.java
index 9d324189e11..846677d8436 100644
--- a/platforms/software/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrTask.java
+++ b/platforms/software/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrTask.java
@@ -16,7 +16,6 @@
 
 package org.gradle.api.plugins.antlr;
 
-import org.gradle.api.file.ConfigurableFileCollection;
 import org.gradle.api.file.FileCollection;
 import org.gradle.api.file.FileTree;
 import org.gradle.api.file.FileType;
@@ -73,14 +72,13 @@ public abstract class AntlrTask extends SourceTask {
     private boolean traceTreeWalker;
     private List<String> arguments = new ArrayList<>();
 
-    ConfigurableFileCollection antlrClasspath = getProject().getObjects().fileCollection();
+    private FileCollection antlrClasspath;
 
     private File outputDirectory;
     private String maxHeapSize;
     private FileCollection sourceSetDirectories;
     private final FileCollection stableSources = getProject().files((Callable<Object>) this::getSource);
 
-
     /**
      * Specifies that all rules call {@code traceIn}/{@code traceOut}.
      */
@@ -201,7 +199,7 @@ public FileCollection getAntlrClasspath() {
      * @param antlrClasspath The Ant task implementation classpath. Must not be null.
      */
     protected void setAntlrClasspath(FileCollection antlrClasspath) {
-        this.antlrClasspath.setFrom(antlrClasspath);
+        this.antlrClasspath = antlrClasspath;
     }
 
     @Inject
diff --git a/testing/architecture-test/src/changes/archunit-store/public-api-nullability.txt b/testing/architecture-test/src/changes/archunit-store/public-api-nullability.txt
index 7162694b82c..6570ca7b262 100644
--- a/testing/architecture-test/src/changes/archunit-store/public-api-nullability.txt
+++ b/testing/architecture-test/src/changes/archunit-store/public-api-nullability.txt
@@ -165,6 +165,7 @@ Class <org.gradle.api.tasks.testing.AggregateTestReport> is not annotated (direc
 Class <org.gradle.api.tasks.testing.GroupTestEventReporter> is not annotated (directly or via its package) with @org.jspecify.annotations.NullMarked in (GroupTestEventReporter.java:0)
 Class <org.gradle.api.tasks.testing.JUnitXmlReport> is not annotated (directly or via its package) with @org.jspecify.annotations.NullMarked in (JUnitXmlReport.java:0)
 Class <org.gradle.api.tasks.testing.Test$1> is not annotated (directly or via its package) with @org.jspecify.annotations.NullMarked in (Test.java:0)
+Class <org.gradle.api.tasks.testing.Test$2> is not annotated (directly or via its package) with @org.jspecify.annotations.NullMarked in (Test.java:0)
 Class <org.gradle.api.tasks.testing.TestEventReporter> is not annotated (directly or via its package) with @org.jspecify.annotations.NullMarked in (TestEventReporter.java:0)
 Class <org.gradle.api.tasks.testing.TestEventReporterFactory> is not annotated (directly or via its package) with @org.jspecify.annotations.NullMarked in (TestEventReporterFactory.java:0)
 Class <org.gradle.api.tasks.testing.TestExecutionException> is not annotated (directly or via its package) with @org.jspecify.annotations.NullMarked in (TestExecutionException.java:0)
