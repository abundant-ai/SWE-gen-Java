diff --git a/ktor-http/common/src/io/ktor/http/content/CompressedContent.kt b/ktor-http/common/src/io/ktor/http/content/CompressedContent.kt
index 35bfa6dab..981c5d0ff 100644
--- a/ktor-http/common/src/io/ktor/http/content/CompressedContent.kt
+++ b/ktor-http/common/src/io/ktor/http/content/CompressedContent.kt
@@ -46,6 +46,11 @@ private class CompressedReadChannelResponse(
         Headers.build {
             appendFiltered(original.headers) { name, _ -> !name.equals(HttpHeaders.ContentLength, true) }
             append(HttpHeaders.ContentEncoding, encoder.name)
+            append(
+                HttpHeaders.Vary,
+                original.headers[HttpHeaders.Vary]?.plus(", ${HttpHeaders.AcceptEncoding}")
+                    ?: HttpHeaders.AcceptEncoding
+            )
         }
     }
 
@@ -67,6 +72,11 @@ private class CompressedWriteChannelResponse(
         Headers.build {
             appendFiltered(original.headers) { name, _ -> !name.equals(HttpHeaders.ContentLength, true) }
             append(HttpHeaders.ContentEncoding, encoder.name)
+            append(
+                HttpHeaders.Vary,
+                original.headers[HttpHeaders.Vary]?.plus(", ${HttpHeaders.AcceptEncoding}")
+                    ?: HttpHeaders.AcceptEncoding
+            )
         }
     }
 
diff --git a/ktor-server/ktor-server-core/jvm/src/io/ktor/server/http/content/PreCompressed.kt b/ktor-server/ktor-server-core/jvm/src/io/ktor/server/http/content/PreCompressed.kt
index 31e05deb8..3905a7ee6 100644
--- a/ktor-server/ktor-server-core/jvm/src/io/ktor/server/http/content/PreCompressed.kt
+++ b/ktor-server/ktor-server-core/jvm/src/io/ktor/server/http/content/PreCompressed.kt
@@ -135,6 +135,10 @@ internal suspend fun ApplicationCall.respondStaticFile(
     suppressCompression()
     val compressedFile = File("${requestedFile.absolutePath}.${bestCompressionFit.extension}")
     if (cacheControlValues.isNotEmpty()) response.header(HttpHeaders.CacheControl, cacheControlValues)
+    response.header(
+        HttpHeaders.Vary,
+        response.headers[HttpHeaders.Vary]?.plus(", ${HttpHeaders.AcceptEncoding}") ?: HttpHeaders.AcceptEncoding
+    )
     modify(requestedFile, this)
     val localFileContent = LocalFileContent(compressedFile, contentType(requestedFile))
     respond(PreCompressedResponse(localFileContent, bestCompressionFit.encoding))
@@ -195,6 +199,10 @@ internal suspend fun ApplicationCall.respondStaticResource(
         suppressCompression()
         val cacheControlValues = cacheControl(bestCompressionFit.url).joinToString(", ")
         if (cacheControlValues.isNotEmpty()) response.header(HttpHeaders.CacheControl, cacheControlValues)
+        response.header(
+            HttpHeaders.Vary,
+            response.headers[HttpHeaders.Vary]?.plus(", ${HttpHeaders.AcceptEncoding}") ?: HttpHeaders.AcceptEncoding
+        )
         modifier(bestCompressionFit.url, this)
         respond(PreCompressedResponse(bestCompressionFit.content, bestCompressionFit.compression.encoding))
         return
