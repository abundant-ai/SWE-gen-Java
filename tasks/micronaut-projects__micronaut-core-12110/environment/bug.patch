diff --git a/gradle.properties b/gradle.properties
index 0f740655fb..01b659bafe 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1,4 +1,4 @@
-projectVersion=4.10.3
+projectVersion=4.10.4-SNAPSHOT
 projectGroupId=io.micronaut
 projectDesc=Core components supporting the Micronaut Framework
 title=Micronaut Core
diff --git a/inject-java/src/main/java/io/micronaut/annotation/processing/BeanDefinitionInjectProcessor.java b/inject-java/src/main/java/io/micronaut/annotation/processing/BeanDefinitionInjectProcessor.java
index 7774401af5..51de435724 100644
--- a/inject-java/src/main/java/io/micronaut/annotation/processing/BeanDefinitionInjectProcessor.java
+++ b/inject-java/src/main/java/io/micronaut/annotation/processing/BeanDefinitionInjectProcessor.java
@@ -149,36 +149,30 @@ public class BeanDefinitionInjectProcessor extends AbstractInjectAnnotationProce
                         return Stream.of(typeElement);
                     })
                     .forEach(typeElement -> {
-                        String name = typeElement.getQualifiedName().toString();
-                        try {
-                            if (typeElement.getKind() == ENUM) {
-                                final AnnotationMetadata am = annotationMetadataBuilder.lookupOrBuildForType(typeElement);
-                                if (BeanDefinitionCreatorFactory.isDeclaredBeanInMetadata(am)) {
-                                    error(typeElement, "Enum types cannot be defined as beans");
-                                }
-                                return;
-                            }
-                            // skip Groovy code, handled by InjectTransform. Required for GroovyEclipse compiler
-                            if ((groovyObjectType != null && typeUtils.isAssignable(typeElement.asType(), groovyObjectType))) {
-                                return;
+                        if (typeElement.getKind() == ENUM) {
+                            final AnnotationMetadata am = annotationMetadataBuilder.lookupOrBuildForType(typeElement);
+                            if (BeanDefinitionCreatorFactory.isDeclaredBeanInMetadata(am)) {
+                                error(typeElement, "Enum types cannot be defined as beans");
                             }
+                            return;
+                        }
+                        // skip Groovy code, handled by InjectTransform. Required for GroovyEclipse compiler
+                        if ((groovyObjectType != null && typeUtils.isAssignable(typeElement.asType(), groovyObjectType))) {
+                            return;
+                        }
 
-
-                            if (beanDefinitions.contains(name) || processed.contains(name) || name.endsWith(BeanDefinitionVisitor.PROXY_SUFFIX)) {
-                                return;
-                            }
-                            boolean isInterface = JavaModelUtils.resolveKind(typeElement, ElementKind.INTERFACE).isPresent();
-                            if (!isInterface) {
+                        String name = typeElement.getQualifiedName().toString();
+                        if (beanDefinitions.contains(name) || processed.contains(name) || name.endsWith(BeanDefinitionVisitor.PROXY_SUFFIX)) {
+                            return;
+                        }
+                        boolean isInterface = JavaModelUtils.resolveKind(typeElement, ElementKind.INTERFACE).isPresent();
+                        if (!isInterface) {
+                            beanDefinitions.add(name);
+                        } else {
+                            AnnotationMetadata annotationMetadata = annotationMetadataBuilder.lookupOrBuildForType(typeElement);
+                            if (BeanDefinitionCreatorFactory.isIntroduction(annotationMetadata) || annotationMetadata.hasStereotype(ConfigurationReader.class)) {
                                 beanDefinitions.add(name);
-                            } else {
-                                AnnotationMetadata annotationMetadata = annotationMetadataBuilder.lookupOrBuildForType(typeElement);
-                                if (BeanDefinitionCreatorFactory.isIntroduction(annotationMetadata) || annotationMetadata.hasStereotype(ConfigurationReader.class)) {
-                                    beanDefinitions.add(name);
-                                }
                             }
-                        } catch (PostponeToNextRoundException e) {
-                            processed.remove(name);
-                            postponed.put(name, e);
                         }
                     }));
             }
@@ -189,11 +183,6 @@ public class BeanDefinitionInjectProcessor extends AbstractInjectAnnotationProce
                 postponed.remove(name);
             }
 
-            if (!postponed.isEmpty()) {
-                beanDefinitions.addAll(postponed.keySet());
-                postponed.clear();
-            }
-
             // process remaining
             int count = beanDefinitions.size();
             if (count > 0) {
diff --git a/inject-java/src/main/java/io/micronaut/annotation/processing/TypeElementVisitorProcessor.java b/inject-java/src/main/java/io/micronaut/annotation/processing/TypeElementVisitorProcessor.java
index 28c709567a..22ef42be4c 100644
--- a/inject-java/src/main/java/io/micronaut/annotation/processing/TypeElementVisitorProcessor.java
+++ b/inject-java/src/main/java/io/micronaut/annotation/processing/TypeElementVisitorProcessor.java
@@ -278,10 +278,8 @@ public class TypeElementVisitorProcessor extends AbstractInjectAnnotationProcess
                         extraClasses.addAll(VisitorUtils.collectImportedElements(javaClassElement, javaVisitorContext));
                         javaClassElements.addAll((Collection) extraClasses);
                     } catch (PostponeToNextRoundException e) {
-                        javaClassElements.remove(javaClassElement);
                         postponeElement(javaClassElement, e.getNativeErrorElement(), e);
                     } catch (ElementPostponedToNextRoundException e) {
-                        javaClassElements.remove(javaClassElement);
                         Element element = PostponeToNextRoundException.resolvedFailedElement(e.getOriginatingElement());
                         postponeElement(javaClassElement, element, e);
                     }
diff --git a/inject-java/src/test/groovy/io/micronaut/visitors/ConstantGen.java b/inject-java/src/test/groovy/io/micronaut/visitors/ConstantGen.java
deleted file mode 100644
index 7f6b23ccc8..0000000000
--- a/inject-java/src/test/groovy/io/micronaut/visitors/ConstantGen.java
+++ /dev/null
@@ -1,4 +0,0 @@
-package io.micronaut.visitors;
-
-public @interface ConstantGen {
-}
diff --git a/inject-java/src/test/groovy/io/micronaut/visitors/ConstantGenVisitor.java b/inject-java/src/test/groovy/io/micronaut/visitors/ConstantGenVisitor.java
deleted file mode 100644
index 48c7f6ff62..0000000000
--- a/inject-java/src/test/groovy/io/micronaut/visitors/ConstantGenVisitor.java
+++ /dev/null
@@ -1,39 +0,0 @@
-package io.micronaut.visitors;
-
-import io.micronaut.inject.ast.ClassElement;
-import io.micronaut.inject.visitor.TypeElementVisitor;
-import io.micronaut.inject.visitor.VisitorContext;
-import org.intellij.lang.annotations.Language;
-
-import java.io.IOException;
-
-
-public class ConstantGenVisitor implements TypeElementVisitor<ConstantGen, Object> {
-
-    private static final @Language("java") String SOURCE_MODEL = """
-package test;
-
-class SomeInterfaceConstants {
-    public static final String PATH = "generated";
-}
-""";
-
-    @Override
-    public void visitClass(ClassElement element, VisitorContext context) {
-        if (element.hasDeclaredAnnotation(ConstantGen.class)) {
-            context.visitGeneratedSourceFile("test", "SomeInterfaceConstants", element)
-                .ifPresent(generatedFile -> {
-                    try {
-                        generatedFile.write(writer -> writer.write(SOURCE_MODEL));
-                    } catch (IOException e) {
-                        throw new RuntimeException(e);
-                    }
-                });
-        }
-    }
-
-    @Override
-    public VisitorKind getVisitorKind() {
-        return VisitorKind.ISOLATING;
-    }
-}
diff --git a/inject-java/src/test/groovy/io/micronaut/visitors/IntroductionTest.java b/inject-java/src/test/groovy/io/micronaut/visitors/IntroductionTest.java
index dfe7a0035e..798fc61d7e 100644
--- a/inject-java/src/test/groovy/io/micronaut/visitors/IntroductionTest.java
+++ b/inject-java/src/test/groovy/io/micronaut/visitors/IntroductionTest.java
@@ -8,5 +8,4 @@ import java.lang.annotation.RetentionPolicy;
 @Introduction
 @Retention(RetentionPolicy.RUNTIME)
 public @interface IntroductionTest {
-    String value() default "";
 }
diff --git a/inject-java/src/test/groovy/io/micronaut/visitors/PostponedVisitorsSpec.groovy b/inject-java/src/test/groovy/io/micronaut/visitors/PostponedVisitorsSpec.groovy
index b51c641f73..6c0be08e57 100644
--- a/inject-java/src/test/groovy/io/micronaut/visitors/PostponedVisitorsSpec.groovy
+++ b/inject-java/src/test/groovy/io/micronaut/visitors/PostponedVisitorsSpec.groovy
@@ -6,7 +6,6 @@ import io.micronaut.core.annotation.Introspected
 import io.micronaut.http.annotation.Controller
 import io.micronaut.http.annotation.Get
 import io.micronaut.inject.BeanDefinition
-import io.micronaut.inject.ProxyBeanDefinition
 import io.micronaut.inject.ast.ClassElement
 import io.micronaut.inject.ast.MethodElement
 import io.micronaut.inject.ast.UnresolvedTypeKind
@@ -18,28 +17,6 @@ import org.intellij.lang.annotations.Language
 import spock.lang.PendingFeature
 
 class PostponedVisitorsSpec extends AbstractTypeElementSpec {
-
-    void 'test postpone generation of annotation metadata on introduction'() {
-        when:
-        def definition = buildBeanDefinition('test.SomeInterface' + BeanDefinitionVisitor.PROXY_SUFFIX, '''
-package test;
-
-import io.micronaut.visitors.*;
-import test.SomeInterfaceConstants;
-
-@IntroductionTest(SomeInterfaceConstants.PATH)
-interface SomeInterface {
-
-}
-
-@ConstantGen
-interface GenConstants {}
-''')
-        then:
-        definition != null
-        definition.stringValue(IntroductionTest).get() == 'generated'
-    }
-
     void 'test postpone introspection generation implementing generated interface'() {
         when:
             def definition = buildBeanIntrospection('test.Walrus', '''
diff --git a/inject-java/src/test/resources/META-INF/services/io.micronaut.inject.visitor.TypeElementVisitor b/inject-java/src/test/resources/META-INF/services/io.micronaut.inject.visitor.TypeElementVisitor
index 96d238e0c1..7dd48f21a5 100644
--- a/inject-java/src/test/resources/META-INF/services/io.micronaut.inject.visitor.TypeElementVisitor
+++ b/inject-java/src/test/resources/META-INF/services/io.micronaut.inject.visitor.TypeElementVisitor
@@ -1,5 +1,4 @@
 io.micronaut.visitors.InterfaceGenVisitor
-io.micronaut.visitors.ConstantGenVisitor
 io.micronaut.visitors.ControllerGetVisitor
 io.micronaut.visitors.IntroductionVisitor
 io.micronaut.visitors.AllElementsVisitor
