diff --git a/platforms/core-runtime/base-services/src/main/java/org/gradle/internal/FileUtils.java b/platforms/core-runtime/base-services/src/main/java/org/gradle/internal/FileUtils.java
index dcc1130a71e..ab50ddcb2d3 100644
--- a/platforms/core-runtime/base-services/src/main/java/org/gradle/internal/FileUtils.java
+++ b/platforms/core-runtime/base-services/src/main/java/org/gradle/internal/FileUtils.java
@@ -17,7 +17,9 @@
 package org.gradle.internal;
 
 import com.google.common.collect.Lists;
+import org.apache.commons.io.FileSystem;
 import org.apache.commons.io.FilenameUtils;
+import org.gradle.api.GradleException;
 
 import java.io.File;
 import java.io.IOException;
@@ -29,6 +31,14 @@
 import java.util.Locale;
 
 public class FileUtils {
+    public static final int WINDOWS_PATH_LIMIT = 260;
+
+    /**
+     * The character used to replace illegal characters in file names.
+     */
+    private static final char ILLEGAL_CHAR_REPLACEMENT = '-';
+
+
     private static final Comparator<File> FILE_SEGMENT_COMPARATOR = new Comparator<File>() {
         @Override
         public int compare(File left, File right) {
@@ -59,6 +69,30 @@ public int compare(File left, File right) {
         }
     };
 
+    /**
+     * Converts a string into a string that is safe to use as a file name.
+     * The result will preserve Unicode characters while replacing filesystem-illegal
+     * and web-problematic characters with "-".
+     */
+    public static String toSafeFileName(String name) {
+        // Use Windows filesystem rules for cross-platform compatibility
+        String result = FileSystem.WINDOWS.toLegalFileName(name, ILLEGAL_CHAR_REPLACEMENT);
+
+        // Replace additional characters that may cause issues in web/HTML contexts
+        return result.replace(' ', ILLEGAL_CHAR_REPLACEMENT)
+            .replace('\t', ILLEGAL_CHAR_REPLACEMENT)
+            .replace('\n', ILLEGAL_CHAR_REPLACEMENT)
+            .replace('\r', ILLEGAL_CHAR_REPLACEMENT);
+    }
+
+    public static File assertInWindowsPathLengthLimitation(File file) {
+        if (file.getAbsolutePath().length() > WINDOWS_PATH_LIMIT) {
+            throw new GradleException(String.format("Cannot create file. '%s' exceeds windows path limitation of %d character.", file.getAbsolutePath(), WINDOWS_PATH_LIMIT));
+
+        }
+        return file;
+    }
+
     /**
      * Returns the outer most files that encompass the given files inclusively.
      * <p>
diff --git a/platforms/core-runtime/base-services/src/main/java/org/gradle/internal/SafeFileLocationUtils.java b/platforms/core-runtime/base-services/src/main/java/org/gradle/internal/SafeFileLocationUtils.java
deleted file mode 100644
index 83db96da3fc..00000000000
--- a/platforms/core-runtime/base-services/src/main/java/org/gradle/internal/SafeFileLocationUtils.java
+++ /dev/null
@@ -1,233 +0,0 @@
-/*
- * Copyright 2009 the original author or authors.
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package org.gradle.internal;
-
-import com.google.common.annotations.VisibleForTesting;
-import com.google.common.base.Utf8;
-import com.google.common.hash.HashFunction;
-import com.google.common.hash.Hashing;
-import com.google.common.io.BaseEncoding;
-import org.apache.commons.io.FileSystem;
-import org.gradle.api.GradleException;
-
-import java.io.File;
-import java.nio.ByteBuffer;
-import java.nio.CharBuffer;
-import java.nio.charset.CharacterCodingException;
-import java.nio.charset.CharsetEncoder;
-import java.nio.charset.CodingErrorAction;
-import java.nio.charset.StandardCharsets;
-import java.util.Arrays;
-
-/**
- * Sibling class to {@link FileUtils}, focused on obtaining safe file locations and names.
- */
-public final class SafeFileLocationUtils {
-    public static final int WINDOWS_PATH_LIMIT = 260;
-
-    // SipHash-2-4 provides decent collision resistance of 64 bits while being fast to compute
-    private static final HashFunction HASHER = Hashing.sipHash24();
-    private static final BaseEncoding BASE_ENCODING = BaseEncoding.base32Hex().omitPadding();
-
-    /**
-     * A short, distinctive prefix to indicate that a file name has been truncated.
-     *
-     * <p>
-     * Uses underscores as they are likely valid characters on all filesystems,
-     * and visually distinctive. Uses "cut" instead of "truncated" to keep it short.
-     * </p>
-     */
-    private static final byte[] TRUNCATED_PREFIX_BYTES = "_cut_".getBytes(StandardCharsets.UTF_8);
-
-    /**
-     * The maximum file name length in bytes for most filesystems (e.g. ext4, NTFS).
-     *
-     * <p>
-     * We use a smaller limit on input, but emit this size for outputs with hashes.
-     * </p>
-     */
-    private static final int MAX_FILE_NAME_LENGTH_IN_BYTES = 255;
-
-    /**
-     * The maximum safe file name length in bytes to avoid exceeding filesystem limits after adding a hash suffix.
-     *
-     * <p>
-     * We subtract 1 byte for the hyphen that will separate the original name from the hash suffix.
-     * We divide the bits by 5 with round up as we encode them as base32 to keep it case-insensitive.
-     * </p>
-     */
-    @VisibleForTesting
-    static final int MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES = MAX_FILE_NAME_LENGTH_IN_BYTES - TRUNCATED_PREFIX_BYTES.length - 1 - (HASHER.bits() + 4) / 5;
-
-    /**
-     * The character used to replace illegal characters in file names.
-     */
-    private static final char ILLEGAL_CHAR_REPLACEMENT = '-';
-
-    /**
-     * Converts a string into a string that is safe to use as a file name.
-     * The result will preserve Unicode characters while replacing filesystem-illegal
-     * and web-problematic characters with "-".
-     *
-     * <p>
-     * Long strings will also be hashed to avoid issues with file name length limitations.
-     * </p>
-     */
-    public static String toSafeFileName(String name) {
-        String shortenedName = cleanAndShortenName(name);
-
-        // Use Windows filesystem rules for cross-platform compatibility
-        String result = FileSystem.WINDOWS.toLegalFileName(shortenedName, ILLEGAL_CHAR_REPLACEMENT);
-
-        // Replace additional characters that may cause issues in web/HTML contexts
-        return result.replace(' ', ILLEGAL_CHAR_REPLACEMENT)
-            .replace('\t', ILLEGAL_CHAR_REPLACEMENT)
-            .replace('\n', ILLEGAL_CHAR_REPLACEMENT)
-            .replace('\r', ILLEGAL_CHAR_REPLACEMENT);
-    }
-
-    // CharsetEncoder is not thread-safe, so use ThreadLocal to hold one per thread
-    // These are not very expensive memory-wise, so this should be OK
-    private static final ThreadLocal<CharsetEncoder> UTF_8_ENCODER_WITH_ILLEGAL_CHAR_REPLACEMENT =
-        ThreadLocal.withInitial(() ->
-            StandardCharsets.UTF_8.newEncoder()
-                .onMalformedInput(CodingErrorAction.REPLACE)
-                .onUnmappableCharacter(CodingErrorAction.REPLACE)
-                .replaceWith(String.valueOf(ILLEGAL_CHAR_REPLACEMENT).getBytes(StandardCharsets.UTF_8))
-        );
-
-    /**
-     * Remove malformed or un-mappable characters and shorten the name if necessary.
-     *
-     * @param name the original name
-     * @return the cleaned and potentially shortened name
-     */
-    private static String cleanAndShortenName(String name) {
-        byte[] rawName;
-        try {
-            ByteBuffer buffer = UTF_8_ENCODER_WITH_ILLEGAL_CHAR_REPLACEMENT.get().encode(CharBuffer.wrap(name));
-            rawName = new byte[buffer.remaining()];
-            buffer.get(rawName);
-        } catch (CharacterCodingException e) {
-            // We use the REPLACE action, so this should never happen
-            throw new AssertionError("should never encounter an encoding error", e);
-        }
-        if (rawName.length <= MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES) {
-            return name;
-        }
-
-
-        byte[] hashBytes = HASHER.hashBytes(rawName).asBytes();
-        String encoded = BASE_ENCODING.encode(hashBytes);
-
-        return shortenNameAndAddHash(rawName, encoded);
-    }
-
-    /**
-     * Shorten the name to fit within {@code MAX_FILE_NAME_LENGTH_IN_BYTES} by truncating the original name
-     * and appending a hyphen and the given encoded hash. If the original name has extension(s) shorter than
-     * {@code MAX_FILE_NAME_LENGTH_IN_BYTES}, the extension(s) are preserved after the hash.
-     *
-     * @param rawName the original name in UTF-8 bytes
-     * @param encoded the encoded hash string
-     * @return the shortened name with hash inserted
-     */
-    private static String shortenNameAndAddHash(byte[] rawName, String encoded) {
-        ByteBuffer result = ByteBuffer.allocate(MAX_FILE_NAME_LENGTH_IN_BYTES);
-        // Insert before any potential file extensions
-        byte[] extensions = null;
-        int safeLength;
-        int firstDot = findStartOfExtension(rawName);
-        if (firstDot > 0) {
-            extensions = Arrays.copyOfRange(rawName, firstDot, rawName.length);
-            safeLength = getSafeLength(rawName, MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - extensions.length);
-        } else {
-            safeLength = getSafeLength(rawName, MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES);
-        }
-        // Copy truncated prefix
-        result.put(TRUNCATED_PREFIX_BYTES);
-        // Copy safe length of original name
-        result.put(rawName, 0, safeLength);
-        // Copy hyphen
-        result.put((byte) '-');
-        // Copy hash
-        byte[] encodedBytes = encoded.getBytes(StandardCharsets.US_ASCII);
-        result.put(encodedBytes);
-        // Copy extensions if any
-        if (extensions != null) {
-            result.put(extensions);
-        }
-        // Decode back to string
-        return new String(result.array(), 0, result.position(), StandardCharsets.UTF_8);
-    }
-
-    /**
-     * Find the index of the first dot in {@code rawName} that is likely to indicate the start of file extension(s),
-     * but only if the extension(s) can fit within {@code MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES} from the end.
-     *
-     * @param rawName the original name in UTF-8 bytes
-     * @return the index of the first dot indicating the start of extension(s), or {@code -1} if none found
-     */
-    private static int findStartOfExtension(byte[] rawName) {
-        // We look for the first dot that is within (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - 1) from the end
-        // This ensures that the extension can fit even after adding the hyphen and hash
-        // Also start at minimum 1 to avoid treating a leading dot as an extension
-        int start = Math.max(1, rawName.length - (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - 1));
-        // Search only until the second last character to avoid treating a trailing dot as an extension
-        for (int i = start; i < rawName.length - 1; i++) {
-            // Doing a raw byte comparison for '.' is safe as UTF-8 ensures that no other character will encode to contain it
-            if (rawName[i] == '.') {
-                return i;
-            }
-        }
-        return -1;
-    }
-
-    /**
-     * Get the index into {@code rawName} that will keep the size in UTF-8 bytes less than {@code maxBytes},
-     * but still preserve valid UTF-8 encoding boundaries.
-     *
-     * @param rawName the original name
-     * @param maxBytes the maximum number of bytes
-     * @return the substring of name that encodes to less than {@code maxBytes} in UTF-8
-     */
-    private static int getSafeLength(byte[] rawName, int maxBytes) {
-        if (rawName.length <= maxBytes) {
-            return rawName.length;
-        }
-        // Walk backwards to find the byte that is the start of a code point (i.e. not 10xx xxxx)
-        int startOfCodePoint = maxBytes - 1;
-        while (startOfCodePoint > 0 && (rawName[startOfCodePoint] & 0b1100_0000) == 0b1000_0000) {
-            startOfCodePoint--;
-        }
-        // Now verify that the code point between startOfCodePoint and maxBytes is valid
-        if (Utf8.isWellFormed(rawName, startOfCodePoint, maxBytes - startOfCodePoint)) {
-            // It is, so the valid length is maxBytes
-            return maxBytes;
-        }
-        // Otherwise, the valid length is up to before the start of the code point
-        return startOfCodePoint;
-    }
-
-    public static File assertInWindowsPathLengthLimitation(File file) {
-        if (file.getAbsolutePath().length() > WINDOWS_PATH_LIMIT) {
-            throw new GradleException(String.format("Cannot create file. '%s' exceeds windows path limitation of %d character.", file.getAbsolutePath(), WINDOWS_PATH_LIMIT));
-
-        }
-        return file;
-    }
-}
diff --git a/platforms/core-runtime/base-services/src/test/groovy/org/gradle/internal/FileUtilsTest.groovy b/platforms/core-runtime/base-services/src/test/groovy/org/gradle/internal/FileUtilsTest.groovy
index e83f3bd3d18..06f7af0a8b9 100644
--- a/platforms/core-runtime/base-services/src/test/groovy/org/gradle/internal/FileUtilsTest.groovy
+++ b/platforms/core-runtime/base-services/src/test/groovy/org/gradle/internal/FileUtilsTest.groovy
@@ -16,9 +16,12 @@
 
 package org.gradle.internal
 
-
+import org.apache.commons.lang3.RandomStringUtils
+import org.gradle.api.GradleException
 import spock.lang.Specification
 
+import static FileUtils.assertInWindowsPathLengthLimitation
+import static FileUtils.toSafeFileName
 import static org.gradle.internal.FileUtils.calculateRoots
 import static org.gradle.internal.FileUtils.withExtension
 
@@ -26,6 +29,39 @@ class FileUtilsTest extends Specification {
 
     private static final String SEP = File.separator
 
+    def "toSafeFileName preserves Unicode and replaces problematic characters"() {
+        expect:
+        toSafeFileName(input) == output
+        where:
+        input           | output
+        'Test_$1-2.3'   | 'Test_$1-2.3'
+        'with space'    | 'with-space'
+        'with #'        | 'with-#'
+        'with /'        | 'with--'
+        'with \\'       | 'with--'
+        'with / \\ #'   | 'with-----#'
+        'with\tspace'   | 'with-space'
+        'with\nline'    | 'with-line'
+        'with\rreturn'  | 'with-return'
+        '한글테스트'     | '한글테스트'
+        'Test 中文'      | 'Test-中文'
+        'Gradle Test Executor 1' | 'Gradle-Test-Executor-1'
+    }
+
+    def "assertInWindowsPathLengthLimitation throws exception when path limit exceeded"() {
+        when:
+        File inputFile = new File(RandomStringUtils.randomAlphanumeric(10))
+        then:
+        inputFile == assertInWindowsPathLengthLimitation(inputFile);
+
+        when:
+        inputFile = new File(RandomStringUtils.randomAlphanumeric(261))
+        assertInWindowsPathLengthLimitation(inputFile);
+        then:
+        def e = thrown(GradleException);
+        e.message.contains("exceeds windows path limitation of 260 character.")
+    }
+
     List<File> toRoots(Iterable<? extends File> files) {
         calculateRoots(files)
     }
@@ -85,4 +121,29 @@ class FileUtilsTest extends Specification {
         "file"              | ""         | "file"
         "file."             | "-2"       | "file-2."
     }
+
+    def "toSafeFileName handles edge cases"() {
+        expect:
+        toSafeFileName(input) == output
+        where:
+        input           | output
+        ''              | ''
+        '   '           | '---'
+        'normal'        | 'normal'
+        '...'           | '...'
+        'file:name'     | 'file-name'
+        'file<>name'    | 'file--name'
+        'file|name'     | 'file-name'
+        'file"name'     | 'file-name'
+        'file*name'     | 'file-name'
+        'file?name'     | 'file-name'
+    }
+
+    def "toSafeFileName handles null input"() {
+        when:
+        toSafeFileName(null)
+
+        then:
+        thrown(NullPointerException)
+    }
 }
diff --git a/platforms/core-runtime/base-services/src/test/groovy/org/gradle/internal/SafeFileLocationUtilsTest.groovy b/platforms/core-runtime/base-services/src/test/groovy/org/gradle/internal/SafeFileLocationUtilsTest.groovy
deleted file mode 100644
index 214cb4486b2..00000000000
--- a/platforms/core-runtime/base-services/src/test/groovy/org/gradle/internal/SafeFileLocationUtilsTest.groovy
+++ /dev/null
@@ -1,148 +0,0 @@
-/*
- * Copyright 2025 the original author or authors.
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package org.gradle.internal
-
-import com.google.common.base.Utf8
-import org.apache.commons.lang3.RandomStringUtils
-import org.gradle.api.GradleException
-import spock.lang.Specification
-
-import java.nio.charset.StandardCharsets
-
-import static org.gradle.internal.SafeFileLocationUtils.assertInWindowsPathLengthLimitation
-import static org.gradle.internal.SafeFileLocationUtils.toSafeFileName
-import static org.gradle.internal.SafeFileLocationUtils.MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES
-
-class SafeFileLocationUtilsTest extends Specification {
-
-    private static final String TRUNCATED_PREFIX = '_cut_'
-
-    def "toSafeFileName preserves Unicode and replaces problematic characters"() {
-        expect:
-        toSafeFileName(input) == output
-        where:
-        input           | output
-        'Test_$1-2.3'   | 'Test_$1-2.3'
-        'with space'    | 'with-space'
-        'with #'        | 'with-#'
-        'with /'        | 'with--'
-        'with \\'       | 'with--'
-        'with / \\ #'   | 'with-----#'
-        'with\tspace'   | 'with-space'
-        'with\nline'    | 'with-line'
-        'with\rreturn'  | 'with-return'
-        '한글테스트'     | '한글테스트'
-        'Test 中文'      | 'Test-中文'
-        'Gradle Test Executor 1' | 'Gradle-Test-Executor-1'
-    }
-
-    def "assertInWindowsPathLengthLimitation throws exception when path limit exceeded"() {
-        when:
-        File inputFile = new File(RandomStringUtils.secure().nextAlphanumeric(10))
-        then:
-        inputFile == assertInWindowsPathLengthLimitation(inputFile);
-
-        when:
-        inputFile = new File(RandomStringUtils.secure().nextAlphanumeric(261))
-        assertInWindowsPathLengthLimitation(inputFile);
-        then:
-        def e = thrown(GradleException);
-        e.message.contains("exceeds windows path limitation of 260 character.")
-    }
-
-    def "toSafeFileName handles edge cases"() {
-        expect:
-        toSafeFileName(input) == output
-        where:
-        input                                    | output
-        ''                                       | ''
-        '   '                                    | '---'
-        'normal'                                 | 'normal'
-        '...'                                    | '...'
-        'file:name'                              | 'file-name'
-        'file<>name'                             | 'file--name'
-        'file|name'                              | 'file-name'
-        'file"name'                              | 'file-name'
-        'file*name'                              | 'file-name'
-        'file?name'                              | 'file-name'
-        'A' * MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES | 'A' * MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES
-    }
-
-    def "toSafeFileName limits length based on bytes, not chars"() {
-        when:
-        def stringWithExactlyMaxSafeFileNameChars = ('A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - 1)) + 'Θ'
-        then:
-        // Prove our test string is what it says it is, since it may not be obvious to the reader
-        stringWithExactlyMaxSafeFileNameChars.length() == MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES
-        // This gets shortened because it is at the byte limit, it comes out as 254 as the entire multi-byte char is removed
-        toSafeFileName(stringWithExactlyMaxSafeFileNameChars).getBytes(StandardCharsets.UTF_8).length == 254
-
-        when:
-        def stringWithOneMoreThanMaxSafeBytes = 'A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES + 1)
-        then:
-        toSafeFileName(stringWithOneMoreThanMaxSafeBytes).getBytes(StandardCharsets.UTF_8).length == 255
-
-        when:
-        def stringWithExactlyMaxSafeBytesWithUnicode = ('Θ' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES / 2)) +
-            // Must add an extra character if the max length is odd to reach the exact byte length
-            (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES % 2 == 0 ? '' : 'A')
-        then:
-        // Prove our test string is what it says it is, since it may not be obvious to the reader
-        stringWithExactlyMaxSafeBytesWithUnicode.getBytes(StandardCharsets.UTF_8).length == MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES
-        toSafeFileName(stringWithExactlyMaxSafeBytesWithUnicode).getBytes(StandardCharsets.UTF_8).length == MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES
-    }
-
-    def "toSafeFileName hashes overly long paths"() {
-        expect:
-        toSafeFileName(input) == TRUNCATED_PREFIX + output
-        where:
-        input                       | output
-        'A' * 256                   | 'A' * MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES + '-9G531233RIUS4'
-        ('A' * 253) + 'Θ'           | 'A' * MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES + '-JJTN3CQ249KPK'
-        // Hash should preserve extension
-        ('A' * 256) + '.html'       | 'A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - Utf8.encodedLength('.html')) + '-EG3TV8Q6QCCQS.html'
-        ('A' * 256) + '.Θ'          | 'A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - Utf8.encodedLength('.Θ')) + '-N32UNHUNL5N5O.Θ'
-        'Θ' + ('A' * 300) + '.html' | 'Θ' + ('A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - Utf8.encodedLength('Θ') - Utf8.encodedLength('.html'))) + '-5O3MPEP5S1RIC.html'
-        'Θ' + ('A' * 300) + '.Θ'    | 'Θ' + ('A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - Utf8.encodedLength('Θ') - Utf8.encodedLength('.Θ'))) + '-27045PA297J5I.Θ'
-        // Extension is only preserved if it fits, otherwise normal truncation occurs.
-        'A.' + ('B' * 300)          | 'A.' + ('B' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - Utf8.encodedLength('A.'))) + '-3CF50NO32LPNI'
-        // Preserves multiple extensions
-        ('A' * 256) + '.html.gz'       | 'A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - Utf8.encodedLength('.html.gz')) + '-KFB4JD5BUIEPK.html.gz'
-        // But only as many as will fit
-        'A.' + ('B' * 300) + '.tar.gz'  | 'A.' + ('B' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - Utf8.encodedLength('A.' + '.tar.gz'))) + '-EEI7P4AQG1S6A.tar.gz'
-    }
-
-    def "toSafeFileName does not create invalid UTF-8 when truncating"() {
-        when:
-        def stringWithUnicodeThatSitsOnByteLimit = ('A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - 1)) + 'Θ'
-        then:
-        // Prove our test string is what it says it is, since it may not be obvious to the reader
-        stringWithUnicodeThatSitsOnByteLimit.getBytes(StandardCharsets.UTF_8).length == MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES + 1
-        // The truncation should remove the multi-byte character to avoid invalid UTF-8
-        // resulting in a string of 254 bytes, not 255 bytes
-        toSafeFileName(stringWithUnicodeThatSitsOnByteLimit).getBytes(StandardCharsets.UTF_8).length == 254
-        toSafeFileName(stringWithUnicodeThatSitsOnByteLimit) == TRUNCATED_PREFIX + 'A' * (MAX_SAFE_FILE_NAME_LENGTH_IN_BYTES - 1) + '-6HRSE15BOKJM4'
-    }
-
-    def "toSafeFileName handles null input"() {
-        when:
-        toSafeFileName(null)
-
-        then:
-        thrown(NullPointerException)
-    }
-}
diff --git a/platforms/jvm/toolchains-jvm-shared/src/main/java/org/gradle/jvm/toolchain/internal/install/JavaToolchainProvisioningService.java b/platforms/jvm/toolchains-jvm-shared/src/main/java/org/gradle/jvm/toolchain/internal/install/JavaToolchainProvisioningService.java
index 5828ae8e27e..c0d4c6cee27 100644
--- a/platforms/jvm/toolchains-jvm-shared/src/main/java/org/gradle/jvm/toolchain/internal/install/JavaToolchainProvisioningService.java
+++ b/platforms/jvm/toolchains-jvm-shared/src/main/java/org/gradle/jvm/toolchain/internal/install/JavaToolchainProvisioningService.java
@@ -18,7 +18,6 @@
 
 import org.gradle.api.GradleException;
 import org.gradle.internal.FileUtils;
-import org.gradle.internal.SafeFileLocationUtils;
 import org.gradle.internal.resource.ExternalResource;
 import org.gradle.internal.resource.LocalBinaryResource;
 import org.gradle.internal.resource.ResourceExceptions;
@@ -65,7 +64,7 @@ default String getFileName(URI uri, ExternalResource resource) {
 
     default String buildFileNameWithDetails(URI uri, ExternalResource resource, JavaToolchainSpec spec) {
         String originalFileName = getFileName(uri, resource);
-        String id = SafeFileLocationUtils.toSafeFileName("-" + spec.getVendor().get() + '-' + spec.getLanguageVersion().get().asInt());
+        String id = FileUtils.toSafeFileName("-" + spec.getVendor().get() + '-' + spec.getLanguageVersion().get().asInt());
         return FileUtils.addSuffixToName(originalFileName, id);
     }
 }
diff --git a/platforms/native/platform-native/src/main/java/org/gradle/nativeplatform/toolchain/internal/NativeCompiler.java b/platforms/native/platform-native/src/main/java/org/gradle/nativeplatform/toolchain/internal/NativeCompiler.java
index 0356dd24c43..862ce60413d 100644
--- a/platforms/native/platform-native/src/main/java/org/gradle/nativeplatform/toolchain/internal/NativeCompiler.java
+++ b/platforms/native/platform-native/src/main/java/org/gradle/nativeplatform/toolchain/internal/NativeCompiler.java
@@ -21,7 +21,7 @@
 import org.gradle.api.Transformer;
 import org.gradle.api.tasks.WorkResult;
 import org.gradle.api.tasks.WorkResults;
-import org.gradle.internal.SafeFileLocationUtils;
+import org.gradle.internal.FileUtils;
 import org.gradle.internal.operations.BuildOperationExecutor;
 import org.gradle.internal.operations.BuildOperationQueue;
 import org.gradle.internal.os.OperatingSystem;
@@ -93,7 +93,7 @@ protected File getOutputFileDir(File sourceFile, File objectFileDir, String file
         if (!outputDirectory.exists()) {
             outputDirectory.mkdirs();
         }
-        return windowsPathLimitation ? SafeFileLocationUtils.assertInWindowsPathLengthLimitation(outputFile) : outputFile;
+        return windowsPathLimitation ? FileUtils.assertInWindowsPathLengthLimitation(outputFile) : outputFile;
     }
 
     protected List<String> maybeGetPCHArgs(final T spec, File sourceFile) {
diff --git a/platforms/native/platform-native/src/main/java/org/gradle/nativeplatform/toolchain/internal/swift/SwiftCompiler.java b/platforms/native/platform-native/src/main/java/org/gradle/nativeplatform/toolchain/internal/swift/SwiftCompiler.java
index 5b8203e4534..76286c04b84 100644
--- a/platforms/native/platform-native/src/main/java/org/gradle/nativeplatform/toolchain/internal/swift/SwiftCompiler.java
+++ b/platforms/native/platform-native/src/main/java/org/gradle/nativeplatform/toolchain/internal/swift/SwiftCompiler.java
@@ -22,7 +22,7 @@
 import com.google.gson.GsonBuilder;
 import org.gradle.api.Action;
 import org.gradle.api.tasks.WorkResult;
-import org.gradle.internal.SafeFileLocationUtils;
+import org.gradle.internal.FileUtils;
 import org.gradle.internal.UncheckedException;
 import org.gradle.internal.operations.BuildOperationExecutor;
 import org.gradle.internal.operations.BuildOperationQueue;
@@ -86,7 +86,7 @@ protected File getOutputFileDir(File sourceFile, File objectFileDir, String file
             .map(sourceFile);
         File outputDirectory = outputFile.getParentFile();
         GFileUtils.mkdirs(outputDirectory);
-        return windowsPathLimitation ? SafeFileLocationUtils.assertInWindowsPathLengthLimitation(outputFile) : outputFile;
+        return windowsPathLimitation ? FileUtils.assertInWindowsPathLengthLimitation(outputFile) : outputFile;
     }
 
     @Override
diff --git a/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/junit/result/Binary2JUnitXmlReportGenerator.java b/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/junit/result/Binary2JUnitXmlReportGenerator.java
index 48a51b44830..143465a50a3 100644
--- a/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/junit/result/Binary2JUnitXmlReportGenerator.java
+++ b/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/junit/result/Binary2JUnitXmlReportGenerator.java
@@ -21,8 +21,8 @@
 import org.gradle.api.GradleException;
 import org.gradle.api.logging.Logger;
 import org.gradle.api.logging.Logging;
+import org.gradle.internal.FileUtils;
 import org.gradle.internal.IoActions;
-import org.gradle.internal.SafeFileLocationUtils;
 import org.gradle.internal.operations.BuildOperationContext;
 import org.gradle.internal.operations.BuildOperationDescriptor;
 import org.gradle.internal.operations.BuildOperationExecutor;
@@ -100,7 +100,7 @@ public void execute(final TestClassResult result) {
     }
 
     private String getReportFileName(TestClassResult result) {
-        return REPORT_FILE_PREFIX + SafeFileLocationUtils.toSafeFileName(result.getClassName()) + REPORT_FILE_EXTENSION;
+        return REPORT_FILE_PREFIX + FileUtils.toSafeFileName(result.getClassName()) + REPORT_FILE_EXTENSION;
     }
 
     private static class JUnitXmlReportFileGenerator implements RunnableBuildOperation {
diff --git a/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/report/ClassTestResults.java b/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/report/ClassTestResults.java
index ff6feaf32bb..4579f654e3d 100644
--- a/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/report/ClassTestResults.java
+++ b/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/report/ClassTestResults.java
@@ -16,7 +16,7 @@
 package org.gradle.api.internal.tasks.testing.report;
 
 import org.apache.commons.lang3.StringUtils;
-import org.gradle.internal.SafeFileLocationUtils;
+import org.gradle.internal.FileUtils;
 
 import java.util.Collection;
 import java.util.Set;
@@ -46,7 +46,7 @@ public ClassTestResults(long id, String name, String displayName, PackageTestRes
         this.name = name;
         this.displayName = displayName;
         this.packageResults = packageResults;
-        baseUrl = HTML_REPORT_PREFIX + SafeFileLocationUtils.toSafeFileName(name) + HTML_EXTENSION;
+        baseUrl = HTML_REPORT_PREFIX + FileUtils.toSafeFileName(name) + HTML_EXTENSION;
     }
 
     public long getId() {
diff --git a/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/report/generic/GenericHtmlTestReportGenerator.java b/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/report/generic/GenericHtmlTestReportGenerator.java
index 265a8193642..5f95eb1563f 100644
--- a/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/report/generic/GenericHtmlTestReportGenerator.java
+++ b/platforms/software/testing-base/src/main/java/org/gradle/api/internal/tasks/testing/report/generic/GenericHtmlTestReportGenerator.java
@@ -27,7 +27,7 @@
 import org.gradle.api.internal.tasks.testing.results.serializable.SerializableTestResultStore;
 import org.gradle.api.logging.Logger;
 import org.gradle.api.logging.Logging;
-import org.gradle.internal.SafeFileLocationUtils;
+import org.gradle.internal.FileUtils;
 import org.gradle.internal.UncheckedException;
 import org.gradle.internal.concurrent.CompositeStoppable;
 import org.gradle.internal.operations.BuildOperationContext;
@@ -71,7 +71,7 @@ public static String getFilePath(org.gradle.util.Path path) {
         if (path.segmentCount() == 0) {
             filePath = "index.html";
         } else {
-            filePath = String.join("/", Iterables.transform(path.segments(), SafeFileLocationUtils::toSafeFileName)) + "/index.html";
+            filePath = String.join("/", Iterables.transform(path.segments(), FileUtils::toSafeFileName)) + "/index.html";
         }
         return filePath;
     }
diff --git a/testing/internal-testing/src/main/groovy/org/gradle/integtests/fixtures/HtmlTestExecutionResult.groovy b/testing/internal-testing/src/main/groovy/org/gradle/integtests/fixtures/HtmlTestExecutionResult.groovy
index c81b4410652..6c206a672a4 100644
--- a/testing/internal-testing/src/main/groovy/org/gradle/integtests/fixtures/HtmlTestExecutionResult.groovy
+++ b/testing/internal-testing/src/main/groovy/org/gradle/integtests/fixtures/HtmlTestExecutionResult.groovy
@@ -15,8 +15,7 @@
  */
 package org.gradle.integtests.fixtures
 
-
-import org.gradle.internal.SafeFileLocationUtils
+import org.gradle.internal.FileUtils
 import org.gradle.util.internal.CollectionUtils
 import org.gradle.util.internal.TextUtil
 import org.hamcrest.Matcher
@@ -68,12 +67,12 @@ class HtmlTestExecutionResult implements TestExecutionResult {
 
     private void assertHtmlReportForTestClassExists(String... classNames) {
         classNames.each {
-            assert new File(htmlReportDirectory, "classes/${SafeFileLocationUtils.toSafeFileName(it)}.html").file
+            assert new File(htmlReportDirectory, "classes/${FileUtils.toSafeFileName(it)}.html").file
         }
     }
 
     boolean testClassExists(String testClass) {
-        return new File(htmlReportDirectory, "classes/${SafeFileLocationUtils.toSafeFileName(testClass)}.html").exists()
+        return new File(htmlReportDirectory, "classes/${FileUtils.toSafeFileName(testClass)}.html").exists()
     }
 
     boolean testClassDoesNotExist(String testClass) {
@@ -81,11 +80,11 @@ class HtmlTestExecutionResult implements TestExecutionResult {
     }
 
     TestClassExecutionResult testClass(String testClass) {
-        return new HtmlTestClassExecutionResult(new File(htmlReportDirectory, "classes/${SafeFileLocationUtils.toSafeFileName(testClass)}.html"))
+        return new HtmlTestClassExecutionResult(new File(htmlReportDirectory, "classes/${FileUtils.toSafeFileName(testClass)}.html"))
     }
 
     TestClassExecutionResult testClassStartsWith(String testClass) {
-        return new HtmlTestClassExecutionResult(new File(htmlReportDirectory, "classes").listFiles().find { it.name.startsWith(SafeFileLocationUtils.toSafeFileName(testClass)) })
+        return new HtmlTestClassExecutionResult(new File(htmlReportDirectory, "classes").listFiles().find { it.name.startsWith(FileUtils.toSafeFileName(testClass)) })
     }
 
     @Override
