diff --git a/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinGradleScriptTemplate.kt b/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinGradleScriptTemplate.kt
index 23d261cc7ea..7bf19766bb6 100644
--- a/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinGradleScriptTemplate.kt
+++ b/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinGradleScriptTemplate.kt
@@ -32,7 +32,7 @@ import kotlin.script.templates.ScriptTemplateDefinition
 
 
 class KotlinGradleScriptTemplateCompilationConfiguration : KotlinDslStandaloneScriptCompilationConfiguration({
-    filePathPattern.put(".*/(?:.+\\.)?init\\.gradle\\.kts")
+    filePathPattern.put("(?:.+\\.)?init\\.gradle\\.kts")
     baseClass(KotlinGradleScriptTemplate::class)
     implicitReceivers(Gradle::class)
 })
diff --git a/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinProjectScriptTemplate.kt b/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinProjectScriptTemplate.kt
index 3d07eb8fe1f..b16e7b64805 100644
--- a/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinProjectScriptTemplate.kt
+++ b/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinProjectScriptTemplate.kt
@@ -34,7 +34,7 @@ import kotlin.script.templates.ScriptTemplateDefinition
 
 
 class KotlinProjectScriptTemplateCompilationConfiguration : KotlinDslStandaloneScriptCompilationConfiguration({
-    filePathPattern.put(".*/.+(?<!(/|\\.)(init|settings))\\.gradle\\.kts")
+    filePathPattern.put(".+(?<!(^|\\.)(init|settings))\\.gradle\\.kts")
     baseClass(KotlinProjectScriptTemplate::class)
     implicitReceivers(Project::class)
 })
diff --git a/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinSettingsScriptTemplate.kt b/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinSettingsScriptTemplate.kt
index ba4af4c6efd..1f55228669e 100644
--- a/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinSettingsScriptTemplate.kt
+++ b/platforms/core-configuration/kotlin-dsl/src/main/kotlin/org/gradle/kotlin/dsl/KotlinSettingsScriptTemplate.kt
@@ -33,7 +33,7 @@ import kotlin.script.templates.ScriptTemplateDefinition
 
 
 class KotlinSettingsScriptTemplateCompilationConfiguration : KotlinDslStandaloneScriptCompilationConfiguration({
-    filePathPattern.put(".*/(?:.+\\.)?settings\\.gradle\\.kts")
+    filePathPattern.put("(?:.+\\.)?settings\\.gradle\\.kts")
     baseClass(KotlinSettingsScriptTemplate::class)
     implicitReceivers(Settings::class)
 })
diff --git a/platforms/core-configuration/kotlin-dsl/src/test/kotlin/org/gradle/kotlin/dsl/KotlinBuildScriptPatternTest.kt b/platforms/core-configuration/kotlin-dsl/src/test/kotlin/org/gradle/kotlin/dsl/KotlinBuildScriptPatternTest.kt
index f127288ff65..9c912e0a51d 100644
--- a/platforms/core-configuration/kotlin-dsl/src/test/kotlin/org/gradle/kotlin/dsl/KotlinBuildScriptPatternTest.kt
+++ b/platforms/core-configuration/kotlin-dsl/src/test/kotlin/org/gradle/kotlin/dsl/KotlinBuildScriptPatternTest.kt
@@ -16,13 +16,10 @@
 
 package org.gradle.kotlin.dsl
 
-import org.gradle.util.internal.TextUtil
 import org.junit.Assert.assertEquals
 import org.junit.Test
 import org.junit.runner.RunWith
 import org.junit.runners.Parameterized
-import kotlin.io.path.Path
-import kotlin.io.path.pathString
 import kotlin.reflect.KClass
 import kotlin.reflect.full.findAnnotation
 import kotlin.script.experimental.annotations.KotlinScript
@@ -91,16 +88,12 @@ class KotlinBuildScriptPatternTest(val script: Script) {
 
     private
     fun checkScriptRecognizedBy(scriptParserClass: KClass<*>, supportedScriptType: ScriptType) {
-        // Matching happens against a full path in IntelliJ
-        val filePath = TextUtil.normaliseFileSeparators(Path("/some/path/to", script.name).pathString)
-        assertScriptFilePatternMatches(filePathPatternFrom(scriptParserClass), supportedScriptType, filePath)
+        assertScriptFilePatternMatches(filePathPatternFrom(scriptParserClass), supportedScriptType)
     }
 
     private
     fun checkScriptRecognizedByLegacy(scriptParserClass: KClass<*>, supportedScriptType: ScriptType) {
-        // Matching happens against the file name in IntelliJ
-        val fileName = script.name
-        assertScriptFilePatternMatches(scriptFilePatternFromLegacy(scriptParserClass), supportedScriptType, fileName)
+        assertScriptFilePatternMatches(scriptFilePatternFromLegacy(scriptParserClass), supportedScriptType)
     }
 
     private
@@ -119,12 +112,12 @@ class KotlinBuildScriptPatternTest(val script: Script) {
         scriptParserClass.findAnnotation<ScriptTemplateDefinition>()!!.scriptFilePattern
 
     private
-    fun assertScriptFilePatternMatches(scriptFilePattern: String, supportedScriptType: ScriptType, filePathOrName: String) {
+    fun assertScriptFilePatternMatches(scriptFilePattern: String, supportedScriptType: ScriptType) {
         val shouldMatch = script.type == supportedScriptType
         assertEquals(
-            "$filePathOrName should${if (shouldMatch) "" else " not"} match $scriptFilePattern",
+            "${script.name} should${if (shouldMatch) "" else " not"} match $scriptFilePattern",
             shouldMatch,
-            filePathOrName.matches(scriptFilePattern.toRegex())
+            script.name.matches(scriptFilePattern.toRegex())
         )
     }
 }
