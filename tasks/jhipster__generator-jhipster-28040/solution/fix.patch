diff --git a/.blueprint/github-build-matrix/support/git-changes.ts b/.blueprint/github-build-matrix/support/git-changes.ts
index 768afe62c3..e6965357de 100644
--- a/.blueprint/github-build-matrix/support/git-changes.ts
+++ b/.blueprint/github-build-matrix/support/git-changes.ts
@@ -24,7 +24,7 @@ export const getGitChanges = async (options: { allTrue?: boolean } = {}) => {
       hasPatternChanges('lib/**') ||
       hasPatternChanges('generators/*') ||
       hasPatternChanges('generators/{base*,bootstrap*,git,jdl,project-name}/**'),
-    ci: hasPatternChanges('.github/{actions,workflows}/**'),
+    ci: hasPatternChanges('.github/{actions,workflows}/**') || hasPatternChanges('test-integration/{,jdl}samples/**'),
     devBlueprint: hasPatternChanges('.blueprint/**'),
     devserverWorkflow: hasPatternChanges('.github/workflows/devserver.yml'),
     common: hasPatternChanges('generators/{app,common,docker,languages}/**'),
diff --git a/generators/spring-boot/templates/src/main/java/_package_/_entityPackage_/repository/UserRepository.java.ejs b/generators/spring-boot/templates/src/main/java/_package_/_entityPackage_/repository/UserRepository.java.ejs
index e73bccc4eb..9276c2ed6c 100644
--- a/generators/spring-boot/templates/src/main/java/_package_/_entityPackage_/repository/UserRepository.java.ejs
+++ b/generators/spring-boot/templates/src/main/java/_package_/_entityPackage_/repository/UserRepository.java.ejs
@@ -203,7 +203,7 @@ public interface UserRepository extends <% if (databaseTypeSql) { %>JpaRepositor
   <%_ if (!authenticationTypeOauth2) { _%>
     <%_ if (databaseTypeCouchbase || databaseTypeMongodb || databaseTypeNeo4j) { _%>
       <%_ if (cacheProviderAny) { _%>
-    @Cacheable(cacheNames = USERS_BY_EMAIL_CACHE)
+    @Cacheable(cacheNames = USERS_BY_EMAIL_CACHE, unless="#result == null")
       <%_ } _%>
     <%_ } _%>
     <% if (databaseTypeCouchbase) { %>default <% } %><%= optionalOrMono %><<%= user.persistClass %>> findOneByEmailIgnoreCase(String email)<% if (!databaseTypeCouchbase) { %>;<% } else { %> {
@@ -219,14 +219,14 @@ public interface UserRepository extends <% if (databaseTypeSql) { %>JpaRepositor
   <%_ } _%>
   <%_ if (databaseTypeCouchbase) { _%>
     <%_ if (cacheProviderAny) { _%>
-    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE)
+    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE, unless="#result == null")
     <%_ } _%>
     default <%= optionalOrMono %><<%= user.persistClass %>> findOneByLogin(String login) {
         return findById(login);
     }
   <%_ } else if (databaseTypeMongodb || databaseTypeNeo4j) { _%>
     <%_ if (cacheProviderAny) { _%>
-    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE)
+    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE, unless="#result == null")
     <%_ } _%>
     <%= optionalOrMono %><<%= user.persistClass %>> findOneByLogin(String login);
   <%_ } else { _%>
@@ -241,14 +241,14 @@ public interface UserRepository extends <% if (databaseTypeSql) { %>JpaRepositor
   <%_ if (databaseTypeSql) { _%>
     @EntityGraph(attributePaths = "authorities")
     <%_ if (cacheProviderAny) { _%>
-    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE)
+    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE, unless="#result == null")
     <%_ } _%>
     Optional<<%= user.persistClass %>> findOneWithAuthoritiesByLogin(String login);
 
     <%_ if (!authenticationTypeOauth2) { _%>
     @EntityGraph(attributePaths = "authorities")
       <%_ if (cacheProviderAny) { _%>
-    @Cacheable(cacheNames = USERS_BY_EMAIL_CACHE)
+    @Cacheable(cacheNames = USERS_BY_EMAIL_CACHE, unless="#result == null")
       <%_ } _%>
     Optional<<%= user.persistClass %>> findOneWithAuthoritiesByEmailIgnoreCase(String email);
 
@@ -609,7 +609,7 @@ public class UserRepository {
     }
 
   <%_ if (cacheProviderAny) { _%>
-    @Cacheable(cacheNames = USERS_BY_EMAIL_CACHE)
+    @Cacheable(cacheNames = USERS_BY_EMAIL_CACHE, unless="#result == null")
   <%_ } _%>
     public <%= optionalOrMono %><<%= user.persistClass %>> findOneByEmailIgnoreCase(String email) {
         BoundStatement stmt = findOneByEmailStmt.bind().setString("email", email.toLowerCase());
@@ -617,7 +617,7 @@ public class UserRepository {
     }
 
   <%_ if (cacheProviderAny) { _%>
-    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE)
+    @Cacheable(cacheNames = USERS_BY_LOGIN_CACHE, unless="#result == null")
   <%_ } _%>
     public <%= optionalOrMono %><<%= user.persistClass %>> findOneByLogin(String login) {
         BoundStatement stmt = findOneByLoginStmt.bind().setString("login", login);
diff --git a/generators/spring-boot/templates/src/main/java/_package_/_entityPackage_/service/UserService.java.ejs b/generators/spring-boot/templates/src/main/java/_package_/_entityPackage_/service/UserService.java.ejs
index 25e1d67733..643de56f0c 100644
--- a/generators/spring-boot/templates/src/main/java/_package_/_entityPackage_/service/UserService.java.ejs
+++ b/generators/spring-boot/templates/src/main/java/_package_/_entityPackage_/service/UserService.java.ejs
@@ -1097,9 +1097,9 @@ public class UserService {
 <%_ if (cacheProviderAny && !databaseTypeNo) { _%>
 
     private void clearUserCaches(<%= user.persistClass %> user) {
-        Objects.requireNonNull(cacheManager.getCache(UserRepository.USERS_BY_LOGIN_CACHE)).evict(user.getLogin());
+        Objects.requireNonNull(cacheManager.getCache(UserRepository.USERS_BY_LOGIN_CACHE)).evictIfPresent(user.getLogin());
         if (user.getEmail() != null) {
-            Objects.requireNonNull(cacheManager.getCache(UserRepository.USERS_BY_EMAIL_CACHE)).evict(user.getEmail());
+            Objects.requireNonNull(cacheManager.getCache(UserRepository.USERS_BY_EMAIL_CACHE)).evictIfPresent(user.getEmail());
         }
     }
 <%_ } _%>
diff --git a/generators/spring-boot/templates/src/test/java/_package_/_entityPackage_/web/rest/UserResourceIT.java.ejs b/generators/spring-boot/templates/src/test/java/_package_/_entityPackage_/web/rest/UserResourceIT.java.ejs
index 2d9af14b28..c683a61c3c 100644
--- a/generators/spring-boot/templates/src/test/java/_package_/_entityPackage_/web/rest/UserResourceIT.java.ejs
+++ b/generators/spring-boot/templates/src/test/java/_package_/_entityPackage_/web/rest/UserResourceIT.java.ejs
@@ -276,12 +276,6 @@ class UserResourceIT {
 
     @AfterEach
     public void cleanupAndCheck() {
-<%_ if (cacheProviderAny) { _%>
-    cacheManager.getCacheNames().stream()
-        .map(cacheName -> this.cacheManager.getCache(cacheName))
-        .filter(Objects::nonNull)
-        .forEach(Cache::clear);
-<%_ } _%>
 <%_ if (requiresDeleteAllUsers) { _%>
     <%_ if (databaseTypeSql && reactive) { _%>
         userRepository.deleteAllUserAuthorities()<%- reactorBlock %>;
@@ -296,6 +290,12 @@ class UserResourceIT {
 <%_ if (!databaseTypeCassandra && !requiresDeleteAllUsers) { _%>
         assertThat(userRepository.count()<%- reactorBlock %>).isEqualTo(numberOfUsers);
         numberOfUsers = null;
+<%_ } _%>
+<%_ if (cacheProviderAny) { _%>
+        cacheManager.getCacheNames().stream()
+            .map(cacheName -> this.cacheManager.getCache(cacheName))
+            .filter(Objects::nonNull)
+            .forEach(Cache::invalidate);
 <%_ } _%>
     }
 <%_ if (!authenticationTypeOauth2) { _%>
diff --git a/test-integration/samples/ng-couchbase/.yo-rc.json b/test-integration/samples/ng-couchbase/.yo-rc.json
index 6c7c6f20bb..36b10c2388 100644
--- a/test-integration/samples/ng-couchbase/.yo-rc.json
+++ b/test-integration/samples/ng-couchbase/.yo-rc.json
@@ -2,9 +2,9 @@
   "generator-jhipster": {
     "applicationType": "monolith",
     "authenticationType": "jwt",
-    "baseName": "sampleCouchbaseNoCache",
+    "baseName": "sampleCouchbaseCache",
     "buildTool": "maven",
-    "cacheProvider": "no",
+    "cacheProvider": "ehcache",
     "clientFramework": "angular",
     "clientPackageManager": "npm",
     "creationTimestamp": 1596513172471,
