diff --git a/inject-kotlin-test/src/main/groovy/io/micronaut/annotation/processing/test/AbstractKotlinCompilerSpec.groovy b/inject-kotlin-test/src/main/groovy/io/micronaut/annotation/processing/test/AbstractKotlinCompilerSpec.groovy
index 2ef93ebbf9..e2d224fe34 100644
--- a/inject-kotlin-test/src/main/groovy/io/micronaut/annotation/processing/test/AbstractKotlinCompilerSpec.groovy
+++ b/inject-kotlin-test/src/main/groovy/io/micronaut/annotation/processing/test/AbstractKotlinCompilerSpec.groovy
@@ -82,19 +82,6 @@ class AbstractKotlinCompilerSpec extends Specification {
         return elements.find { it.name == className }
     }
 
-    /**
-     * Builds a class element for the given source code.
-     * @param cls The source
-     * @return The class element
-     */
-    ClassElement buildClassElementJava(String className, @Language("java") String cls) {
-        List<ClassElement> elements = []
-        KotlinCompiler.compileJava(className, cls,  {
-            elements.add(it)
-        })
-        return elements.find { it.name == className }
-    }
-
     /**
      * Builds a class element for the given source code.
      * @param cls The source
@@ -126,21 +113,6 @@ class AbstractKotlinCompilerSpec extends Specification {
         return elements.first()
     }
 
-    /**
-     * Builds a class element for the given source code.
-     * @param cls The source
-     * @return The result
-     */
-    <T> T buildClassElementTransformedJava(String className, @Language("java") String cls, @NonNull Function<ClassElement, T> processor) {
-        List<T> elements = []
-        KotlinCompiler.compileJava(className, cls,  {
-            if (it.name == className) {
-                elements.add(processor.apply(it))
-            }
-        })
-        return elements.first()
-    }
-
     /**
      * Builds a class element for the given source code.
      * @param cls The source
diff --git a/inject-kotlin-test/src/main/groovy/io/micronaut/annotation/processing/test/KotlinCompiler.java b/inject-kotlin-test/src/main/groovy/io/micronaut/annotation/processing/test/KotlinCompiler.java
index bfc7f1f1f1..aed2968f33 100644
--- a/inject-kotlin-test/src/main/groovy/io/micronaut/annotation/processing/test/KotlinCompiler.java
+++ b/inject-kotlin-test/src/main/groovy/io/micronaut/annotation/processing/test/KotlinCompiler.java
@@ -78,6 +78,7 @@ public class KotlinCompiler {
         KOTLIN_COMPILATION.setJvmDefault("all");
         KOTLIN_COMPILATION.setInheritClassPath(true);
 
+        KSP_COMPILATION.setJavacArguments(Collections.singletonList("-Xopt-in=kotlin.RequiresOptIn"));
         KSP_COMPILATION.setInheritClassPath(true);
         KSP_COMPILATION.setClasspaths(Arrays.asList(
             new File(KSP_COMPILATION.getWorkingDir(), "ksp/classes"),
@@ -149,29 +150,6 @@ public class KotlinCompiler {
         return new Pair<>(new Pair<>(KOTLIN_COMPILATION, result), new Pair<>(KSP_COMPILATION, kspResult));
     }
 
-    public static Pair<Pair<KotlinCompilation, KotlinCompilation.Result>, Pair<KotlinCompilation, KotlinCompilation.Result>> compileJava(String name, @Language("java") String clazz, Consumer<ClassElement> classElements) {
-        try {
-            Files.deleteIfExists(KOTLIN_COMPILATION.getWorkingDir().toPath());
-        } catch (IOException e) {
-            // ignore
-        }
-        KOTLIN_COMPILATION.setSources(Collections.singletonList(SourceFile.Companion.java(name + ".java", clazz, true)));
-        KotlinCompilation.Result result = KOTLIN_COMPILATION.compile();
-        if (result.getExitCode() != KotlinCompilation.ExitCode.OK) {
-            throw new RuntimeException(result.getMessages());
-        }
-
-        KSP_COMPILATION.setSources(KOTLIN_COMPILATION.getSources());
-        ClassElementTypeElementSymbolProcessorProvider classElementTypeElementSymbolProcessorProvider = new ClassElementTypeElementSymbolProcessorProvider(classElements);
-        KspKt.setSymbolProcessorProviders(KSP_COMPILATION, Arrays.asList(classElementTypeElementSymbolProcessorProvider, new BeanDefinitionProcessorProvider()));
-        KotlinCompilation.Result kspResult = KSP_COMPILATION.compile();
-        if (kspResult.getExitCode() != KotlinCompilation.ExitCode.OK) {
-            throw new RuntimeException(kspResult.getMessages());
-        }
-
-        return new Pair<>(new Pair<>(KOTLIN_COMPILATION, result), new Pair<>(KSP_COMPILATION, kspResult));
-    }
-
     public static BeanIntrospection<?> buildBeanIntrospection(String name, @Language("kotlin") String clazz) {
         final URLClassLoader classLoader = buildClassLoader(name, clazz);
         try {
@@ -260,12 +238,14 @@ public class KotlinCompiler {
         return buildContext(clazz, false);
     }
 
-    public static ApplicationContext buildContext(@Language("kotlin") String clazz, boolean includeAllBeans) {
+    public static ApplicationContext
+    buildContext(@Language("kotlin") String clazz, boolean includeAllBeans) {
         return buildContext(clazz, includeAllBeans, Collections.emptyMap());
     }
 
     @SuppressWarnings("java:S2095")
-    public static ApplicationContext buildContext(@Language("kotlin") String clazz, boolean includeAllBeans, Map<String, Object> config) {
+    public static ApplicationContext
+    buildContext(@Language("kotlin") String clazz, boolean includeAllBeans, Map<String, Object> config) {
         Pair<Pair<KotlinCompilation, KotlinCompilation.Result>, Pair<KotlinCompilation, KotlinCompilation.Result>> pair = compile("temp", clazz, classElement -> {
         });
         ClassLoader classLoader = toClassLoader(pair);
diff --git a/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/KotlinNativeElementsHelper.kt b/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/KotlinNativeElementsHelper.kt
index e8bf16e42d..40451e592c 100644
--- a/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/KotlinNativeElementsHelper.kt
+++ b/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/KotlinNativeElementsHelper.kt
@@ -98,10 +98,7 @@ internal class KotlinNativeElementsHelper(private val resolver: Resolver) : Nati
         return t == builtIns.anyType ||
                 t == builtIns.nothingType ||
                 t == builtIns.unitType ||
-                (classNode.qualifiedName != null && (
-                        classNode.qualifiedName!!.asString() == Enum::class.java.name ||
-                                classNode.qualifiedName!!.asString() == Record::class.java.name
-                        ))
+                classNode.qualifiedName.toString() == Enum::class.java.name
     }
 
     override fun isInterface(classNode: KSClassDeclaration): Boolean {
diff --git a/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/visitor/AbstractKotlinElement.kt b/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/visitor/AbstractKotlinElement.kt
index 67c59f5939..89071d6a89 100644
--- a/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/visitor/AbstractKotlinElement.kt
+++ b/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/visitor/AbstractKotlinElement.kt
@@ -30,7 +30,6 @@ import com.google.devtools.ksp.symbol.KSType
 import com.google.devtools.ksp.symbol.KSTypeArgument
 import com.google.devtools.ksp.symbol.KSTypeParameter
 import com.google.devtools.ksp.symbol.Modifier
-import com.google.devtools.ksp.symbol.Nullability
 import com.google.devtools.ksp.symbol.Variance
 import com.google.devtools.ksp.symbol.Visibility
 import io.micronaut.aop.Around
@@ -539,7 +538,7 @@ internal abstract class AbstractKotlinElement<T : KotlinNativeElement>(
             }
             val canBePrimitive =
                 type == null || type.annotations.toList().isEmpty() && !type.isMarkedNullable
-            if (allowPrimitive && canBePrimitive && type?.nullability != Nullability.PLATFORM) {
+            if (allowPrimitive && canBePrimitive) {
                 val element = primitives[qualifiedNameString]
                 if (element != null) {
                     return element
diff --git a/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/visitor/KotlinClassElement.kt b/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/visitor/KotlinClassElement.kt
index 743a4d0eec..53c75460e0 100644
--- a/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/visitor/KotlinClassElement.kt
+++ b/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/visitor/KotlinClassElement.kt
@@ -433,13 +433,10 @@ internal open class KotlinClassElement(
                     }
                 }
         }
-        val propertyNames = allProperties.map { it.name }.toMutableSet()
+        val propertyNames = allProperties.map { it.name }.toSet()
+
         val resolvedProperties: MutableList<PropertyElement> = mutableListOf()
         val methods = ArrayList(getEnclosedElements(ElementQuery.ALL_METHODS))
-        if (isJavaRecord(nativeType.declaration)) {
-            propertyElementQuery.readPrefixes("")
-            propertyElementQuery.writePrefixes(emptyArray())
-        }
         allProperties.forEach { prop ->
             methods.removeIf { m ->
                 prop.name == NameUtils.getPropertyNameForGetter(
@@ -459,8 +456,7 @@ internal open class KotlinClassElement(
             {
                 emptyList()
             },
-            false,
-            propertyNames,
+            false, propertyNames,
             customReaderPropertyNameResolver,
             customWriterPropertyNameResolver,
             { value: AstBeanPropertiesUtils.BeanPropertyData ->
@@ -796,23 +792,16 @@ internal open class KotlinClassElement(
                 }
 
                 MethodElement::class.java -> {
-                    val functions = if (isJavaRecord(classNode)) {
-                        classNode.getAllFunctions().filter {
-                            !listOf(
-                                "hashCode",
-                                "toString",
-                                "equals"
-                            ).contains(it.simpleName.asString())
-                        }
-                    } else {
-                        classNode.getDeclaredFunctions()
-                    }
-
-                    functions
+                    classNode.getDeclaredFunctions()
                         .filter { func: KSFunctionDeclaration ->
                             !func.isConstructor() &&
                                     func.origin != Origin.SYNTHETIC &&
-                                    (includeAbstract || !func.isAbstract || !classNode.isAbstract())
+                                    // this is a hack but no other way it seems
+                                    !listOf(
+                                        "hashCode",
+                                        "toString",
+                                        "equals"
+                                    ).contains(func.simpleName.asString()) && (includeAbstract || !func.isAbstract || !classNode.isAbstract())
                         }
                         .toList()
                 }
@@ -852,10 +841,7 @@ internal open class KotlinClassElement(
             return t == builtIns.anyType ||
                     t == builtIns.nothingType ||
                     t == builtIns.unitType ||
-                    (classNode.qualifiedName != null && (
-                            classNode.qualifiedName!!.asString() == Enum::class.java.name ||
-                                    classNode.qualifiedName!!.asString() == Record::class.java.name
-                            ))
+                    classNode.qualifiedName.toString() == Enum::class.java.name
         }
 
         override fun isAbstractClass(classNode: KSClassDeclaration) = classNode.isAbstract()
@@ -920,8 +906,5 @@ internal open class KotlinClassElement(
         }
     }
 
-    private fun isJavaRecord(classNode: KSClassDeclaration) =
-        classNode.origin == Origin.JAVA && classNode.superTypes.filter { Record::class.java.name == it.resolve().declaration.qualifiedName?.asString() }
-            .any()
 
 }
diff --git a/inject-kotlin/src/test/groovy/io/micronaut/kotlin/processing/inject/ast/ClassElementSpec.groovy b/inject-kotlin/src/test/groovy/io/micronaut/kotlin/processing/inject/ast/ClassElementSpec.groovy
index 56d7d0981d..e8cdd2fdee 100644
--- a/inject-kotlin/src/test/groovy/io/micronaut/kotlin/processing/inject/ast/ClassElementSpec.groovy
+++ b/inject-kotlin/src/test/groovy/io/micronaut/kotlin/processing/inject/ast/ClassElementSpec.groovy
@@ -28,62 +28,6 @@ import spock.lang.PendingFeature
 
 class ClassElementSpec extends AbstractKotlinCompilerSpec {
 
-    void "test Java Record compile"() {
-        def ce  = buildClassElementJava('test.Product2', '''
-package test;
-
-record Product2(Double price, String name) {
-}
-''')
-        def methods = ce.getMethods()
-        def properties = ce.getBeanProperties()
-        expect:
-            methods.size() == 2
-            methods.get(0).name == "price"
-            !methods.get(0).getReturnType().isPrimitive()
-            methods.get(1).name == "name"
-            properties.size() == 2
-            properties.get(0).name == "price"
-            !properties.get(0).getType().isPrimitive()
-            properties.get(1).name == "name"
-    }
-
-    void "test Java Bean compile"() {
-        def ce  = buildClassElementJava('test.Product', '''
-package test;
-
-class Product {
-
-    public Product(Double price, String name) {
-        this.price = price;
-        this.name = name;
-    }
-
-    private final Double price;
-    private final String name;
-
-    public Double getPrice() {
-        return price;
-    }
-
-    public String getName() {
-        return name;
-    }
-}
-''')
-        def methods = ce.getMethods()
-        def properties = ce.getBeanProperties()
-        expect:
-            methods.size() == 2
-            methods.get(0).name == "getPrice"
-            !methods.get(0).getReturnType().isPrimitive()
-            methods.get(1).name == "getName"
-            properties.size() == 2
-            properties.get(0).name == "price"
-            !properties.get(0).getType().isPrimitive()
-            properties.get(1).name == "name"
-    }
-
     void "test visit enum"() {
 
         given:
