diff --git a/kotlin/reflect/src/main/java/com/squareup/moshi/kotlin/reflect/KotlinJsonAdapter.kt b/kotlin/reflect/src/main/java/com/squareup/moshi/kotlin/reflect/KotlinJsonAdapter.kt
index 02744cb1..0db237e8 100644
--- a/kotlin/reflect/src/main/java/com/squareup/moshi/kotlin/reflect/KotlinJsonAdapter.kt
+++ b/kotlin/reflect/src/main/java/com/squareup/moshi/kotlin/reflect/KotlinJsonAdapter.kt
@@ -27,7 +27,6 @@ import com.squareup.moshi.internal.Util.resolve
 import com.squareup.moshi.rawType
 import java.lang.reflect.Modifier
 import java.lang.reflect.Type
-import java.util.AbstractMap.SimpleEntry
 import kotlin.reflect.KFunction
 import kotlin.reflect.KMutableProperty1
 import kotlin.reflect.KParameter
diff --git a/moshi/src/main/java/com/squareup/moshi/JsonUtf8Writer.java b/moshi/src/main/java/com/squareup/moshi/JsonUtf8Writer.java
index 5cee11f5..8cc783fd 100644
--- a/moshi/src/main/java/com/squareup/moshi/JsonUtf8Writer.java
+++ b/moshi/src/main/java/com/squareup/moshi/JsonUtf8Writer.java
@@ -49,7 +49,7 @@ final class JsonUtf8Writer extends JsonWriter {
   static {
     REPLACEMENT_CHARS = new String[128];
     for (int i = 0; i <= 0x1f; i++) {
-      REPLACEMENT_CHARS[i] = String.format("\\u%04x", (int) i);
+      REPLACEMENT_CHARS[i] = String.format("\\u%04x", i);
     }
     REPLACEMENT_CHARS['"'] = "\\\"";
     REPLACEMENT_CHARS['\\'] = "\\\\";
diff --git a/moshi/src/main/java/com/squareup/moshi/LinkedHashTreeMap.java b/moshi/src/main/java/com/squareup/moshi/LinkedHashTreeMap.java
index a3c0a204..ffce2d4e 100644
--- a/moshi/src/main/java/com/squareup/moshi/LinkedHashTreeMap.java
+++ b/moshi/src/main/java/com/squareup/moshi/LinkedHashTreeMap.java
@@ -43,7 +43,7 @@ final class LinkedHashTreeMap<K, V> extends AbstractMap<K, V> implements Seriali
         }
       };
 
-  Comparator<? super K> comparator;
+  final Comparator<? super K> comparator;
   Node<K, V>[] table;
   final Node<K, V> header;
   int size = 0;
@@ -346,13 +346,11 @@ final class LinkedHashTreeMap<K, V> extends AbstractMap<K, V> implements Seriali
         int rightLeftHeight = rightLeft != null ? rightLeft.height : 0;
 
         int rightDelta = rightLeftHeight - rightRightHeight;
-        if (rightDelta == -1 || (rightDelta == 0 && !insert)) {
-          rotateLeft(node); // AVL right right
-        } else {
+        if (rightDelta != -1 && (rightDelta != 0 || insert)) {
           assert (rightDelta == 1);
           rotateRight(right); // AVL right left
-          rotateLeft(node);
         }
+        rotateLeft(node); // AVL right right
         if (insert) {
           break; // no further rotations will be necessary
         }
@@ -364,13 +362,11 @@ final class LinkedHashTreeMap<K, V> extends AbstractMap<K, V> implements Seriali
         int leftLeftHeight = leftLeft != null ? leftLeft.height : 0;
 
         int leftDelta = leftLeftHeight - leftRightHeight;
-        if (leftDelta == 1 || (leftDelta == 0 && !insert)) {
-          rotateRight(node); // AVL left left
-        } else {
+        if (leftDelta != 1 && (leftDelta != 0 || insert)) {
           assert (leftDelta == -1);
           rotateLeft(left); // AVL left right
-          rotateRight(node);
         }
+        rotateRight(node); // AVL left left
         if (insert) {
           break; // no further rotations will be necessary
         }
diff --git a/moshi/src/main/java/com/squareup/moshi/Moshi.java b/moshi/src/main/java/com/squareup/moshi/Moshi.java
index 9f19fb6d..6a480f21 100644
--- a/moshi/src/main/java/com/squareup/moshi/Moshi.java
+++ b/moshi/src/main/java/com/squareup/moshi/Moshi.java
@@ -184,7 +184,7 @@ public final class Moshi {
   @CheckReturnValue
   public Moshi.Builder newBuilder() {
     Builder result = new Builder();
-    for (int i = 0, limit = lastOffset; i < limit; i++) {
+    for (int i = 0; i < lastOffset; i++) {
       result.add(factories.get(i));
     }
     for (int i = lastOffset, limit = factories.size() - BUILT_IN_FACTORIES.size(); i < limit; i++) {
