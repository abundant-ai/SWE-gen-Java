diff --git a/.github/workflows/gradle.yml b/.github/workflows/gradle.yml
index 82d258ec57..e72393c34f 100644
--- a/.github/workflows/gradle.yml
+++ b/.github/workflows/gradle.yml
@@ -45,7 +45,7 @@ jobs:
           fetch-depth: 0
 
       - name: "ðŸ”§ Setup GraalVM CE"
-        uses: graalvm/setup-graalvm@v1.2.5
+        uses: graalvm/setup-graalvm@v1.2.6
         with:
           distribution: 'graalvm'
           java-version: ${{ matrix.java }}
diff --git a/.github/workflows/release.yml b/.github/workflows/release.yml
index 2dda058489..f0b8ad78a0 100644
--- a/.github/workflows/release.yml
+++ b/.github/workflows/release.yml
@@ -160,6 +160,6 @@ jobs:
       - name: Upload assets
         # Upload the artifacts to the existing release. Note that the SLSA provenance will
         # attest to each artifact file and not the aggregated ZIP file.
-        uses: softprops/action-gh-release@e7a8f85e1c67a31e6ed99a94b41bd0b71bbee6b8 # v2.0.9
+        uses: softprops/action-gh-release@01570a1f39cb168c169c802c3bceb9e93fb10974 # v2.1.0
         with:
           files: artifacts.zip
diff --git a/context/src/main/java/io/micronaut/runtime/beans/MapperIntroduction.java b/context/src/main/java/io/micronaut/runtime/beans/MapperIntroduction.java
index 1ceade13df..e92a89ba76 100644
--- a/context/src/main/java/io/micronaut/runtime/beans/MapperIntroduction.java
+++ b/context/src/main/java/io/micronaut/runtime/beans/MapperIntroduction.java
@@ -563,7 +563,7 @@ final class MapperIntroduction implements MethodInterceptor<Object, Object> {
         @NonNull Argument<?>[] getBuilderArguments();
 
         /**
-         * Get the argument index based on its name.
+         * Get the argument index based on its name
          *
          * @param name The argument name
          * @return The index
diff --git a/core-processor/src/main/java/io/micronaut/inject/beans/visitor/BeanIntrospectionWriter.java b/core-processor/src/main/java/io/micronaut/inject/beans/visitor/BeanIntrospectionWriter.java
index 73190e38fa..6dedd1354a 100644
--- a/core-processor/src/main/java/io/micronaut/inject/beans/visitor/BeanIntrospectionWriter.java
+++ b/core-processor/src/main/java/io/micronaut/inject/beans/visitor/BeanIntrospectionWriter.java
@@ -722,7 +722,8 @@ final class BeanIntrospectionWriter extends AbstractClassFileWriter {
         dispatchWriter.buildGetTargetMethodByIndex(classWriter);
         buildFindIndexedProperty(classWriter);
         buildGetIndexedProperties(classWriter);
-        boolean hasBuilder = annotationMetadata != null && annotationMetadata.isPresent(Introspected.class, "builder");
+        boolean hasBuilder = annotationMetadata != null &&
+            (annotationMetadata.isPresent(Introspected.class, "builder") || annotationMetadata.hasDeclaredAnnotation("lombok.Builder"));
         if (defaultConstructor != null) {
             writeInstantiateMethod(classWriter, defaultConstructor, "instantiate");
             // in case invoked directly or via instantiateUnsafe
diff --git a/core-processor/src/main/java/io/micronaut/inject/beans/visitor/IntrospectedTypeElementVisitor.java b/core-processor/src/main/java/io/micronaut/inject/beans/visitor/IntrospectedTypeElementVisitor.java
index 44407f9be0..a7a0ff06c9 100644
--- a/core-processor/src/main/java/io/micronaut/inject/beans/visitor/IntrospectedTypeElementVisitor.java
+++ b/core-processor/src/main/java/io/micronaut/inject/beans/visitor/IntrospectedTypeElementVisitor.java
@@ -67,6 +67,7 @@ public class IntrospectedTypeElementVisitor implements TypeElementVisitor<Object
      * The position of the visitor.
      */
     public static final int POSITION = -100;
+    private static final String ANN_LOMBOK_BUILDER = "lombok.Builder";
 
     private final Map<String, BeanIntrospectionWriter> writers = new LinkedHashMap<>(10);
 
@@ -180,62 +181,101 @@ public class IntrospectedTypeElementVisitor implements TypeElementVisitor<Object
             AnnotationClassValue<?> builderClass = builder.annotationClassValue("builderClass").orElse(null);
             String[] writePrefixes = builder.getAnnotation("accessorStyle", AccessorsStyle.class)
                 .map(a -> a.stringValues("writePrefixes")).orElse(new String[]{""});
-            if (builderMethod != null) {
-                MethodElement methodElement = element
-                    .getEnclosedElement(ElementQuery.ALL_METHODS.onlyStatic()
-                        .filter(m -> m.getName().equals(builderMethod) && !m.getGenericReturnType().isVoid())
-                        .onlyAccessible(element))
-                    .orElse(null);
-                if (methodElement != null) {
-                    ClassElement returnType = methodElement.getGenericReturnType();
-                    if (returnType.isPublic() || returnType.getPackageName().equals(element.getPackageName())) {
-                        AnnotationValueBuilder<Introspected> replaceIntrospected = AnnotationValue.builder(introspected, RetentionPolicy.RUNTIME);
-                        replaceIntrospected.member("builderClass", new AnnotationClassValue<>(returnType.getName()));
-                        element.annotate(replaceIntrospected.build());
-                        AnnotationMetadata methodMetadata = methodElement.getMethodAnnotationMetadata().getTargetAnnotationMetadata();
-
-                        handleBuilder(
-                            element,
-                            context,
-                            creatorMethod,
-                            writePrefixes,
-                            methodElement,
-                            null,
-                            returnType,
-                            methodMetadata,
-                            index,
-                            targetPackage
-                        );
-                    } else {
-                        context.fail("Builder return type is not public. The method must be static and accessible.", methodElement);
-                    }
-                } else {
-                    context.fail("Method specified by builderMethod not found. The method must be static and accessible.", element);
-                }
-            } else if (builderClass != null) {
-                ClassElement builderClassElement = context.getClassElement(builderClass.getName()).orElse(null);
-                if (builderClassElement != null) {
+            processBuilderDefinition(
+                element,
+                context,
+                introspected,
+                index,
+                targetPackage,
+                builderMethod,
+                creatorMethod,
+                writePrefixes,
+                builderClass
+            );
+        } else if (element.hasDeclaredAnnotation(ANN_LOMBOK_BUILDER)) {
+            AnnotationValue<Annotation> lombokBuilder = element.getAnnotation(ANN_LOMBOK_BUILDER);
+            String builderMethod = lombokBuilder.stringValue("builderMethodName").orElse("builder");
+            MethodElement methodElement = element
+                .getEnclosedElement(ElementQuery.ALL_METHODS.onlyStatic()
+                    .filter(m -> m.getName().equals(builderMethod) && !m.getGenericReturnType().isVoid())
+                    .onlyAccessible(element))
+                .orElse(null);
+            if (methodElement == null) {
+                // Lombok processing not done yet, try again in the next round.
+                throw new ElementPostponedToNextRoundException(element);
+            }
+            String creatorMethod = lombokBuilder.stringValue("buildMethodName").orElse("build");
+            String[] writePrefixes = lombokBuilder.stringValue("setterPrefix").map(sp -> new String[] { sp }).orElse(new String[]{""});
+            processBuilderDefinition(
+                element,
+                context,
+                introspected,
+                index,
+                targetPackage,
+                builderMethod,
+                creatorMethod,
+                writePrefixes,
+                null
+            );
+        }
+    }
+
+    private void processBuilderDefinition(ClassElement element, VisitorContext context, AnnotationValue<Introspected> introspected, int index, String targetPackage, String builderMethod, String creatorMethod, String[] writePrefixes, AnnotationClassValue<?> builderClass) {
+        if (builderMethod != null) {
+            MethodElement methodElement = element
+                .getEnclosedElement(ElementQuery.ALL_METHODS.onlyStatic()
+                    .filter(m -> m.getName().equals(builderMethod) && !m.getGenericReturnType().isVoid())
+                    .onlyAccessible(element))
+                .orElse(null);
+            if (methodElement != null) {
+                ClassElement returnType = methodElement.getGenericReturnType();
+                if (returnType.isPublic() || returnType.getPackageName().equals(element.getPackageName())) {
                     AnnotationValueBuilder<Introspected> replaceIntrospected = AnnotationValue.builder(introspected, RetentionPolicy.RUNTIME);
-                    replaceIntrospected.member("builderClass", new AnnotationClassValue<>(builderClassElement.getName()));
+                    replaceIntrospected.member("builderClass", new AnnotationClassValue<>(returnType.getName()));
                     element.annotate(replaceIntrospected.build());
+                    AnnotationMetadata methodMetadata = methodElement.getMethodAnnotationMetadata().getTargetAnnotationMetadata();
 
                     handleBuilder(
                         element,
                         context,
                         creatorMethod,
                         writePrefixes,
-                        builderClassElement.getPrimaryConstructor().orElse(null),
-                        builderClassElement.getDefaultConstructor().orElse(null),
-                        builderClassElement,
-                        builderClassElement.getTargetAnnotationMetadata(),
+                        methodElement,
+                        null,
+                        returnType,
+                        methodMetadata,
                         index,
-                        targetPackage);
+                        targetPackage
+                    );
                 } else {
-                    context.fail("Builder class not found on compilation classpath: " + builderClass.getName(), element);
+                    context.fail("Builder return type is not public. The method must be static and accessible.", methodElement);
                 }
             } else {
-                context.fail("When specifying the 'builder' member of @Introspected you must supply either a builderClass or builderMethod", element);
+                context.fail("Method " + builderMethod + "() specified by builderMethod not found. The method must be static and accessible.", element);
             }
+        } else if (builderClass != null) {
+            ClassElement builderClassElement = context.getClassElement(builderClass.getName()).orElse(null);
+            if (builderClassElement != null) {
+                AnnotationValueBuilder<Introspected> replaceIntrospected = AnnotationValue.builder(introspected, RetentionPolicy.RUNTIME);
+                replaceIntrospected.member("builderClass", new AnnotationClassValue<>(builderClassElement.getName()));
+                element.annotate(replaceIntrospected.build());
+
+                handleBuilder(
+                    element,
+                    context,
+                    creatorMethod,
+                    writePrefixes,
+                    builderClassElement.getPrimaryConstructor().orElse(null),
+                    builderClassElement.getDefaultConstructor().orElse(null),
+                    builderClassElement,
+                    builderClassElement.getTargetAnnotationMetadata(),
+                    index,
+                    targetPackage);
+            } else {
+                context.fail("Builder class not found on compilation classpath: " + builderClass.getName(), element);
+            }
+        } else {
+            context.fail("When specifying the 'builder' member of @Introspected you must supply either a builderClass or builderMethod", element);
         }
     }
 
@@ -380,13 +420,18 @@ public class IntrospectedTypeElementVisitor implements TypeElementVisitor<Object
         List<PropertyElement> beanProperties = ce.getBeanProperties(propertyElementQuery).stream()
             .filter(p -> !p.isExcluded())
             .toList();
-        Optional<MethodElement> constructorElement = ce.getPrimaryConstructor();
-        constructorElement.ifPresent(constructorEl -> {
-            if (ArrayUtils.isNotEmpty(constructorEl.getParameters())) {
-                writer.visitConstructor(constructorEl);
-            }
-        });
-        ce.getDefaultConstructor().ifPresent(writer::visitDefaultConstructor);
+        // unfortunately sometimes we don't see the Lombok transformations
+        // so assume if the class is annotated with Lombok builder we cannot
+        // access the constructor.
+        if (!ce.hasDeclaredAnnotation(ANN_LOMBOK_BUILDER)) {
+            Optional<MethodElement> constructorElement = ce.getPrimaryConstructor();
+            constructorElement.ifPresent(constructorEl -> {
+                if (ArrayUtils.isNotEmpty(constructorEl.getParameters())) {
+                    writer.visitConstructor(constructorEl);
+                }
+            });
+            ce.getDefaultConstructor().ifPresent(writer::visitDefaultConstructor);
+        }
 
         for (PropertyElement beanProperty : beanProperties) {
             if (beanProperty.isExcluded()) {
diff --git a/core-processor/src/main/java/io/micronaut/inject/configuration/ConfigurationMetadataBuilder.java b/core-processor/src/main/java/io/micronaut/inject/configuration/ConfigurationMetadataBuilder.java
index 477052f47a..b98fa99aec 100644
--- a/core-processor/src/main/java/io/micronaut/inject/configuration/ConfigurationMetadataBuilder.java
+++ b/core-processor/src/main/java/io/micronaut/inject/configuration/ConfigurationMetadataBuilder.java
@@ -176,13 +176,7 @@ public class ConfigurationMetadataBuilder {
         PropertyMetadata metadata = new PropertyMetadata();
         metadata.declaringType = declaringType.getName();
         metadata.name = name;
-        metadata.path = propertyType.stringValue(ConfigurationReader.class, ConfigurationReader.PREFIX)
-            .orElseGet(() -> NameUtils.hyphenate(buildPropertyPath(owningType, declaringType, name), true));
-        if (propertyType.hasStereotype(ConfigurationReader.class)) {
-            metadata.path = ConfigurationUtils.getRequiredTypePath(propertyType);
-        } else {
-            metadata.path = NameUtils.hyphenate(buildPropertyPath(owningType, declaringType, name), true);
-        }
+        metadata.path = NameUtils.hyphenate(buildPropertyPath(owningType, declaringType, name), true);
         metadata.type = propertyType.getType().getName();
         metadata.description = description;
         metadata.defaultValue = defaultValue;
@@ -198,7 +192,7 @@ public class ConfigurationMetadataBuilder {
      */
     @SuppressWarnings("MagicNumber")
     static String quote(String string) {
-        if (string == null || string.isEmpty()) {
+        if (string == null || string.length() == 0) {
             return "\"\"";
         }
 
diff --git a/core-processor/src/main/java/io/micronaut/inject/processing/DeclaredBeanElementCreator.java b/core-processor/src/main/java/io/micronaut/inject/processing/DeclaredBeanElementCreator.java
index d1594ec840..64647a95ff 100644
--- a/core-processor/src/main/java/io/micronaut/inject/processing/DeclaredBeanElementCreator.java
+++ b/core-processor/src/main/java/io/micronaut/inject/processing/DeclaredBeanElementCreator.java
@@ -158,15 +158,13 @@ class DeclaredBeanElementCreator extends AbstractBeanElementCreator {
         if (processAsProperties()) {
             memberQuery = memberQuery.excludePropertyElements();
             for (PropertyElement propertyElement : classElement.getBeanProperties()) {
-                if (visitPropertyInternal(visitor, propertyElement)) {
-                    propertyElement.getField().ifPresent(processedFields::add);
-                }
+                propertyElement.getField().ifPresent(processedFields::add);
+                visitPropertyInternal(visitor, propertyElement);
             }
         } else {
             for (PropertyElement propertyElement : classElement.getSyntheticBeanProperties()) {
-                if (visitPropertyInternal(visitor, propertyElement)) {
-                    propertyElement.getField().ifPresent(processedFields::add);
-                }
+                propertyElement.getField().ifPresent(processedFields::add);
+                visitPropertyInternal(visitor, propertyElement);
             }
         }
         List<MemberElement> memberElements = new ArrayList<>(classElement.getEnclosedElements(memberQuery));
@@ -197,14 +195,13 @@ class DeclaredBeanElementCreator extends AbstractBeanElementCreator {
         }
     }
 
-    private boolean visitPropertyInternal(BeanDefinitionVisitor visitor, PropertyElement propertyElement) {
+    private void visitPropertyInternal(BeanDefinitionVisitor visitor, PropertyElement propertyElement) {
         boolean claimed = visitProperty(visitor, propertyElement);
         if (claimed) {
             propertyElement.getReadMethod().ifPresent(element -> addOriginatingElementIfNecessary(visitor, element));
             propertyElement.getWriteMethod().ifPresent(element -> addOriginatingElementIfNecessary(visitor, element));
             propertyElement.getField().ifPresent(element -> addOriginatingElementIfNecessary(visitor, element));
         }
-        return claimed;
     }
 
     /**
diff --git a/core/src/main/java/io/micronaut/core/io/service/MicronautMetaServiceLoaderUtils.java b/core/src/main/java/io/micronaut/core/io/service/MicronautMetaServiceLoaderUtils.java
index 02cfe645fa..5265c96c94 100644
--- a/core/src/main/java/io/micronaut/core/io/service/MicronautMetaServiceLoaderUtils.java
+++ b/core/src/main/java/io/micronaut/core/io/service/MicronautMetaServiceLoaderUtils.java
@@ -257,7 +257,7 @@ public final class MicronautMetaServiceLoaderUtils {
                 List<S> collection = new ArrayList<>(serviceEntries.size());
                 for (String serviceEntry : serviceEntries) {
                     S val = instantiate(serviceEntry, classLoader);
-                    if (val != null && predicate != null && !predicate.test(val)) {
+                    if (val != null && (predicate == null || predicate.test(val))) {
                         collection.add(val);
                     }
                 }
@@ -309,7 +309,7 @@ public final class MicronautMetaServiceLoaderUtils {
             if (throwable != null) {
                 throw new SoftServiceLoader.ServiceLoadingException("Failed to load a service: " + throwable.getMessage(), throwable);
             }
-            if (result != null && !values.contains(result)) {
+            if (result != null) {
                 values.add(result);
             }
         }
diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
index 9abeb318f2..623e58db2f 100644
--- a/gradle/libs.versions.toml
+++ b/gradle/libs.versions.toml
@@ -2,7 +2,7 @@
 asm = "9.7.1"
 awaitility = "4.2.2"
 bcpkix = "1.70"
-blaze = "1.6.13"
+blaze = "1.6.14"
 brotli4j = "1.16.0"
 bytebuddy = "1.15.10"
 caffeine = "2.9.3"
@@ -11,7 +11,7 @@ compile-testing = "0.21.0"
 
 geb = "7.0"
 # be sure to update graal version in gradle.properties as well
-graal-svm = "23.1.4"
+graal-svm = "23.1.5"
 h2 = "2.2.224"
 hibernate = "5.5.9.Final"
 htmlunit = "2.70.0"
@@ -30,13 +30,13 @@ jsr107 = "1.1.1"
 jsr305 = "3.0.2"
 jakarta-el = "5.0.1"
 jakarta-el-impl = "5.0.0-M1"
-japicmp-gradle-plugin="0.4.4"
+japicmp-gradle-plugin="0.4.5"
 jazzer = "0.22.1"
 jcache = "1.1.1"
 junit5 = "5.10.3"
 junit-platform="1.10.3"
 logback = "1.5.12"
-lombok = "1.18.34"
+lombok = "1.18.36"
 logbook-netty = "3.7.0"
 log4j = "2.23.1"
 micronaut-aws = "4.7.1"
@@ -59,9 +59,9 @@ smallrye = "6.4.1"
 spock = "2.3-groovy-4.0"
 spotbugs = "4.7.1"
 systemlambda = "1.2.1"
-testcontainers = "1.20.2"
+testcontainers = "1.20.4"
 tomlj="1.1.1"
-vertx = "4.5.10"
+vertx = "4.5.11"
 wiremock = "2.33.2"
 mimepull = "1.10.0"
 
@@ -69,7 +69,7 @@ mimepull = "1.10.0"
 # Versions which start with managed- are managed by Micronaut in the sense
 # that they will appear in the Micronaut BOM as <properties>
 #
-managed-groovy = "4.0.23"
+managed-groovy = "4.0.24"
 managed-jakarta-annotation-api = "2.1.1"
 managed-jackson = "2.17.2"
 #@NextMajorVersion @Deprecated Delete in Micronaut Framework 5.
@@ -77,7 +77,7 @@ managed-jackson-databind = "2.17.0"
 managed-kotlin = "1.9.25"
 managed-kotlin-coroutines = "1.8.1"
 managed-methvin-directory-watcher = "0.18.0"
-managed-netty = "4.1.114.Final"
+managed-netty = "4.1.115.Final"
 managed-netty-iouring = "0.0.25.Final"
 managed-netty-http3 = "0.0.28.Final"
 managed-netty-tcnative = "2.0.69.Final"
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index df97d72b8b..e2847c8200 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-8.10.2-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-8.11.1-bin.zip
 networkTimeout=10000
 validateDistributionUrl=true
 zipStoreBase=GRADLE_USER_HOME
diff --git a/http-client-core/src/main/java/io/micronaut/http/client/exceptions/HttpClientResponseException.java b/http-client-core/src/main/java/io/micronaut/http/client/exceptions/HttpClientResponseException.java
index 12a1f3678e..009749735f 100644
--- a/http-client-core/src/main/java/io/micronaut/http/client/exceptions/HttpClientResponseException.java
+++ b/http-client-core/src/main/java/io/micronaut/http/client/exceptions/HttpClientResponseException.java
@@ -83,11 +83,26 @@ public class HttpClientResponseException extends HttpClientException implements
 
     /**
      * @return The {@link io.micronaut.http.HttpStatus} returned
+     * To support custom status codes. Use {@link #code()} instead of {@link #getStatus()} and {@link HttpStatus#getCode()}  and {@link #reason()} instead of {@link #getStatus()} and {@link HttpStatus#getReason()}.
      */
     public HttpStatus getStatus() {
         return getResponse().getStatus();
     }
 
+    /**
+     * @return The response status code
+     */
+    public int code() {
+        return getResponse().code();
+    }
+
+    /**
+     * @return The HTTP status reason phrase
+     */
+    public String reason() {
+        return getResponse().reason();
+    }
+
     @SuppressWarnings("MagicNumber")
     private void initResponse(HttpResponse<?> response) {
         Argument<?> errorType = getErrorType(response);
diff --git a/http-client-jdk/src/main/java/io/micronaut/http/client/jdk/JdkBlockingHttpClient.java b/http-client-jdk/src/main/java/io/micronaut/http/client/jdk/JdkBlockingHttpClient.java
index bc50535258..4f81e60f36 100644
--- a/http-client-jdk/src/main/java/io/micronaut/http/client/jdk/JdkBlockingHttpClient.java
+++ b/http-client-jdk/src/main/java/io/micronaut/http/client/jdk/JdkBlockingHttpClient.java
@@ -34,6 +34,7 @@ import io.micronaut.http.filter.HttpClientFilterResolver;
 import io.micronaut.http.filter.HttpFilterResolver;
 import org.slf4j.LoggerFactory;
 
+import java.io.IOException;
 import java.util.List;
 
 /**
diff --git a/http-client/src/main/java/io/micronaut/http/client/netty/ConnectionManager.java b/http-client/src/main/java/io/micronaut/http/client/netty/ConnectionManager.java
index 0d8ec8bbca..29f4c39faf 100644
--- a/http-client/src/main/java/io/micronaut/http/client/netty/ConnectionManager.java
+++ b/http-client/src/main/java/io/micronaut/http/client/netty/ConnectionManager.java
@@ -300,11 +300,6 @@ public class ConnectionManager {
         return (ByteBufAllocator) bootstrap.config().options().getOrDefault(ChannelOption.ALLOCATOR, ByteBufAllocator.DEFAULT);
     }
 
-    /**
-     * Returns event loop group.
-     *
-     * @return the group
-     */
     EventLoopGroup getGroup() {
         return group;
     }
diff --git a/http-client/src/main/java/io/micronaut/http/client/netty/FullNettyClientHttpResponse.java b/http-client/src/main/java/io/micronaut/http/client/netty/FullNettyClientHttpResponse.java
index d5756b8427..78121bcd09 100644
--- a/http-client/src/main/java/io/micronaut/http/client/netty/FullNettyClientHttpResponse.java
+++ b/http-client/src/main/java/io/micronaut/http/client/netty/FullNettyClientHttpResponse.java
@@ -45,6 +45,7 @@ import java.util.HashMap;
 import java.util.List;
 import java.util.Map;
 import java.util.Optional;
+import java.util.concurrent.ConcurrentHashMap;
 
 /**
  * Wraps a Netty {@link FullHttpResponse} for consumption by the {@link io.micronaut.http.client.HttpClient}.
@@ -63,7 +64,7 @@ public class FullNettyClientHttpResponse<B> implements HttpResponse<B>, NettyHtt
     private final MutableConvertibleValues<Object> attributes;
     private final io.netty.handler.codec.http.HttpResponse nettyHttpResponse;
     private final ByteBuf unpooledContent;
-    private final Map<Argument, Optional> convertedBodies = new HashMap<>();
+    private final Map<Argument, Optional> convertedBodies = new ConcurrentHashMap<>();
     private final MessageBodyHandlerRegistry handlerRegistry;
     private final B body;
     private final ConversionService conversionService;
@@ -76,11 +77,12 @@ public class FullNettyClientHttpResponse<B> implements HttpResponse<B>, NettyHtt
      * @param conversionService      The conversion service
      */
     FullNettyClientHttpResponse(
-            FullHttpResponse fullHttpResponse,
-            MessageBodyHandlerRegistry handlerRegistry,
-            Argument<B> bodyType,
-            boolean convertBody,
-            ConversionService conversionService) {
+        FullHttpResponse fullHttpResponse,
+        MessageBodyHandlerRegistry handlerRegistry,
+        Argument<B> bodyType,
+        boolean convertBody,
+        ConversionService conversionService
+    ) {
         this.conversionService = conversionService;
         this.headers = new NettyHttpHeaders(fullHttpResponse.headers(), conversionService);
         this.attributes = new MutableConvertibleValuesMap<>();
@@ -95,7 +97,7 @@ public class FullNettyClientHttpResponse<B> implements HttpResponse<B>, NettyHtt
             if (HttpResponse.class.isAssignableFrom(bodyType.getType())) {
                 Optional<Argument<?>> responseBodyType = bodyType.getFirstTypeVariable();
                 if (responseBodyType.isPresent()) {
-                    Argument<B> finalResponseBodyType = (Argument<B>) responseBodyType.get();
+                    var finalResponseBodyType = (Argument<B>) responseBodyType.get();
                     this.body = convertBody || isParseableBodyType(finalResponseBodyType.getType()) ? getBody(finalResponseBodyType).orElse(null) : null;
                 } else {
                     this.body = null;
@@ -118,6 +120,7 @@ public class FullNettyClientHttpResponse<B> implements HttpResponse<B>, NettyHtt
         return this.nettyHttpResponse.status().code();
     }
 
+    @NonNull
     @Override
     public HttpHeaders getHeaders() {
         return headers;
@@ -133,18 +136,21 @@ public class FullNettyClientHttpResponse<B> implements HttpResponse<B>, NettyHtt
         return nettyCookies.findCookie(name);
     }
 
+    @NonNull
     @Override
     public MutableConvertibleValues<Object> getAttributes() {
         return attributes;
     }
 
+    @NonNull
     @Override
     public Optional<B> getBody() {
         return Optional.ofNullable(body);
     }
 
+    @NonNull
     @Override
-    public <T> Optional<T> getBody(Class<T> type) {
+    public <T> Optional<T> getBody(@NonNull Class<T> type) {
         if (type == null) {
             return Optional.empty();
         }
@@ -152,8 +158,9 @@ public class FullNettyClientHttpResponse<B> implements HttpResponse<B>, NettyHtt
     }
 
     @SuppressWarnings("unchecked")
+    @NonNull
     @Override
-    public <T> Optional<T> getBody(Argument<T> type) {
+    public <T> Optional<T> getBody(@NonNull Argument<T> type) {
         if (type == null) {
             return Optional.empty();
         }
@@ -171,21 +178,19 @@ public class FullNettyClientHttpResponse<B> implements HttpResponse<B>, NettyHtt
             } catch (RuntimeException e) {
                 if (code() < 400) {
                     throw e;
-                } else {
-                    if (LOG.isDebugEnabled()) {
-                        LOG.debug("Error decoding HTTP error response body: {}", e.getMessage(), e);
-                    }
-                    converted = Optional.empty();
                 }
+                if (LOG.isDebugEnabled()) {
+                    LOG.debug("Error decoding HTTP error response body: {}", e.getMessage(), e);
+                }
+                converted = Optional.empty();
             }
             if (isOptional) {
                 return Optional.of(converted);
             } else {
                 return converted;
             }
-        }
+        });
 
-        );
         if (LOG.isTraceEnabled() && result.isEmpty()) {
             LOG.trace("Unable to convert response body to target type {}", type.getType());
         }
@@ -232,7 +237,7 @@ public class FullNettyClientHttpResponse<B> implements HttpResponse<B>, NettyHtt
     @NonNull
     @Override
     public FullHttpResponse toFullHttpResponse() {
-        DefaultFullHttpResponse copy = new DefaultFullHttpResponse(
+        var copy = new DefaultFullHttpResponse(
             nettyHttpResponse.protocolVersion(),
             nettyHttpResponse.status(),
             unpooledContent,
diff --git a/http-client/src/main/java/io/micronaut/http/client/netty/StreamWriter.java b/http-client/src/main/java/io/micronaut/http/client/netty/StreamWriter.java
index 1e0a8d6abd..01173263f8 100644
--- a/http-client/src/main/java/io/micronaut/http/client/netty/StreamWriter.java
+++ b/http-client/src/main/java/io/micronaut/http/client/netty/StreamWriter.java
@@ -37,10 +37,11 @@ import java.util.function.Consumer;
  */
 @Internal
 final class StreamWriter extends ChannelInboundHandlerAdapter implements ByteBufConsumer {
+    private final StreamingNettyByteBody body;
     private final Consumer<Throwable> errorHandler;
     private ChannelHandlerContext ctx;
     private EventLoopFlow flow;
-    private final Upstream upstream;
+    private Upstream upstream;
     private long unwritten = 0;
     private boolean completed = false;
 
@@ -49,8 +50,8 @@ final class StreamWriter extends ChannelInboundHandlerAdapter implements ByteBuf
      * @param errorHandler Handler to call when the streaming body emits an error
      */
     StreamWriter(StreamingNettyByteBody body, Consumer<Throwable> errorHandler) {
+        this.body = body;
         this.errorHandler = errorHandler;
-        this.upstream = body.primary(this);
     }
 
     /**
@@ -60,6 +61,7 @@ final class StreamWriter extends ChannelInboundHandlerAdapter implements ByteBuf
         if (ctx == null) {
             throw new IllegalStateException("Not added to a channel yet");
         }
+        upstream = body.primary(this);
         try {
             upstream.start();
         } catch (Exception e) {
@@ -71,8 +73,11 @@ final class StreamWriter extends ChannelInboundHandlerAdapter implements ByteBuf
      * Cancel writing the body (e.g. because a {@code CONTINUE} response was never received).
      */
     void cancel() {
-        upstream.allowDiscard();
-        upstream.disregardBackpressure();
+        if (upstream != null) {
+            upstream.allowDiscard();
+            upstream.disregardBackpressure();
+        }
+        body.close();
     }
 
     boolean isCompleted() {
diff --git a/http-client/src/test/groovy/io/micronaut/http/client/docs/httpstatus/HttpStatusSpec.groovy b/http-client/src/test/groovy/io/micronaut/http/client/docs/httpstatus/HttpStatusSpec.groovy
index 6f2b218bc6..97e079665b 100644
--- a/http-client/src/test/groovy/io/micronaut/http/client/docs/httpstatus/HttpStatusSpec.groovy
+++ b/http-client/src/test/groovy/io/micronaut/http/client/docs/httpstatus/HttpStatusSpec.groovy
@@ -91,6 +91,8 @@ class HttpStatusSpec extends Specification {
         HttpClientResponseException e = thrown()
         e.message == "success"
         e.status == HttpStatus.NOT_FOUND
+        HttpStatus.NOT_FOUND.code == e.code()
+        HttpStatus.NOT_FOUND.reason == e.reason()
     }
 
     @Issue("https://github.com/micronaut-projects/micronaut-core/issues/5348")
diff --git a/http-client/src/test/groovy/io/micronaut/http/client/netty/ConnectionManagerSpec.groovy b/http-client/src/test/groovy/io/micronaut/http/client/netty/ConnectionManagerSpec.groovy
index b8a8c0f84a..1c6364193c 100644
--- a/http-client/src/test/groovy/io/micronaut/http/client/netty/ConnectionManagerSpec.groovy
+++ b/http-client/src/test/groovy/io/micronaut/http/client/netty/ConnectionManagerSpec.groovy
@@ -1,6 +1,7 @@
 package io.micronaut.http.client.netty
 
 import io.micronaut.context.ApplicationContext
+import io.micronaut.context.annotation.Requires
 import io.micronaut.context.event.BeanCreatedEvent
 import io.micronaut.context.event.BeanCreatedEventListener
 import io.micronaut.http.HttpRequest
@@ -129,6 +130,7 @@ class ConnectionManagerSpec extends Specification {
     def 'simple http2 get'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -150,6 +152,7 @@ class ConnectionManagerSpec extends Specification {
     def 'http2 streaming get'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -186,7 +189,7 @@ class ConnectionManagerSpec extends Specification {
     }
 
     def 'http1 get with compression'() {
-        def ctx = ApplicationContext.run()
+        def ctx = ApplicationContext.run(['spec.name': ConnectionManagerSpec.simpleName])
         def client = ctx.getBean(DefaultHttpClient)
 
         def conn = new EmbeddedTestConnectionHttp1()
@@ -217,6 +220,7 @@ class ConnectionManagerSpec extends Specification {
     def 'http2 get with compression'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
+                'spec.name': ConnectionManagerSpec.simpleName
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -252,6 +256,7 @@ class ConnectionManagerSpec extends Specification {
     def 'simple http1 tls get'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -269,6 +274,7 @@ class ConnectionManagerSpec extends Specification {
     def 'simple h2c get'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.plaintext-mode': 'h2c',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -286,7 +292,7 @@ class ConnectionManagerSpec extends Specification {
     }
 
     def 'http1 streaming get'() {
-        def ctx = ApplicationContext.run()
+        def ctx = ApplicationContext.run(['spec.name': ConnectionManagerSpec.simpleName])
         def client = ctx.getBean(DefaultHttpClient)
 
         def conn = new EmbeddedTestConnectionHttp1()
@@ -304,6 +310,7 @@ class ConnectionManagerSpec extends Specification {
         given:
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -371,7 +378,7 @@ class ConnectionManagerSpec extends Specification {
     }
 
     def 'http1 reuse'() {
-        def ctx = ApplicationContext.run()
+        def ctx = ApplicationContext.run(['spec.name': ConnectionManagerSpec.simpleName])
         def client = ctx.getBean(DefaultHttpClient)
 
         def conn = new EmbeddedTestConnectionHttp1()
@@ -394,7 +401,7 @@ class ConnectionManagerSpec extends Specification {
     }
 
     def 'http1 not reused after refresh'() {
-        def ctx = ApplicationContext.run()
+        def ctx = ApplicationContext.run(['spec.name': ConnectionManagerSpec.simpleName])
         def client = ctx.getBean(DefaultHttpClient)
 
         def conn1 = new EmbeddedTestConnectionHttp1()
@@ -416,7 +423,7 @@ class ConnectionManagerSpec extends Specification {
 
     def 'http1 plain text customization'() {
         given:
-        def ctx = ApplicationContext.run()
+        def ctx = ApplicationContext.run(['spec.name': ConnectionManagerSpec.simpleName])
         def client = ctx.getBean(DefaultHttpClient)
         def tracker = ctx.getBean(CustomizerTracker)
 
@@ -464,6 +471,7 @@ class ConnectionManagerSpec extends Specification {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
                 'micronaut.http.client.plaintext-mode': 'h2c',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
         def tracker = ctx.getBean(CustomizerTracker)
@@ -523,6 +531,7 @@ class ConnectionManagerSpec extends Specification {
     def 'http1 exchange read timeout'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.read-timeout': '5s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -563,6 +572,7 @@ class ConnectionManagerSpec extends Specification {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
                 'micronaut.http.client.read-timeout': '5s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -605,6 +615,7 @@ class ConnectionManagerSpec extends Specification {
     def 'http1 read timeout during dispatch'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.read-timeout': '5s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -641,6 +652,7 @@ class ConnectionManagerSpec extends Specification {
     def 'http1 ttl'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.connect-ttl': '100s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -668,6 +680,7 @@ class ConnectionManagerSpec extends Specification {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
                 'micronaut.http.client.connect-ttl': '100s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -697,6 +710,7 @@ class ConnectionManagerSpec extends Specification {
     def 'http1 pool timeout'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.connection-pool-idle-timeout': '5s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -726,6 +740,7 @@ class ConnectionManagerSpec extends Specification {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
                 'micronaut.http.client.connect-ttl': '100s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -772,7 +787,7 @@ class ConnectionManagerSpec extends Specification {
     }
 
     def 'cancel pool acquisition'() {
-        def ctx = ApplicationContext.run()
+        def ctx = ApplicationContext.run('spec.name': ConnectionManagerSpec.simpleName)
         def client = ctx.getBean(DefaultHttpClient)
 
         def conn = new EmbeddedTestConnectionHttp1()
@@ -820,6 +835,7 @@ class ConnectionManagerSpec extends Specification {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.pool.max-pending-acquires': 5,
                 'micronaut.http.client.pool.max-pending-connections': 1,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -871,6 +887,7 @@ class ConnectionManagerSpec extends Specification {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.pool.max-pending-connections': 1,
                 'micronaut.http.client.pool.max-concurrent-http1-connections': 2,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -900,7 +917,7 @@ class ConnectionManagerSpec extends Specification {
     }
 
     def 'multipart request'() {
-        def ctx = ApplicationContext.run()
+        def ctx = ApplicationContext.run('spec.name': ConnectionManagerSpec.simpleName)
         def client = ctx.getBean(DefaultHttpClient)
 
         def conn = new EmbeddedTestConnectionHttp1()
@@ -934,7 +951,7 @@ class ConnectionManagerSpec extends Specification {
     }
 
     def 'publisher request'() {
-        def ctx = ApplicationContext.run()
+        def ctx = ApplicationContext.run('spec.name': ConnectionManagerSpec.simpleName)
         def client = ctx.getBean(DefaultHttpClient)
 
         def conn = new EmbeddedTestConnectionHttp1()
@@ -968,6 +985,7 @@ class ConnectionManagerSpec extends Specification {
     def 'connection pool disabled http1'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.pool.enabled': false,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -994,6 +1012,7 @@ class ConnectionManagerSpec extends Specification {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.pool.enabled': false,
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -1020,7 +1039,8 @@ class ConnectionManagerSpec extends Specification {
 
     def 'http2 goaway'() {
         def ctx = ApplicationContext.run([
-                'micronaut.http.client.ssl.insecure-trust-all-certificates'  : true
+                'micronaut.http.client.ssl.insecure-trust-all-certificates'  : true,
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -1053,7 +1073,8 @@ class ConnectionManagerSpec extends Specification {
     def 'http2 channel inactive but fire inactive channel scheduled after acquire'() {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
-                'micronaut.http.client.read-timeout': '5s'
+                'micronaut.http.client.read-timeout': '5s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -1102,6 +1123,7 @@ class ConnectionManagerSpec extends Specification {
         def ctx = ApplicationContext.run([
                 'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
                 'micronaut.http.client.read-timeout': '1s',
+                'spec.name': ConnectionManagerSpec.simpleName,
         ])
         def client = ctx.getBean(DefaultHttpClient)
 
@@ -1145,7 +1167,10 @@ class ConnectionManagerSpec extends Specification {
 
     def 'automated ping, writes only'(String prop, boolean ping) {
         given:
-        def props = ['micronaut.http.client.ssl.insecure-trust-all-certificates': true]
+        def props = [
+                'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
+                'spec.name': ConnectionManagerSpec.simpleName,
+        ]
         props.put(prop, '1s')
         def ctx = ApplicationContext.run(props)
         def client = ctx.getBean(DefaultHttpClient)
@@ -1185,7 +1210,10 @@ class ConnectionManagerSpec extends Specification {
 
     def 'automated ping, no traffic'(String prop, boolean ping) {
         given:
-        def props = ['micronaut.http.client.ssl.insecure-trust-all-certificates': true]
+        def props = [
+                'micronaut.http.client.ssl.insecure-trust-all-certificates': true,
+                'spec.name': ConnectionManagerSpec.simpleName,
+        ]
         props.put(prop, '1s')
         def ctx = ApplicationContext.run(props)
         def client = ctx.getBean(DefaultHttpClient)
@@ -1477,6 +1505,7 @@ class ConnectionManagerSpec extends Specification {
         }
     }
 
+    @Requires(property = "spec.name", value = "ConnectionManagerSpec")
     @Singleton
     static class CustomizerTracker implements NettyClientCustomizer, BeanCreatedEventListener<Registry> {
         final Queue<Snapshot> initialPipelineBuilt = new ArrayDeque<>()
diff --git a/http-client/src/test/groovy/io/micronaut/http/client/netty/FullNettyClientHttpResponseSpec.groovy b/http-client/src/test/groovy/io/micronaut/http/client/netty/FullNettyClientHttpResponseSpec.groovy
index 22a5f25fb7..502d0226f6 100644
--- a/http-client/src/test/groovy/io/micronaut/http/client/netty/FullNettyClientHttpResponseSpec.groovy
+++ b/http-client/src/test/groovy/io/micronaut/http/client/netty/FullNettyClientHttpResponseSpec.groovy
@@ -1,8 +1,17 @@
 package io.micronaut.http.client.netty
 
+import io.micronaut.context.ApplicationContext
+import io.micronaut.context.annotation.Requires
 import io.micronaut.core.convert.ConversionService
+import io.micronaut.http.HttpRequest
+import io.micronaut.http.HttpResponse
+import io.micronaut.http.annotation.Controller
+import io.micronaut.http.annotation.Get
+import io.micronaut.http.client.BlockingHttpClient
+import io.micronaut.http.client.HttpClient
 import io.micronaut.http.cookie.Cookie
 import io.micronaut.http.cookie.Cookies
+import io.micronaut.runtime.server.EmbeddedServer
 import io.netty.buffer.ByteBuf
 import io.netty.buffer.Unpooled
 import io.netty.handler.codec.http.DefaultFullHttpResponse
@@ -12,21 +21,26 @@ import io.netty.handler.codec.http.HttpHeaderNames
 import io.netty.handler.codec.http.HttpHeaders
 import io.netty.handler.codec.http.HttpResponseStatus
 import io.netty.handler.codec.http.HttpVersion
-import spock.lang.Specification
-
+import jakarta.inject.Singleton
 import java.nio.charset.Charset
+import java.util.concurrent.Callable
+import java.util.concurrent.ExecutorService
+import java.util.concurrent.Executors
+import java.util.concurrent.TimeUnit
+import spock.lang.Specification
 
 class FullNettyClientHttpResponseSpec extends Specification {
 
     void "test cookies"() {
         given:
           String cookieDef = "simple-cookie=avalue; max-age=60; path=/; domain=.micronaut.io"
-          HttpHeaders httpHeaders = new DefaultHttpHeaders(false).add(HttpHeaderNames.SET_COOKIE, cookieDef)
+          HttpHeaders httpHeaders = new DefaultHttpHeaders(false)
+                  .add(HttpHeaderNames.SET_COOKIE, cookieDef)
           FullHttpResponse fullHttpResponse = new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK)
           fullHttpResponse.headers().set(httpHeaders)
 
         when:
-          FullNettyClientHttpResponse response = new FullNettyClientHttpResponse(fullHttpResponse, null, null, false, ConversionService.SHARED)
+          var response = new FullNettyClientHttpResponse(fullHttpResponse, null, null, false, ConversionService.SHARED)
 
         then:
             Cookies cookies = response.getCookies()
@@ -35,21 +49,21 @@ class FullNettyClientHttpResponseSpec extends Specification {
             cookies.contains("simple-cookie")
             Optional<Cookie> oCookie = response.getCookie("simple-cookie")
             oCookie.isPresent()
-            oCookie.get().getValue().equals("avalue")
+            oCookie.get().getValue() == "avalue"
     }
 
     void "test multiple cookie headers"() {
-        HttpHeaders httpHeaders = new DefaultHttpHeaders(false)
         FullHttpResponse fullHttpResponse = new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK)
-        httpHeaders.add(HttpHeaderNames.SET_COOKIE, "enctp=1;Domain=.xxx.xxx.com;Expires=Sat, 09-Jan-2021 17:32:47 GMT;Max-Age=7776000")
-        httpHeaders.add(HttpHeaderNames.SET_COOKIE, "inf=123456; path=/; domain=.xxx.com;")
-        httpHeaders.add(HttpHeaderNames.SET_COOKIE, "AUT=aaaabbbbcccc; path=/; domain=.xxx.com; HttpOnly")
-        httpHeaders.add(HttpHeaderNames.SET_COOKIE, "SES=abcdabcd; path=/; domain=.xxx.com;")
-        httpHeaders.add(HttpHeaderNames.SET_COOKIE, "JKL=abcdaaaa=; path=/; domain=.xxx.com; Secure;")
+        HttpHeaders httpHeaders = new DefaultHttpHeaders(false)
+            .add(HttpHeaderNames.SET_COOKIE, "enctp=1;Domain=.xxx.xxx.com;Expires=Sat, 09-Jan-2021 17:32:47 GMT;Max-Age=7776000")
+            .add(HttpHeaderNames.SET_COOKIE, "inf=123456; path=/; domain=.xxx.com;")
+            .add(HttpHeaderNames.SET_COOKIE, "AUT=aaaabbbbcccc; path=/; domain=.xxx.com; HttpOnly")
+            .add(HttpHeaderNames.SET_COOKIE, "SES=abcdabcd; path=/; domain=.xxx.com;")
+            .add(HttpHeaderNames.SET_COOKIE, "JKL=abcdaaaa=; path=/; domain=.xxx.com; Secure;")
         fullHttpResponse.headers().set(httpHeaders)
 
         when:
-        FullNettyClientHttpResponse response = new FullNettyClientHttpResponse(fullHttpResponse, null, null, false, ConversionService.SHARED)
+        var response = new FullNettyClientHttpResponse(fullHttpResponse, null, null, false, ConversionService.SHARED)
 
         then:
         Cookies cookies = response.getCookies()
@@ -72,13 +86,360 @@ class FullNettyClientHttpResponseSpec extends Specification {
         FullHttpResponse fullHttpResponse = new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK, content)
 
         when:
-        FullNettyClientHttpResponse response1 = new FullNettyClientHttpResponse(fullHttpResponse, null, null, false, ConversionService.SHARED)
-        FullNettyClientHttpResponse response2 = new FullNettyClientHttpResponse(fullHttpResponse, null, null, false, ConversionService.SHARED)
+        var response1 = new FullNettyClientHttpResponse(fullHttpResponse, null, null, false, ConversionService.SHARED)
+        var response2 = new FullNettyClientHttpResponse(fullHttpResponse, null, null, false, ConversionService.SHARED)
 
         then:
         response1.getBody(String.class).get() == "foo bar"
         response2.getBody(String.class).get() == "foo bar"
     }
 
+    void "test concurrency FullNettyClientHttpResponse"() {
+
+        given:
+        EmbeddedServer server = ApplicationContext.run(EmbeddedServer, ['spec.name': FullNettyClientHttpResponseSpec.simpleName])
+        ApplicationContext ctx = server.applicationContext
+        BlockingHttpClient client = ctx.createBean(HttpClient, server.URL).toBlocking()
+
+        when:
+
+        var threadsCount = 10
+        ExecutorService executor = Executors.newFixedThreadPool(threadsCount)
+        ExecutorService executor2 = Executors.newScheduledThreadPool(threadsCount)
+
+        var concurrentExceptionWasThrown = false
+        var tasks = new ArrayList<Callable<?>>()
+
+        for (var i = 0; i < 100; i++) {
+            tasks.add(Executors.callable {
+                if (concurrentExceptionWasThrown) {
+                    return null
+                }
+                var requestTasks = new ArrayList<Callable<?>>()
+                var response = client.exchange(HttpRequest.GET("/someGet"), byte[].class) as FullNettyClientHttpResponse<byte[]>
+                for (var j = 0; j < 100; j++) {
+                    requestTasks.add(Executors.callable {
+                        if (concurrentExceptionWasThrown) {
+                            return null
+                        }
+                        response.getBody(String.class).orElse(null)
+                    })
+                    requestTasks.add(Executors.callable {
+                        if (concurrentExceptionWasThrown) {
+                            return null
+                        }
+                        response.getBody(byte[].class).orElse(null)
+                    })
+                }
+
+                try {
+                    var futures = executor2.invokeAll(requestTasks);
+                    for (var future : futures) {
+                        future.get();
+                    }
+                } catch (Exception e) {
+                    println("Something is wrong: ${e.message}, ${e.class.simpleName}")
+                    concurrentExceptionWasThrown = true
+                }
+            })
+        }
+        executor.invokeAll(tasks)
+        executor.shutdown()
+        try {
+            if (!executor.awaitTermination(800, TimeUnit.MILLISECONDS)) {
+                executor.shutdownNow()
+            }
+        } catch (InterruptedException e) {
+            executor.shutdownNow()
+        }
+
+        then:
+        !concurrentExceptionWasThrown
+    }
+
+    @Requires(property = "spec.name", value = "FullNettyClientHttpResponseSpec")
+    @Controller
+    @Singleton
+    static class ExampleController {
+
+        @Get("/someGet")
+        HttpResponse<String> exampleGet() {
+            // autogenerated json
+            return HttpResponse.ok("""
+            [
+              {
+                "_id": "673df45fc80f6ab432122195",
+                "index": 0,
+                "guid": "b7cbafe6-a620-4e72-8f52-275bbd51a1b6",
+                "isActive": false,
+                "balance": "${'$'}2,889.56",
+                "picture": "http://placehold.it/32x32",
+                "age": 27,
+                "eyeColor": "blue",
+                "name": "Cote Weiss",
+                "gender": "male",
+                "company": "PHARMEX",
+                "email": "coteweiss@pharmex.com",
+                "phone": "+1 (921) 443-2881",
+                "address": "225 Losee Terrace, Tryon, Missouri, 2789",
+                "about": "Cillum consequat amet non ipsum nostrud est eu dolor voluptate minim. Enim velit sint exercitation labore do incididunt anim aute dolor quis consectetur tempor ex est. Irure nostrud cupidatat sint duis excepteur aliqua eiusmod cillum laboris eiusmod mollit deserunt elit. Tempor voluptate duis ex esse eu veniam et deserunt in amet id cupidatat do laboris. Duis quis ullamco quis voluptate duis in in exercitation. Cupidatat sunt aliqua in consectetur sint minim anim ut.\r\n",
+                "registered": "2014-08-26T05:18:29 -02:00",
+                "latitude": -65.593812,
+                "longitude": 123.085155,
+                "tags": [
+                  "non",
+                  "duis",
+                  "ipsum",
+                  "id",
+                  "ea",
+                  "anim",
+                  "officia"
+                ],
+                "friends": [
+                  {
+                    "id": 0,
+                    "name": "Janie Gross"
+                  },
+                  {
+                    "id": 1,
+                    "name": "Latasha Sykes"
+                  },
+                  {
+                    "id": 2,
+                    "name": "Summer Pruitt"
+                  }
+                ],
+                "greeting": "Hello, Cote Weiss! You have 6 unread messages.",
+                "favoriteFruit": "strawberry"
+              },
+              {
+                "_id": "673df45fd0cd418c67455600",
+                "index": 1,
+                "guid": "639c4cfa-7875-4170-9045-1391ddeed7ca",
+                "isActive": false,
+                "balance": "${'$'}1,429.26",
+                "picture": "http://placehold.it/32x32",
+                "age": 40,
+                "eyeColor": "green",
+                "name": "Ebony Mcknight",
+                "gender": "female",
+                "company": "OPTICALL",
+                "email": "ebonymcknight@opticall.com",
+                "phone": "+1 (902) 484-2716",
+                "address": "617 Bayview Place, Sterling, North Carolina, 7858",
+                "about": "Non eiusmod ullamco minim et eu eiusmod ut duis laborum laborum. Pariatur eu exercitation est voluptate eu enim in sit aliquip ad deserunt. Cillum officia mollit incididunt labore irure tempor officia eiusmod duis ex ullamco est culpa. Nostrud culpa veniam ipsum pariatur nostrud occaecat ipsum anim deserunt amet adipisicing duis elit fugiat. Pariatur aliquip eiusmod dolor dolore est ad qui eu incididunt excepteur laborum. Aliquip elit tempor enim laborum qui mollit velit qui sit quis veniam. Magna laboris quis sint amet fugiat.\r\n",
+                "registered": "2014-06-15T10:16:47 -02:00",
+                "latitude": -15.512737,
+                "longitude": -111.397878,
+                "tags": [
+                  "commodo",
+                  "Lorem",
+                  "dolore",
+                  "dolore",
+                  "exercitation",
+                  "amet",
+                  "irure"
+                ],
+                "friends": [
+                  {
+                    "id": 0,
+                    "name": "Alicia Johnston"
+                  },
+                  {
+                    "id": 1,
+                    "name": "Blanche Gilliam"
+                  },
+                  {
+                    "id": 2,
+                    "name": "Jessica Fry"
+                  }
+                ],
+                "greeting": "Hello, Ebony Mcknight! You have 10 unread messages.",
+                "favoriteFruit": "banana"
+              },
+              {
+                "_id": "673df45f18a35a5f44b04309",
+                "index": 2,
+                "guid": "614168a3-4586-4d90-be8f-8be6d6448ba3",
+                "isActive": false,
+                "balance": "${'$'}1,690.57",
+                "picture": "http://placehold.it/32x32",
+                "age": 38,
+                "eyeColor": "blue",
+                "name": "Florine Patton",
+                "gender": "female",
+                "company": "QOT",
+                "email": "florinepatton@qot.com",
+                "phone": "+1 (954) 450-3766",
+                "address": "536 Charles Place, Franklin, California, 7005",
+                "about": "Duis laboris ex aute ipsum laborum amet ad elit irure mollit aliqua eiusmod duis elit. Reprehenderit duis veniam ullamco Lorem culpa sit labore excepteur elit occaecat eiusmod est culpa incididunt. Pariatur sint mollit voluptate amet magna do reprehenderit consectetur eiusmod. Anim velit aliquip do ut aliquip ipsum deserunt et. Pariatur reprehenderit excepteur cupidatat quis et duis aliquip ipsum laboris anim aliquip anim magna eiusmod.\r\n",
+                "registered": "2016-02-02T01:58:35 -01:00",
+                "latitude": 29.255451,
+                "longitude": -104.598785,
+                "tags": [
+                  "magna",
+                  "pariatur",
+                  "Lorem",
+                  "consectetur",
+                  "sunt",
+                  "est",
+                  "nulla"
+                ],
+                "friends": [
+                  {
+                    "id": 0,
+                    "name": "Carver Harmon"
+                  },
+                  {
+                    "id": 1,
+                    "name": "Rollins Wong"
+                  },
+                  {
+                    "id": 2,
+                    "name": "Shelby Livingston"
+                  }
+                ],
+                "greeting": "Hello, Florine Patton! You have 5 unread messages.",
+                "favoriteFruit": "apple"
+              },
+              {
+                "_id": "673df45fa3dfad9948af8878",
+                "index": 3,
+                "guid": "d9a0f891-c442-4f56-ad21-aeeae43dd040",
+                "isActive": false,
+                "balance": "${'$'}1,340.69",
+                "picture": "http://placehold.it/32x32",
+                "age": 30,
+                "eyeColor": "green",
+                "name": "Madeleine Moran",
+                "gender": "female",
+                "company": "ILLUMITY",
+                "email": "madeleinemoran@illumity.com",
+                "phone": "+1 (818) 408-2235",
+                "address": "494 Powers Street, Williston, Mississippi, 5041",
+                "about": "Esse sunt sit deserunt magna anim amet. Anim ut elit sint fugiat quis ad. Et dolore tempor laboris ad ad fugiat elit.\r\n",
+                "registered": "2020-03-07T10:07:24 -01:00",
+                "latitude": 89.045778,
+                "longitude": 17.840976,
+                "tags": [
+                  "consectetur",
+                  "adipisicing",
+                  "enim",
+                  "mollit",
+                  "do",
+                  "dolor",
+                  "irure"
+                ],
+                "friends": [
+                  {
+                    "id": 0,
+                    "name": "Thornton Brady"
+                  },
+                  {
+                    "id": 1,
+                    "name": "Ashley Newman"
+                  },
+                  {
+                    "id": 2,
+                    "name": "Terra Downs"
+                  }
+                ],
+                "greeting": "Hello, Madeleine Moran! You have 8 unread messages.",
+                "favoriteFruit": "banana"
+              },
+              {
+                "_id": "673df45ff83ad1120ffa1a83",
+                "index": 4,
+                "guid": "20935d40-8069-464d-8497-5a69b72451ae",
+                "isActive": false,
+                "balance": "${'$'}1,154.89",
+                "picture": "http://placehold.it/32x32",
+                "age": 33,
+                "eyeColor": "brown",
+                "name": "Sanchez Mullins",
+                "gender": "male",
+                "company": "XLEEN",
+                "email": "sanchezmullins@xleen.com",
+                "phone": "+1 (891) 502-2082",
+                "address": "963 Pierrepont Street, Bangor, Minnesota, 4386",
+                "about": "Adipisicing magna amet eiusmod veniam amet laboris excepteur. Deserunt amet consectetur deserunt irure culpa. Occaecat nostrud labore excepteur sint sint. Nulla quis ut cillum consectetur eu et consectetur duis.\r\n",
+                "registered": "2014-01-26T09:17:34 -01:00",
+                "latitude": 45.081551,
+                "longitude": -21.080718,
+                "tags": [
+                  "magna",
+                  "non",
+                  "id",
+                  "nisi",
+                  "eu",
+                  "labore",
+                  "cupidatat"
+                ],
+                "friends": [
+                  {
+                    "id": 0,
+                    "name": "Billie Parrish"
+                  },
+                  {
+                    "id": 1,
+                    "name": "Ortiz Lester"
+                  },
+                  {
+                    "id": 2,
+                    "name": "Stacy Sargent"
+                  }
+                ],
+                "greeting": "Hello, Sanchez Mullins! You have 9 unread messages.",
+                "favoriteFruit": "banana"
+              },
+              {
+                "_id": "673df45f661c0664c5c7cc25",
+                "index": 5,
+                "guid": "35a84917-3421-4c7d-b350-87adebb1d2ee",
+                "isActive": true,
+                "balance": "${'$'}1,414.77",
+                "picture": "http://placehold.it/32x32",
+                "age": 33,
+                "eyeColor": "green",
+                "name": "Preston Lowe",
+                "gender": "male",
+                "company": "UBERLUX",
+                "email": "prestonlowe@uberlux.com",
+                "phone": "+1 (965) 526-2168",
+                "address": "442 Beach Place, Bluffview, Idaho, 2698",
+                "about": "Laboris tempor non ullamco sit sit voluptate eu deserunt id nostrud ad velit occaecat sit. Laboris fugiat eu veniam duis dolor do excepteur. Aliquip sunt id laborum do.\r\n",
+                "registered": "2019-12-28T08:36:12 -01:00",
+                "latitude": 30.586004,
+                "longitude": 76.748238,
+                "tags": [
+                  "cupidatat",
+                  "qui",
+                  "laborum",
+                  "et",
+                  "et",
+                  "ut",
+                  "tempor"
+                ],
+                "friends": [
+                  {
+                    "id": 0,
+                    "name": "Greene Mcfadden"
+                  },
+                  {
+                    "id": 1,
+                    "name": "Tate Schneider"
+                  },
+                  {
+                    "id": 2,
+                    "name": "Nola Baxter"
+                  }
+                ],
+                "greeting": "Hello, Preston Lowe! You have 4 unread messages.",
+                "favoriteFruit": "apple"
+              }
+            ]
+        """.stripIndent())
+        }
+    }
 }
 
diff --git a/http-netty/src/main/resources/META-INF/native-image/io.micronaut.micronaut.http.netty/reflect-config.json b/http-netty/src/main/resources/META-INF/native-image/io.micronaut.micronaut.http.netty/reflect-config.json
new file mode 100644
index 0000000000..d02e30b77e
--- /dev/null
+++ b/http-netty/src/main/resources/META-INF/native-image/io.micronaut.micronaut.http.netty/reflect-config.json
@@ -0,0 +1,14 @@
+[
+  {
+    "name":"io.netty.util.internal.shaded.org.jctools.queues.unpadded.MpscUnpaddedArrayQueueConsumerIndexField",
+    "fields":[{"name":"consumerIndex"}]
+  },
+  {
+    "name":"io.netty.util.internal.shaded.org.jctools.queues.unpadded.MpscUnpaddedArrayQueueProducerIndexField",
+    "fields":[{"name":"producerIndex"}]
+  },
+  {
+    "name":"io.netty.util.internal.shaded.org.jctools.queues.unpadded.MpscUnpaddedArrayQueueProducerLimitField",
+    "fields":[{"name":"producerLimit"}]
+  }
+]
\ No newline at end of file
diff --git a/http-server-netty/src/main/java/io/micronaut/http/server/netty/DefaultHttpCompressionStrategy.java b/http-server-netty/src/main/java/io/micronaut/http/server/netty/DefaultHttpCompressionStrategy.java
index 08c92d87ac..4e040fb198 100644
--- a/http-server-netty/src/main/java/io/micronaut/http/server/netty/DefaultHttpCompressionStrategy.java
+++ b/http-server-netty/src/main/java/io/micronaut/http/server/netty/DefaultHttpCompressionStrategy.java
@@ -37,6 +37,7 @@ public final class DefaultHttpCompressionStrategy implements HttpCompressionStra
 
     private final int compressionThreshold;
     private final int compressionLevel;
+    private final int maxZstdEncodeSize;
 
     /**
      * @param serverConfiguration The netty server configuration
@@ -45,15 +46,17 @@ public final class DefaultHttpCompressionStrategy implements HttpCompressionStra
     DefaultHttpCompressionStrategy(NettyHttpServerConfiguration serverConfiguration) {
         this.compressionThreshold = serverConfiguration.getCompressionThreshold();
         this.compressionLevel = serverConfiguration.getCompressionLevel();
+        this.maxZstdEncodeSize = serverConfiguration.getMaxZstdEncodeSize();
     }
 
     /**
      * @param compressionThreshold The compression threshold
      * @param compressionLevel The compression level (0-9)
      */
-    DefaultHttpCompressionStrategy(int compressionThreshold, int compressionLevel) {
+    DefaultHttpCompressionStrategy(int compressionThreshold, int compressionLevel, int maxZstdEncodeSize) {
         this.compressionThreshold = compressionThreshold;
         this.compressionLevel = compressionLevel;
+        this.maxZstdEncodeSize = maxZstdEncodeSize;
     }
 
     @Override
@@ -87,4 +90,9 @@ public final class DefaultHttpCompressionStrategy implements HttpCompressionStra
     public int getCompressionLevel() {
         return compressionLevel;
     }
+
+    @Override
+    public int getMaxZstdEncodeSize() {
+        return maxZstdEncodeSize;
+    }
 }
diff --git a/http-server-netty/src/main/java/io/micronaut/http/server/netty/HttpCompressionStrategy.java b/http-server-netty/src/main/java/io/micronaut/http/server/netty/HttpCompressionStrategy.java
index 29edddefd9..2746fc5b67 100644
--- a/http-server-netty/src/main/java/io/micronaut/http/server/netty/HttpCompressionStrategy.java
+++ b/http-server-netty/src/main/java/io/micronaut/http/server/netty/HttpCompressionStrategy.java
@@ -39,4 +39,9 @@ public interface HttpCompressionStrategy extends Toggleable {
     default int getCompressionLevel() {
         return StandardCompressionOptions.gzip().compressionLevel();
     }
+
+    /**
+     * @return The maximum size of data that can be encoded using the zstd algorithm.
+     */
+    int getMaxZstdEncodeSize();
 }
diff --git a/http-server-netty/src/main/java/io/micronaut/http/server/netty/configuration/NettyHttpServerConfiguration.java b/http-server-netty/src/main/java/io/micronaut/http/server/netty/configuration/NettyHttpServerConfiguration.java
index d26b2ff1f6..0d5c9b7f60 100644
--- a/http-server-netty/src/main/java/io/micronaut/http/server/netty/configuration/NettyHttpServerConfiguration.java
+++ b/http-server-netty/src/main/java/io/micronaut/http/server/netty/configuration/NettyHttpServerConfiguration.java
@@ -109,6 +109,12 @@ public class NettyHttpServerConfiguration extends HttpServerConfiguration {
     @SuppressWarnings("WeakerAccess")
     public static final int DEFAULT_COMPRESSIONLEVEL = 6;
 
+    /**
+     * The default size of the largest data that can be encoded using the zstd algorithm.
+     */
+    @SuppressWarnings("WeakerAccess")
+    public static final int DEFAULT_MAX_ZSTD_ENCODE_SIZE = 1024 * 1024 * 32;
+
     /**
      * The default configuration for boolean flag indicating whether to add connection header `keep-alive` to responses with HttpStatus > 499.
      */
@@ -200,6 +206,7 @@ public class NettyHttpServerConfiguration extends HttpServerConfiguration {
     private LogLevel logLevel;
     private int compressionThreshold = DEFAULT_COMPRESSIONTHRESHOLD;
     private int compressionLevel = DEFAULT_COMPRESSIONLEVEL;
+    private int maxZstdEncodeSize = DEFAULT_MAX_ZSTD_ENCODE_SIZE;
     private boolean useNativeTransport = DEFAULT_USE_NATIVE_TRANSPORT;
     private String fallbackProtocol = ApplicationProtocolNames.HTTP_1_1;
     private AccessLogger accessLogger;
@@ -472,6 +479,16 @@ public class NettyHttpServerConfiguration extends HttpServerConfiguration {
         return compressionLevel;
     }
 
+    /**
+     * The default maximum size of data that can be encoded using the zstd algorithm.
+     * Default value ({@value #DEFAULT_MAX_ZSTD_ENCODE_SIZE}).
+     *
+     * @return The maximum size of data that can be encoded using the zstd algorithm.
+     */
+    public int getMaxZstdEncodeSize() {
+        return maxZstdEncodeSize;
+    }
+
     /**
      * @return The Netty child channel options.
      * @see io.netty.bootstrap.ServerBootstrap#childOption(io.netty.channel.ChannelOption, Object)
@@ -657,6 +674,15 @@ public class NettyHttpServerConfiguration extends HttpServerConfiguration {
         this.compressionLevel = compressionLevel;
     }
 
+    /**
+     * Sets the maximum size of data that can be encoded using the zstd algorithm. Default value ({@value #DEFAULT_MAX_ZSTD_ENCODE_SIZE}).
+     *
+     * @param maxZstdEncodeSize The maximum size of block.
+     */
+    public void setMaxZstdEncodeSize(int maxZstdEncodeSize) {
+        this.maxZstdEncodeSize = maxZstdEncodeSize;
+    }
+
     /**
      * Whether to send connection keep alive on internal server errors. Default value ({@value DEFAULT_KEEP_ALIVE_ON_SERVER_ERROR}).
      * @param keepAliveOnServerError The keep alive on server error flag
diff --git a/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/Compressor.java b/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/Compressor.java
index 967b6ca955..65bfc5e10b 100644
--- a/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/Compressor.java
+++ b/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/Compressor.java
@@ -66,7 +66,11 @@ final class Compressor {
         this.gzipOptions = StandardCompressionOptions.gzip(strategy.getCompressionLevel(), stdGzip.windowBits(), stdGzip.memLevel());
         DeflateOptions stdDeflate = StandardCompressionOptions.deflate();
         this.deflateOptions = StandardCompressionOptions.deflate(strategy.getCompressionLevel(), stdDeflate.windowBits(), stdDeflate.memLevel());
-        this.zstdOptions = Zstd.isAvailable() ? StandardCompressionOptions.zstd() : null;
+        this.zstdOptions = Zstd.isAvailable()
+            ? StandardCompressionOptions.zstd(strategy.getCompressionLevel(),
+            StandardCompressionOptions.zstd().blockSize(),
+            strategy.getMaxZstdEncodeSize())
+            : null;
         this.snappyOptions = StandardCompressionOptions.snappy();
     }
 
@@ -97,7 +101,7 @@ final class Compressor {
         response.headers().add(HttpHeaderNames.CONTENT_ENCODING, encoding.contentEncoding);
         ChannelHandler handler = switch (encoding) {
             case BR -> makeBrotliEncoder();
-            case ZSTD -> new ZstdEncoder(zstdOptions.compressionLevel(), zstdOptions.blockSize(), zstdOptions.maxEncodeSize());
+            case ZSTD -> new ZstdEncoder(zstdOptions.compressionLevel(), zstdOptions.blockSize(), strategy.getMaxZstdEncodeSize());
             case SNAPPY -> new SnappyFrameEncoder();
             case GZIP -> ZlibCodecFactory.newZlibEncoder(ZlibWrapper.GZIP, gzipOptions.compressionLevel(), gzipOptions.windowBits(), gzipOptions.memLevel());
             case DEFLATE -> ZlibCodecFactory.newZlibEncoder(ZlibWrapper.ZLIB, deflateOptions.compressionLevel(), deflateOptions.windowBits(), deflateOptions.memLevel());
diff --git a/http/src/main/java/io/micronaut/http/HttpResponse.java b/http/src/main/java/io/micronaut/http/HttpResponse.java
index ecdab9f939..0990e548d7 100644
--- a/http/src/main/java/io/micronaut/http/HttpResponse.java
+++ b/http/src/main/java/io/micronaut/http/HttpResponse.java
@@ -36,6 +36,7 @@ public interface HttpResponse<B> extends HttpMessage<B> {
 
     /**
      * @return The current status
+     * To support custom status codes. Use {@link #code()} instead of {@link #getStatus()} and {@link HttpStatus#getCode()}  and {@link #reason()} instead of {@link #getStatus()} and {@link HttpStatus#getReason()}
      */
     default HttpStatus getStatus() {
         return HttpStatus.valueOf(code());
@@ -68,6 +69,7 @@ public interface HttpResponse<B> extends HttpMessage<B> {
 
     /**
      * @return The HTTP status
+     * To support custom status codes. Use {@link #code()} instead of {@link #status()} and {@link HttpStatus#getCode()}  and {@link #reason()} instead of {@link #status()} and {@link HttpStatus#getReason()}
      */
     default HttpStatus status() {
         return getStatus();
diff --git a/http/src/main/java/io/micronaut/http/MediaType.java b/http/src/main/java/io/micronaut/http/MediaType.java
index ee817fcaee..1a90d68262 100644
--- a/http/src/main/java/io/micronaut/http/MediaType.java
+++ b/http/src/main/java/io/micronaut/http/MediaType.java
@@ -83,6 +83,41 @@ public class MediaType implements CharSequence, Comparable<MediaType> {
      */
     public static final String EXTENSION_XLS = "xls";
 
+    /**
+     * File extension for OpenDocument spreadsheets.
+     */
+    public static final String EXTENSION_ODS = "ods";
+
+    /**
+     * File extension used for Microsoft Word Open XML document (DOCX).
+     */
+    public static final String EXTENSION_DOCX = "docx";
+
+    /**
+     * File extension for Microsoft Word document files in use between 97-2003.
+     */
+    public static final String EXTENSION_DOC = "doc";
+
+    /**
+     * File extension for OpenDocument text files.
+     */
+    public static final String EXTENSION_ODT = "odt";
+
+    /**
+     * File extension used for Microsoft Powerpoint Open XML document (PPTX).
+     */
+    public static final String EXTENSION_PPTX = "pptx";
+
+    /**
+     * File extension for Microsoft Powerpoint files in use between 97-2003.
+     */
+    public static final String EXTENSION_PPT = "ppt";
+
+    /**
+     * File extension for OpenDocument presentation files.
+     */
+    public static final String EXTENSION_ODP = "odp";
+
     /**
      * File extension for GPS Exchange Format files.
      */
@@ -260,6 +295,76 @@ public class MediaType implements CharSequence, Comparable<MediaType> {
      */
     public static final MediaType MICROSOFT_EXCEL_TYPE = new MediaType(MICROSOFT_EXCEL, EXTENSION_XLS);
 
+    /**
+     * OpenDocument spreadsheet: application/vnd.oasis.opendocument.spreadsheet.
+     */
+    public static final String OPEN_DOCUMENT_SPREADSHEET = "application/vnd.oasis.opendocument.spreadsheet";
+
+    /**
+     * OpenDocument spreadsheet: application/vnd.oasis.opendocument.spreadsheet.
+     */
+    public static final MediaType OPEN_DOCUMENT_SPREADSHEET_TYPE = new MediaType(OPEN_DOCUMENT_SPREADSHEET, EXTENSION_ODS);
+
+    /**
+     * XML: Microsoft Word Open XML (DOCX).
+     */
+    public static final String MICROSOFT_WORD_OPEN_XML = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";
+
+    /**
+     * XML: Microsoft Word Open XML (DOCX).
+     */
+    public static final MediaType MICROSOFT_WORD_OPEN_XML_TYPE = new MediaType(MICROSOFT_WORD_OPEN_XML, EXTENSION_DOCX);
+
+    /**
+     * Microsoft Word files in use between 97-2003.
+     */
+    public static final String MICROSOFT_WORD = "application/msword";
+
+    /**
+     * Microsoft Word files in use between 97-2003.
+     */
+    public static final MediaType MICROSOFT_WORD_TYPE = new MediaType(MICROSOFT_WORD, EXTENSION_DOC);
+
+    /**
+     * OpenDocument text: application/vnd.oasis.opendocument.text.
+     */
+    public static final String OPEN_DOCUMENT_TEXT = "application/vnd.oasis.opendocument.text";
+
+    /**
+     * OpenDocument text: application/vnd.oasis.opendocument.text.
+     */
+    public static final MediaType OPEN_DOCUMENT_TEXT_TYPE = new MediaType(OPEN_DOCUMENT_TEXT, EXTENSION_ODT);
+
+    /**
+     * XML: Microsoft Powerpoint XML (PPTX).
+     */
+    public static final String MICROSOFT_POWERPOINT_OPEN_XML = "application/vnd.openxmlformats-officedocument.presentationml.presentation";
+
+    /**
+     * XML: Microsoft Powerpoint Open XML (PPTX).
+     */
+    public static final MediaType MICROSOFT_POWERPOINT_OPEN_XML_TYPE = new MediaType(MICROSOFT_WORD_OPEN_XML, EXTENSION_PPTX);
+
+    /**
+     * Microsoft Powerpoint files in use between 97-2003.
+     */
+    public static final String MICROSOFT_POWERPOINT = "application/vnd.ms-powerpoint";
+
+    /**
+     * Microsoft Powerpoint files in use between 97-2003.
+     */
+    public static final MediaType MICROSOFT_POWERPOINT_TYPE = new MediaType(MICROSOFT_POWERPOINT, EXTENSION_PPT);
+
+    /**
+     * OpenDocument presentation: application/vnd.oasis.opendocument.presentation.
+     */
+    public static final String OPEN_DOCUMENT_PRESENTATION = "application/vnd.oasis.opendocument.presentation";
+
+    /**
+     * OpenDocument presentation: application/vnd.oasis.opendocument.presentation.
+     */
+    public static final MediaType OPEN_DOCUMENT_PRESENTATION_TYPE = new MediaType(OPEN_DOCUMENT_PRESENTATION, EXTENSION_ODP);
+
     /**
      * HAL JSON: application/hal+json.
      */
@@ -839,6 +944,13 @@ public class MediaType implements CharSequence, Comparable<MediaType> {
             case APPLICATION_ZIP -> ZIP_TYPE;
             case MICROSOFT_EXCEL_OPEN_XML -> MICROSOFT_EXCEL_OPEN_XML_TYPE;
             case MICROSOFT_EXCEL -> MICROSOFT_EXCEL_TYPE;
+            case OPEN_DOCUMENT_SPREADSHEET -> OPEN_DOCUMENT_SPREADSHEET_TYPE;
+            case MICROSOFT_WORD_OPEN_XML -> MICROSOFT_WORD_OPEN_XML_TYPE;
+            case MICROSOFT_WORD -> MICROSOFT_WORD_TYPE;
+            case OPEN_DOCUMENT_TEXT -> OPEN_DOCUMENT_TEXT_TYPE;
+            case MICROSOFT_POWERPOINT -> MICROSOFT_POWERPOINT_TYPE;
+            case MICROSOFT_POWERPOINT_OPEN_XML -> MICROSOFT_POWERPOINT_OPEN_XML_TYPE;
+            case OPEN_DOCUMENT_PRESENTATION -> OPEN_DOCUMENT_PRESENTATION_TYPE;
             case APPLICATION_YANG -> YANG_TYPE;
             case APPLICATION_CUE -> CUE_TYPE;
             case APPLICATION_TOML -> TOML_TYPE;
diff --git a/http/src/main/java/io/micronaut/http/bind/binders/RequestAttributeAnnotationBinder.java b/http/src/main/java/io/micronaut/http/bind/binders/RequestAttributeAnnotationBinder.java
index 4f8e6ee42d..d89a9bb190 100644
--- a/http/src/main/java/io/micronaut/http/bind/binders/RequestAttributeAnnotationBinder.java
+++ b/http/src/main/java/io/micronaut/http/bind/binders/RequestAttributeAnnotationBinder.java
@@ -44,7 +44,6 @@ public class RequestAttributeAnnotationBinder<T> extends AbstractArgumentBinder<
 
     /**
      * @param conversionService conversionService
-     * @param argument argument
      */
     public RequestAttributeAnnotationBinder(ConversionService conversionService,
                                             Argument<T> argument) {
diff --git a/http/src/main/java/io/micronaut/http/body/stream/UpstreamBalancer.java b/http/src/main/java/io/micronaut/http/body/stream/UpstreamBalancer.java
index 452e691d8a..3859677315 100644
--- a/http/src/main/java/io/micronaut/http/body/stream/UpstreamBalancer.java
+++ b/http/src/main/java/io/micronaut/http/body/stream/UpstreamBalancer.java
@@ -313,17 +313,7 @@ public final class UpstreamBalancer {
         }
     }
 
-    /**
-     * Pair of {@link BufferConsumer.Upstream} objects.
-     *
-     * @param left left {@link BufferConsumer.Upstream} object
-     * @param right right {@link BufferConsumer.Upstream} object
-     */
-    public record UpstreamPair(
-        BufferConsumer.Upstream left,
-        BufferConsumer.Upstream right
-    ) {
-
+    public record UpstreamPair(BufferConsumer.Upstream left, BufferConsumer.Upstream right) {
         UpstreamPair flip() {
             return new UpstreamPair(right, left);
         }
diff --git a/http/src/test/java/io/micronaut/http/MediaTypeTest.java b/http/src/test/java/io/micronaut/http/MediaTypeTest.java
index db7d36dffc..5a13e7555e 100644
--- a/http/src/test/java/io/micronaut/http/MediaTypeTest.java
+++ b/http/src/test/java/io/micronaut/http/MediaTypeTest.java
@@ -54,6 +54,13 @@ class MediaTypeTest {
             ZIP_TYPE,
             MICROSOFT_EXCEL_OPEN_XML_TYPE,
             MICROSOFT_EXCEL_TYPE,
+            OPEN_DOCUMENT_SPREADSHEET_TYPE,
+            MICROSOFT_WORD_TYPE,
+            MICROSOFT_WORD_OPEN_XML_TYPE,
+            OPEN_DOCUMENT_TEXT_TYPE,
+            MICROSOFT_POWERPOINT_TYPE,
+            MICROSOFT_POWERPOINT_OPEN_XML_TYPE,
+            OPEN_DOCUMENT_PRESENTATION_TYPE,
             YANG_TYPE,
             CUE_TYPE,
             TOML_TYPE,
diff --git a/inject-java-test/src/test/groovy/io/micronaut/inject/visitor/beans/BeanIntrospectionSpec.groovy b/inject-java-test/src/test/groovy/io/micronaut/inject/visitor/beans/BeanIntrospectionSpec.groovy
index db7cf896e1..7c7c1a58ad 100644
--- a/inject-java-test/src/test/groovy/io/micronaut/inject/visitor/beans/BeanIntrospectionSpec.groovy
+++ b/inject-java-test/src/test/groovy/io/micronaut/inject/visitor/beans/BeanIntrospectionSpec.groovy
@@ -52,6 +52,65 @@ import java.util.stream.IntStream
 
 class BeanIntrospectionSpec extends AbstractTypeElementSpec {
 
+    void "test inner introspection"() {
+        when:
+        def introspection = buildBeanIntrospection('test.Test$Foo', '''
+package test;
+
+import io.micronaut.core.annotation.Introspected;
+import io.micronaut.core.value.OptionalMultiValues;
+import java.util.*;
+import java.lang.annotation.*;
+import static java.lang.annotation.ElementType.*;
+
+@Introspected
+class Test {
+    @Introspected
+    record Foo(String name) {}
+
+    @Introspected(accessKind = Introspected.AccessKind.FIELD)
+    static class Bar {
+        String name;
+    }
+}
+
+
+    ''' )
+
+        then:
+        introspection != null
+        introspection.getBeanType().simpleName == 'Foo'
+    }
+
+    void "test inner introspection - without outer annotation"() {
+        when:
+        def introspection = buildBeanIntrospection('test.Test$Foo', '''
+package test;
+
+import io.micronaut.core.annotation.Introspected;
+import io.micronaut.core.value.OptionalMultiValues;
+import java.util.*;
+import java.lang.annotation.*;
+import static java.lang.annotation.ElementType.*;
+
+class Test {
+    @Introspected
+    record Foo(String name) {}
+
+    @Introspected(accessKind = Introspected.AccessKind.FIELD)
+    static class Bar {
+        String name;
+    }
+}
+
+
+    ''' )
+
+        then:
+        introspection != null
+        introspection.getBeanType().simpleName == 'Foo'
+    }
+
     void "test annotations"() {
         when:
         def introspection = buildBeanIntrospection('test.Test', '''
diff --git a/inject-java/src/main/java/io/micronaut/annotation/processing/AbstractInjectAnnotationProcessor.java b/inject-java/src/main/java/io/micronaut/annotation/processing/AbstractInjectAnnotationProcessor.java
index 0c28b0d290..f8c531a325 100644
--- a/inject-java/src/main/java/io/micronaut/annotation/processing/AbstractInjectAnnotationProcessor.java
+++ b/inject-java/src/main/java/io/micronaut/annotation/processing/AbstractInjectAnnotationProcessor.java
@@ -37,6 +37,7 @@ import java.util.Arrays;
 import java.util.Collections;
 import java.util.HashMap;
 import java.util.HashSet;
+import java.util.LinkedHashSet;
 import java.util.Map;
 import java.util.Set;
 
diff --git a/inject-java/src/main/java/io/micronaut/annotation/processing/TypeElementVisitorProcessor.java b/inject-java/src/main/java/io/micronaut/annotation/processing/TypeElementVisitorProcessor.java
index 34ae16fbcf..e68fac8b28 100644
--- a/inject-java/src/main/java/io/micronaut/annotation/processing/TypeElementVisitorProcessor.java
+++ b/inject-java/src/main/java/io/micronaut/annotation/processing/TypeElementVisitorProcessor.java
@@ -35,6 +35,7 @@ import io.micronaut.inject.ast.FieldElement;
 import io.micronaut.inject.ast.MemberElement;
 import io.micronaut.inject.ast.MethodElement;
 import io.micronaut.inject.processing.ProcessingException;
+import io.micronaut.inject.visitor.ElementPostponedToNextRoundException;
 import io.micronaut.inject.visitor.TypeElementVisitor;
 import io.micronaut.inject.visitor.VisitorContext;
 import io.micronaut.inject.writer.AbstractBeanDefinitionBuilder;
@@ -42,6 +43,7 @@ import io.micronaut.inject.writer.AbstractBeanDefinitionBuilder;
 import javax.annotation.processing.ProcessingEnvironment;
 import javax.annotation.processing.RoundEnvironment;
 import javax.annotation.processing.SupportedOptions;
+import javax.lang.model.element.Element;
 import javax.lang.model.element.TypeElement;
 import javax.lang.model.type.TypeMirror;
 import java.io.IOException;
@@ -275,7 +277,16 @@ public class TypeElementVisitorProcessor extends AbstractInjectAnnotationProcess
                             }
                             error(originatingElement.element(), e.getMessage());
                         } catch (PostponeToNextRoundException e) {
-                            postponedTypes.put(javaClassElement.getName(), e.getErrorElement());
+                            postponedTypes.put(javaClassElement.getCanonicalName(), e.getErrorElement());
+                        } catch (ElementPostponedToNextRoundException e) {
+                            Object nativeType = e.getOriginatingElement().getNativeType();
+                            if (nativeType instanceof JavaNativeElement jne) {
+                                Element element = jne.element();
+                                postponedTypes.put(javaClassElement.getCanonicalName(), element);
+                            } else {
+                                // should never happen.
+                                throw e;
+                            }
                         }
                     }
                 }
diff --git a/inject-java/src/main/java/io/micronaut/annotation/processing/visitor/JavaClassElement.java b/inject-java/src/main/java/io/micronaut/annotation/processing/visitor/JavaClassElement.java
index d9059e1f78..ba6ec0721e 100644
--- a/inject-java/src/main/java/io/micronaut/annotation/processing/visitor/JavaClassElement.java
+++ b/inject-java/src/main/java/io/micronaut/annotation/processing/visitor/JavaClassElement.java
@@ -184,6 +184,11 @@ public class JavaClassElement extends AbstractJavaElement implements ArrayableCl
         this.isTypeVariable = isTypeVariable;
     }
 
+    @Override
+    public String getCanonicalName() {
+        return classElement.getQualifiedName().toString();
+    }
+
     @Override
     public JavaNativeElement.@NonNull Class getNativeType() {
         return (JavaNativeElement.Class) super.getNativeType();
diff --git a/inject-java/src/test/groovy/io/micronaut/inject/configuration/ConfigurationBuilderSpec.groovy b/inject-java/src/test/groovy/io/micronaut/inject/configuration/ConfigurationBuilderSpec.groovy
index 8c37b3d9eb..04e7085c3e 100644
--- a/inject-java/src/test/groovy/io/micronaut/inject/configuration/ConfigurationBuilderSpec.groovy
+++ b/inject-java/src/test/groovy/io/micronaut/inject/configuration/ConfigurationBuilderSpec.groovy
@@ -215,248 +215,4 @@ interface Foo {
         ctx.close()
     }
 
-    void "test @Inject with nested configurationProperties"() {
-        given:
-        ApplicationContext ctx = buildContext("test.NestedConfig", '''
-package test;
-
-import io.micronaut.context.annotation.ConfigurationProperties;
-import jakarta.inject.Inject;
-
-@ConfigurationProperties("product-aggregator")
-class NestedConfig {
-
-    @Inject
-    LevelOne levelOnez = new LevelOne();
-
-    public LevelOne getLevelOnez() {
-        return levelOnez;
-    }
-
-    public void setLevelOnez(LevelOne levelOnez) {
-        this.levelOnez = levelOnez;
-    }
-
-    @ConfigurationProperties("level-one")
-    static class LevelOne {
-
-        String levelOneValue;
-
-        @Inject
-        LevelTwo levelTwo = new LevelTwo();
-
-        public String getLevelOneValue() {
-            return levelOneValue;
-        }
-
-        public void setLevelOneValue(String levelOneValue) {
-            this.levelOneValue = levelOneValue;
-        }
-
-        public LevelTwo getLevelTwo() {
-            return levelTwo;
-        }
-
-        public void setLevelTwo(LevelTwo levelTwo) {
-            this.levelTwo = levelTwo;
-        }
-
-        @ConfigurationProperties("level-two")
-        static class LevelTwo {
-
-            private String levelTwoValue;
-
-            public String getLevelTwoValue() {
-                return levelTwoValue;
-            }
-
-            public void setLevelTwoValue(String levelTwoValue) {
-                this.levelTwoValue = levelTwoValue;
-            }
-        }
-    }
-}
-''')
-        ctx.getEnvironment().addPropertySource(PropertySource.of([
-                'product-aggregator.level-one.level-one-value': 'ONE',
-                'product-aggregator.level-one.level-two.level-two-value': 'TWO',
-        ]))
-
-        when:
-        Class<?> testProps = ctx.classLoader.loadClass("test.NestedConfig")
-        def testPropBean = ctx.getBean(testProps)
-        def definition = ctx.getBeanDefinition(testProps)
-
-        then:
-        noExceptionThrown()
-
-        definition.properties.injectedFields.size() == 1
-        definition.properties.injectedFields[0].name == "levelOnez"
-
-        testPropBean.getLevelOnez().getLevelOneValue() == "ONE"
-        testPropBean.getLevelOnez().getLevelTwo()
-        testPropBean.getLevelOnez().getLevelTwo().getLevelTwoValue() == "TWO"
-
-        cleanup:
-        ctx.close()
-    }
-
-    void "test @Inject with nested configurationProperties - method injection"() {
-        given:
-        ApplicationContext ctx = buildContext("test.NestedConfig", '''
-package test;
-
-import io.micronaut.context.annotation.ConfigurationProperties;
-import io.micronaut.core.annotation.Nullable;import jakarta.inject.Inject;
-
-@ConfigurationProperties("product-aggregator")
-class NestedConfig {
-
-    private LevelOne levelOnez = new LevelOne();
-
-    public LevelOne getLevelOnez() {
-        return levelOnez;
-    }
-
-    public void setLevelOnez(LevelOne levelOnez) {
-        this.levelOnez = levelOnez;
-    }
-
-    @ConfigurationProperties("level-one")
-    static class LevelOne {
-
-        String levelOneValue;
-
-        @Inject
-        LevelTwo levelTwo = new LevelTwo();
-
-        public String getLevelOneValue() {
-            return levelOneValue;
-        }
-
-        public void setLevelOneValue(String levelOneValue) {
-            this.levelOneValue = levelOneValue;
-        }
-
-        public LevelTwo getLevelTwo() {
-            return levelTwo;
-        }
-
-        public void setLevelTwo(LevelTwo levelTwo) {
-            this.levelTwo = levelTwo;
-        }
-
-        @ConfigurationProperties("level-two")
-        static class LevelTwo {
-
-            private String levelTwoValue;
-
-            public String getLevelTwoValue() {
-                return levelTwoValue;
-            }
-
-            public void setLevelTwoValue(String levelTwoValue) {
-                this.levelTwoValue = levelTwoValue;
-            }
-        }
-    }
-}
-''')
-        ctx.getEnvironment().addPropertySource(PropertySource.of([
-                'product-aggregator.level-one.level-one-value': 'ONE',
-                'product-aggregator.level-one.level-two.level-two-value': 'TWO',
-        ]))
-
-        when:
-        Class<?> testProps = ctx.classLoader.loadClass("test.NestedConfig")
-        def testPropBean = ctx.getBean(testProps)
-
-        then:
-        noExceptionThrown()
-
-        testPropBean.getLevelOnez().getLevelOneValue() == "ONE"
-        testPropBean.getLevelOnez().getLevelTwo()
-        testPropBean.getLevelOnez().getLevelTwo().getLevelTwoValue() == "TWO"
-
-        cleanup:
-        ctx.close()
-    }
-
-    void "test @Inject with nested configurationProperties - field only"() {
-        given:
-        ApplicationContext ctx = buildContext("test.NestedConfig", '''
-package test;
-
-import io.micronaut.context.annotation.ConfigurationProperties;
-import jakarta.inject.Inject;
-
-@ConfigurationProperties("product-aggregator")
-class NestedConfig {
-
-    @Inject
-    LevelOne levelOnez = new LevelOne();
-
-    @ConfigurationProperties("level-one")
-    static class LevelOne {
-
-        String levelOneValue;
-
-        @Inject
-        LevelTwo levelTwo = new LevelTwo();
-
-        public String getLevelOneValue() {
-            return levelOneValue;
-        }
-
-        public void setLevelOneValue(String levelOneValue) {
-            this.levelOneValue = levelOneValue;
-        }
-
-        public LevelTwo getLevelTwo() {
-            return levelTwo;
-        }
-
-        public void setLevelTwo(LevelTwo levelTwo) {
-            this.levelTwo = levelTwo;
-        }
-
-        @ConfigurationProperties("level-two")
-        static class LevelTwo {
-
-            private String levelTwoValue;
-
-            public String getLevelTwoValue() {
-                return levelTwoValue;
-            }
-
-            public void setLevelTwoValue(String levelTwoValue) {
-                this.levelTwoValue = levelTwoValue;
-            }
-        }
-    }
-}
-''')
-        ctx.getEnvironment().addPropertySource(PropertySource.of([
-                'product-aggregator.level-one.level-one-value': 'ONE',
-                'product-aggregator.level-one.level-two.level-two-value': 'TWO',
-        ]))
-
-        when:
-        Class<?> testProps = ctx.classLoader.loadClass("test.NestedConfig")
-        def testPropBean = ctx.getBean(testProps)
-        def definition = ctx.getBeanDefinition(testProps)
-
-        then:
-        noExceptionThrown()
-
-        definition.properties.injectedFields.size() == 1
-        definition.properties.injectedFields[0].name == "levelOnez"
-
-        testPropBean.levelOnez.getLevelOneValue() == "ONE"
-        testPropBean.levelOnez.getLevelTwo()
-        testPropBean.levelOnez.getLevelTwo().getLevelTwoValue() == "TWO"
-
-        cleanup:
-        ctx.close()
-    }
 }
diff --git a/inject-java/src/test/groovy/io/micronaut/visitors/ClassElementSpec.groovy b/inject-java/src/test/groovy/io/micronaut/visitors/ClassElementSpec.groovy
index a528e7bdde..776d5e9e5c 100644
--- a/inject-java/src/test/groovy/io/micronaut/visitors/ClassElementSpec.groovy
+++ b/inject-java/src/test/groovy/io/micronaut/visitors/ClassElementSpec.groovy
@@ -47,6 +47,21 @@ import spock.util.environment.Jvm
 
 class ClassElementSpec extends AbstractTypeElementSpec {
 
+    void "test canonical name"() {
+        expect:
+        buildClassElement('''
+package test;
+
+record Outer() {
+    record Inner() {}
+}
+''') { ClassElement classElement ->
+            assert classElement.canonicalName == 'test.Outer'
+            assert classElement.getEnclosedElement(ElementQuery.ALL_INNER_CLASSES).get().canonicalName == 'test.Outer.Inner'
+            classElement
+        }
+    }
+
     void "test package-private methods with broken different package"() {
         when:
         ClassElement classElement = buildClassElement('''
diff --git a/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/KotlinOutputVisitor.kt b/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/KotlinOutputVisitor.kt
index 92731c7e9a..5b51ecad8e 100644
--- a/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/KotlinOutputVisitor.kt
+++ b/inject-kotlin/src/main/kotlin/io/micronaut/kotlin/processing/KotlinOutputVisitor.kt
@@ -32,17 +32,19 @@ internal class KotlinOutputVisitor(private val environment: SymbolProcessorEnvir
 
     override fun visitClass(classname: String, vararg originatingElements: Element): OutputStream {
         return environment.codeGenerator.createNewFile(
-            getNativeElements(originatingElements),
+            getNativeElements(classname, originatingElements),
             classname.substringBeforeLast('.'),
             classname.substringAfterLast('.'),
             "class")
     }
 
     override fun visitServiceDescriptor(type: String, classname: String, originatingElement: Element) {
+        val fileName = "${type}${File.separator}${classname}"
+        val packageName = "META-INF.micronaut"
         environment.codeGenerator.createNewFile(
-            getNativeElements(arrayOf(originatingElement)),
-            "META-INF.micronaut",
-            "${type}${File.separator}${classname}",
+            getNativeElements("$packageName.$fileName", arrayOf(originatingElement)),
+            packageName,
+            fileName,
             "").use {
             it.bufferedWriter().write("")
         }
@@ -50,7 +52,7 @@ internal class KotlinOutputVisitor(private val environment: SymbolProcessorEnvir
 
     override fun visitMetaInfFile(path: String, vararg originatingElements: Element): Optional<GeneratedFile> {
         val elements = normalizePath("META-INF/$path")
-        return Optional.of(KotlinVisitorContext.KspGeneratedFile(environment, elements, getNativeElements(originatingElements)))
+        return Optional.of(KotlinVisitorContext.KspGeneratedFile(environment, elements, getNativeElements(path, originatingElements)))
     }
 
     override fun visitGeneratedFile(path: String): Optional<GeneratedFile> {
@@ -60,18 +62,22 @@ internal class KotlinOutputVisitor(private val environment: SymbolProcessorEnvir
 
     override fun visitGeneratedFile(path: String, vararg originatingElements: Element): Optional<GeneratedFile> {
         val elements = normalizePath(path)
-        return Optional.of(KotlinVisitorContext.KspGeneratedFile(environment, elements, getNativeElements(originatingElements)))
+        return Optional.of(KotlinVisitorContext.KspGeneratedFile(environment, elements, getNativeElements(path, originatingElements)))
     }
 
     override fun visitGeneratedSourceFile(packageName: String, fileNameWithoutExtension: String, vararg originatingElements: Element): Optional<GeneratedFile> {
         val elements = packageName.split('.').toMutableList()
-        elements.add("${fileNameWithoutExtension}.kt")
-        return Optional.of(KotlinVisitorContext.KspGeneratedFile(environment, elements, getNativeElements(originatingElements)))
+        val fileName = "${fileNameWithoutExtension}.kt"
+        elements.add(fileName)
+        return Optional.of(KotlinVisitorContext.KspGeneratedFile(environment, elements, getNativeElements("$packageName.$fileName", originatingElements)))
     }
 
     private fun normalizePath(path: String) = path.replace("\\\\", "/").split("/").toMutableList()
 
-    private fun getNativeElements(originatingElements: Array<out Element>): Dependencies {
+    private fun getNativeElements(fileName: String, originatingElements: Array<out Element>): Dependencies {
+        if (context.aggregating) {
+            return Dependencies.ALL_FILES
+        }
         val sources: Array<KSFile> = if (originatingElements.isNotEmpty()) {
             val originatingFiles: MutableList<KSFile> = ArrayList(originatingElements.size)
             for (originatingElement in originatingElements) {
@@ -84,8 +90,12 @@ internal class KotlinOutputVisitor(private val environment: SymbolProcessorEnvir
             }
             originatingFiles.toTypedArray()
         } else {
+            context.warn(
+                "File $fileName is generated from a non-aggregating visitor and without any originating elements",
+                null as Element?
+            )
             emptyArray()
         }
-        return Dependencies(aggregating = context.aggregating || originatingElements.size > 1, sources = sources)
+        return Dependencies(false, sources = sources)
     }
 }
diff --git a/inject-kotlin/src/test/groovy/io/micronaut/kotlin/processing/beans/BeanDefinitionSpec.groovy b/inject-kotlin/src/test/groovy/io/micronaut/kotlin/processing/beans/BeanDefinitionSpec.groovy
index c986eb794a..88f75efc2d 100644
--- a/inject-kotlin/src/test/groovy/io/micronaut/kotlin/processing/beans/BeanDefinitionSpec.groovy
+++ b/inject-kotlin/src/test/groovy/io/micronaut/kotlin/processing/beans/BeanDefinitionSpec.groovy
@@ -3,7 +3,6 @@ package io.micronaut.kotlin.processing.beans
 import io.micronaut.annotation.processing.test.KotlinCompiler
 import io.micronaut.context.annotation.Mapper
 import io.micronaut.context.annotation.Requires
-import io.micronaut.context.env.PropertySource
 import io.micronaut.context.exceptions.NoSuchBeanException
 import io.micronaut.core.annotation.*
 import io.micronaut.core.bind.annotation.Bindable
@@ -638,7 +637,6 @@ class SampleEvent
         cleanup:
         context.close()
     }
-
     void "test @Property targeting field"() {
         given:
         def context = buildContext('''
@@ -1352,57 +1350,4 @@ class Test {
         then:
             definition == null
     }
-
-    void "test @Inject nested config properties"() {
-        given:
-        def context = KotlinCompiler.buildContext('''
-package test
-
-import io.micronaut.context.annotation.ConfigurationProperties
-import jakarta.inject.Inject
-
-@ConfigurationProperties("product-aggregator")
-class NestedConfig {
-
-    @Inject
-    internal var levelOnez = LevelOne()
-
-    @ConfigurationProperties("level-one")
-    internal class LevelOne {
-
-        internal lateinit var levelOneValue: String
-
-        @Inject
-        internal var levelTwo = LevelTwo()
-
-        @ConfigurationProperties("level-two")
-        internal class LevelTwo {
-            lateinit var levelTwoValue: String
-        }
-    }
-}
-
-''')
-        context.getEnvironment().addPropertySource(PropertySource.of([
-                'product-aggregator.level-one.level-one-value': 'ONE',
-                'product-aggregator.level-one.level-two.level-two-value': 'TWO',
-        ]))
-
-        def bean = getBean(context, 'test.NestedConfig')
-        def definition = KotlinCompiler.getBeanDefinition(context, 'test.NestedConfig')
-
-        expect:
-
-//        definition.properties.injectedFields.size() == 1
-//        definition.properties.injectedFields[0].name == "levelOnez"
-
-        bean.levelOnez != null
-        bean.levelOnez.levelOneValue == "ONE"
-        bean.levelOnez.levelTwo
-        bean.levelOnez.levelTwo != null
-        bean.levelOnez.levelTwo.levelTwoValue == "TWO"
-
-        cleanup:
-        context.close()
-    }
 }
diff --git a/inject/src/main/java/io/micronaut/inject/beans/AbstractInitializableBeanIntrospection.java b/inject/src/main/java/io/micronaut/inject/beans/AbstractInitializableBeanIntrospection.java
index 05fad119a7..cab98699d4 100644
--- a/inject/src/main/java/io/micronaut/inject/beans/AbstractInitializableBeanIntrospection.java
+++ b/inject/src/main/java/io/micronaut/inject/beans/AbstractInitializableBeanIntrospection.java
@@ -472,9 +472,11 @@ public abstract class AbstractInitializableBeanIntrospection<B> implements Unsaf
 
             AnnotationValue<Introspected.IntrospectionBuilder> builderAnn = getAnnotationMetadata().findAnnotation(Introspected.class)
                 .flatMap(a -> a.getAnnotation("builder", Introspected.IntrospectionBuilder.class)).orElse(null);
-            if (builderAnn != null) {
-                Class<?> builderClass = getAnnotationMetadata().classValue(Introspected.class, "builderClass").orElse(null);
-                if (builderClass != null) {
+            Class<?> builderClass = getAnnotationMetadata().classValue(Introspected.class, "builderClass").orElse(null);
+            if (builderAnn != null || builderClass != null) {
+                if (builderClass == null) {
+                    throw new IntrospectionException("Introspection defines invalid builder member for type: " + getBeanType());
+                } else {
                     BeanIntrospection<Object> builderIntrospection = (BeanIntrospection<Object>) BeanIntrospection.getIntrospection(builderClass);
                     Collection<BeanMethod<Object, Object>> beanMethods = builderIntrospection.getBeanMethods();
 
@@ -520,8 +522,6 @@ public abstract class AbstractInitializableBeanIntrospection<B> implements Unsaf
                             arguments.toArray(Argument.ZERO_ARGUMENTS)
                         );
                     }
-                } else {
-                    throw new IntrospectionException("Introspection defines invalid builder member for type: " + getBeanType());
                 }
             } else {
                 int constructorLength = constructorArguments.length;
diff --git a/management/src/main/java/io/micronaut/management/endpoint/EndpointConfiguration.java b/management/src/main/java/io/micronaut/management/endpoint/EndpointConfiguration.java
index 0867676538..f62da2ba44 100644
--- a/management/src/main/java/io/micronaut/management/endpoint/EndpointConfiguration.java
+++ b/management/src/main/java/io/micronaut/management/endpoint/EndpointConfiguration.java
@@ -17,6 +17,7 @@ package io.micronaut.management.endpoint;
 
 import io.micronaut.context.annotation.EachProperty;
 import io.micronaut.context.annotation.Parameter;
+import io.micronaut.core.annotation.Nullable;
 
 import java.util.Optional;
 
@@ -33,11 +34,14 @@ public class EndpointConfiguration {
      * The prefix for endpoints configurations.
      */
     public static final String PREFIX = "endpoints";
+    private static final String SLASH = "/";
 
     private Boolean enabled;
     private Boolean sensitive;
-
+    @Nullable
+    private String path;
     private final String id;
+
     private EndpointDefaultConfiguration defaultConfiguration;
 
     /**
@@ -94,4 +98,25 @@ public class EndpointConfiguration {
     public void setSensitive(Boolean sensitive) {
         this.sensitive = sensitive;
     }
+
+    /**
+     * Endpoint's path. If not set the endpoint name is used as the path.
+     * @param path Endpoint's path
+     * @since 4.8.0
+     */
+    public void setPath(@Nullable String path) {
+        this.path = path != null && path.startsWith(SLASH)
+            ? path.substring(1)
+            : path;
+    }
+
+    /**
+     * Endpoint's path. If not set the endpoint name is used as the path.
+     * @return Endpoint's path
+     * @since 4.8.0
+     */
+    @Nullable
+    public String getPath() {
+        return path;
+    }
 }
diff --git a/management/src/main/java/io/micronaut/management/endpoint/processors/AbstractEndpointRouteBuilder.java b/management/src/main/java/io/micronaut/management/endpoint/processors/AbstractEndpointRouteBuilder.java
index dc9beeb08a..ff78d1c80a 100644
--- a/management/src/main/java/io/micronaut/management/endpoint/processors/AbstractEndpointRouteBuilder.java
+++ b/management/src/main/java/io/micronaut/management/endpoint/processors/AbstractEndpointRouteBuilder.java
@@ -17,6 +17,7 @@ package io.micronaut.management.endpoint.processors;
 
 import io.micronaut.context.ApplicationContext;
 import io.micronaut.context.LifeCycle;
+import io.micronaut.context.exceptions.NoSuchBeanException;
 import io.micronaut.context.processor.ExecutableMethodProcessor;
 import io.micronaut.core.annotation.AnnotationMetadata;
 import io.micronaut.core.annotation.Internal;
@@ -29,6 +30,8 @@ import io.micronaut.core.util.StringUtils;
 import io.micronaut.http.uri.UriTemplate;
 import io.micronaut.inject.BeanDefinition;
 import io.micronaut.inject.ExecutableMethod;
+import io.micronaut.inject.qualifiers.Qualifiers;
+import io.micronaut.management.endpoint.EndpointConfiguration;
 import io.micronaut.management.endpoint.EndpointDefaultConfiguration;
 import io.micronaut.management.endpoint.annotation.Endpoint;
 import io.micronaut.management.endpoint.annotation.Selector;
@@ -132,6 +135,11 @@ abstract class AbstractEndpointRouteBuilder extends DefaultRouteBuilder implemen
                 BeanDefinition<?> beanDefinition = opt.get();
                 if (beanDefinition.hasStereotype(Endpoint.class)) {
                     String id = beanDefinition.stringValue(Endpoint.class).orElse(null);
+                    final EndpointConfiguration endpointConfiguration = beanContext.getProvider(EndpointConfiguration.class, Qualifiers.byName(id))
+                        .orElse(null);
+                    if (endpointConfiguration != null && StringUtils.isNotEmpty(endpointConfiguration.getPath())) {
+                        return Optional.of(endpointConfiguration.getPath());
+                    }
                     if (id == null || !ENDPOINT_ID_PATTERN.matcher(id).matches()) {
                         id = NameUtils.hyphenate(beanDefinition.getName());
                     }
diff --git a/management/src/test/groovy/io/micronaut/management/endpoint/health/HealthEndpointCustomPathSpec.groovy b/management/src/test/groovy/io/micronaut/management/endpoint/health/HealthEndpointCustomPathSpec.groovy
new file mode 100644
index 0000000000..d8563b8bf3
--- /dev/null
+++ b/management/src/test/groovy/io/micronaut/management/endpoint/health/HealthEndpointCustomPathSpec.groovy
@@ -0,0 +1,38 @@
+package io.micronaut.management.endpoint.health;
+
+import io.micronaut.context.ApplicationContext
+import io.micronaut.http.HttpRequest
+import io.micronaut.http.client.BlockingHttpClient
+import io.micronaut.http.client.HttpClient
+import io.micronaut.inject.qualifiers.Qualifiers
+import io.micronaut.management.endpoint.EndpointConfiguration;
+import io.micronaut.runtime.server.EmbeddedServer;
+import spock.lang.Specification
+import spock.lang.Unroll;
+
+class HealthEndpointCustomPathSpec extends Specification {
+
+    @Unroll
+    void "health path can be changed"(String path) {
+        given:
+        EmbeddedServer server = ApplicationContext.run(EmbeddedServer.class, [
+                "endpoints.health.path": path
+        ])
+        expect:
+        path.substring(1) == server.applicationContext.getBean(EndpointConfiguration.class, Qualifiers.byName("health")).getPath()
+
+        when:
+        HttpClient httpClient = server.applicationContext.createBean(HttpClient, server.getURL())
+        BlockingHttpClient client = httpClient.toBlocking()
+        client.exchange(HttpRequest.GET(path))
+        then:
+        noExceptionThrown()
+        cleanup:
+        client.close()
+        httpClient.close()
+        server.close()
+
+        where:
+        path << ["/up", "/health/check"]
+    }
+}
diff --git a/router/src/main/java/io/micronaut/web/router/DefaultUriRouteMatch.java b/router/src/main/java/io/micronaut/web/router/DefaultUriRouteMatch.java
index b7d6cb8905..421b9a151a 100644
--- a/router/src/main/java/io/micronaut/web/router/DefaultUriRouteMatch.java
+++ b/router/src/main/java/io/micronaut/web/router/DefaultUriRouteMatch.java
@@ -42,7 +42,6 @@ public final class DefaultUriRouteMatch<T, R> extends AbstractRouteMatch<T, R> i
     private final UriRouteInfo<T, R> uriRouteInfo;
     private final Charset defaultCharset;
     private Map<String, Object> variables;
-
     /**
      * @param matchInfo The URI match info
      * @param routeInfo The URI route
diff --git a/settings.gradle b/settings.gradle
index 5a796e2eec..6c565976e5 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -6,7 +6,7 @@ pluginManagement {
 }
 
 plugins {
-    id 'io.micronaut.build.shared.settings' version '7.2.3'
+    id 'io.micronaut.build.shared.settings' version '7.3.0'
 }
 enableFeaturePreview("TYPESAFE_PROJECT_ACCESSORS")
 
diff --git a/src/main/docs/guide/config.adoc b/src/main/docs/guide/config.adoc
index cb7c3ebf90..5d3b92313f 100644
--- a/src/main/docs/guide/config.adoc
+++ b/src/main/docs/guide/config.adoc
@@ -1,6 +1,6 @@
 Micronaut features a flexible configuration mechanism that allows reading configuration from a variety of sources into a unified model that can be bound to Java types annotated with <<configurationProperties, @ConfigurationProperties>>.
 
-Configuration can by default be provided in Java properties files or https://www.json.org/json-en.html[JSON] with the ability to add support for more formats (such as YAML or Groovy configuration) by adding addition third-party libraries to your classpath. The convention is to search for a file named `application.properties` or `application.json` with support for other formats requiring additional dependencies as described by the following table:
+Configuration can by default be provided in Java properties files or https://www.json.org/json-en.html[JSON] with the ability to add support for more formats (such as YAML or Groovy configuration) by adding additional third-party libraries to your classpath. The convention is to search for a file named `application.properties` or `application.json` with support for other formats requiring additional dependencies as described by the following table:
 
 .Supported Configuration Formats
 |===
diff --git a/test-suite/src/test/java/io/micronaut/test/lombok/LombokIntrospectedBuilderTest.java b/test-suite/src/test/java/io/micronaut/test/lombok/LombokIntrospectedBuilderTest.java
index ebcab5b050..76f1f54290 100644
--- a/test-suite/src/test/java/io/micronaut/test/lombok/LombokIntrospectedBuilderTest.java
+++ b/test-suite/src/test/java/io/micronaut/test/lombok/LombokIntrospectedBuilderTest.java
@@ -1,9 +1,14 @@
 package io.micronaut.test.lombok;
 
+import static org.junit.jupiter.api.Assertions.assertEquals;
+
 import io.micronaut.core.beans.BeanIntrospection;
 import org.junit.jupiter.api.Assertions;
 import org.junit.jupiter.api.Test;
 
+import java.time.Instant;
+import java.util.UUID;
+
 public class LombokIntrospectedBuilderTest {
 
     @Test
@@ -14,6 +19,44 @@ public class LombokIntrospectedBuilderTest {
         RobotEntity robotEntity = builder.with("name", "foo")
             .build();
 
-        Assertions.assertEquals("foo", robotEntity.getName());
+        assertEquals("foo", robotEntity.getName());
+    }
+
+    @Test
+    void testLombokBuilder2() {
+        BeanIntrospection.Builder<MyEntity> builder = BeanIntrospection.getIntrospection(MyEntity.class)
+            .builder();
+        MyEntity.MyEntityBuilder builder1 = MyEntity.builder();
+        builder.with("name", "foo");
+        builder.with("id", "123");
+        MyEntity myEntity = builder.build();
+        assertEquals("foo", myEntity.getName());
+        assertEquals("123", myEntity.getId());
+    }
+
+    @Test
+    void testLombokBuilderWithInnerClasses() {
+        BeanIntrospection.Builder<SimpleEntity> builder = BeanIntrospection.getIntrospection(SimpleEntity.class)
+            .builder();
+
+        String id = UUID.randomUUID().toString();
+        SimpleEntity simpleEntity = builder.with("id", id)
+            .build();
+
+        assertEquals(id, simpleEntity.getId());
+
+        BeanIntrospection<SimpleEntity.CompartmentCreationTimeIndexPrefix> innerClassIntrospection =
+            BeanIntrospection.getIntrospection(SimpleEntity.CompartmentCreationTimeIndexPrefix.class);
+        Assertions.assertNotNull(innerClassIntrospection);
+
+        BeanIntrospection.Builder<SimpleEntity.CompartmentCreationTimeIndexPrefix> innerClassBuilder =
+            innerClassIntrospection.builder();
+
+        long current = Instant.now().toEpochMilli();
+        SimpleEntity.CompartmentCreationTimeIndexPrefix innerClassEntity =
+            innerClassBuilder.with("compartmentId", "c1").with("timeCreated", current).build();
+
+        assertEquals("c1", innerClassEntity.getCompartmentId());
+        assertEquals(current, innerClassEntity.getTimeCreated());
     }
 }
diff --git a/test-suite/src/test/java/io/micronaut/test/lombok/MyEntity.java b/test-suite/src/test/java/io/micronaut/test/lombok/MyEntity.java
new file mode 100644
index 0000000000..a91af297fc
--- /dev/null
+++ b/test-suite/src/test/java/io/micronaut/test/lombok/MyEntity.java
@@ -0,0 +1,19 @@
+package io.micronaut.test.lombok;
+
+
+import io.micronaut.core.annotation.Introspected;
+import lombok.Builder;
+import lombok.Value;
+
+@Introspected
+@Value
+@Builder
+public class MyEntity {
+    public static final String NAME_INDEX = "name";
+
+    @lombok.NonNull
+    String id;
+
+    @lombok.NonNull
+    String name;
+}
diff --git a/test-suite/src/test/java/io/micronaut/test/lombok/SimpleEntity.java b/test-suite/src/test/java/io/micronaut/test/lombok/SimpleEntity.java
new file mode 100644
index 0000000000..6a7651fe73
--- /dev/null
+++ b/test-suite/src/test/java/io/micronaut/test/lombok/SimpleEntity.java
@@ -0,0 +1,42 @@
+package io.micronaut.test.lombok;
+
+import io.micronaut.core.annotation.Introspected;
+import io.micronaut.core.annotation.NonNull;
+import lombok.AllArgsConstructor;
+import lombok.Data;
+import lombok.Value;
+
+@lombok.Builder(builderClassName = "Builder")
+@Data
+@Introspected(builder = @Introspected.IntrospectionBuilder(builderClass = SimpleEntity.Builder.class))
+@AllArgsConstructor
+public class SimpleEntity {
+
+    @NonNull
+    private String id;
+
+    private String displayName;
+
+    @NonNull
+    private String compartmentId;
+
+    @NonNull
+    private String state;
+
+    @NonNull
+    private Long timeCreated;
+
+    @NonNull
+    private Long timeUpdated;
+
+    @Value
+    @Introspected(builder = @Introspected.IntrospectionBuilder(builderClass = CompartmentCreationTimeIndexPrefix.Builder.class))
+    @lombok.Builder(builderClassName = "Builder")
+    public static class CompartmentCreationTimeIndexPrefix {
+
+        String compartmentId;
+
+        Long timeCreated;
+    }
+}
+
