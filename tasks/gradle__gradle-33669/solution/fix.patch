diff --git a/platforms/core-runtime/base-services/src/main/java/org/gradle/util/Path.java b/platforms/core-runtime/base-services/src/main/java/org/gradle/util/Path.java
index 2ff901181d2..caaf7cc4615 100644
--- a/platforms/core-runtime/base-services/src/main/java/org/gradle/util/Path.java
+++ b/platforms/core-runtime/base-services/src/main/java/org/gradle/util/Path.java
@@ -74,6 +74,8 @@ private static Path parsePath(String path) {
     private volatile String fullPath;
 
     private Path(String[] segments, boolean absolute) {
+        assert !(segments.length == 0 && !absolute) : "Empty relative paths are forbidden";
+
         this.segments = segments;
         this.absolute = absolute;
 
@@ -98,9 +100,18 @@ public String toString() {
      * </pre>
      */
     public Path append(Path path) {
+        if (segments.length == 0) {
+            if (absolute == path.absolute) {
+                return path;
+            } else {
+                return new Path(path.segments, absolute);
+            }
+        }
+
         if (path.segments.length == 0) {
             return this;
         }
+
         String[] concat = new String[segments.length + path.segments.length];
         System.arraycopy(segments, 0, concat, 0, segments.length);
         System.arraycopy(path.segments, 0, concat, segments.length, path.segments.length);
diff --git a/platforms/extensibility/unit-test-fixtures/src/main/java/org/gradle/testfixtures/internal/ProjectBuilderImpl.java b/platforms/extensibility/unit-test-fixtures/src/main/java/org/gradle/testfixtures/internal/ProjectBuilderImpl.java
index f9f02325a9f..aed48723e98 100644
--- a/platforms/extensibility/unit-test-fixtures/src/main/java/org/gradle/testfixtures/internal/ProjectBuilderImpl.java
+++ b/platforms/extensibility/unit-test-fixtures/src/main/java/org/gradle/testfixtures/internal/ProjectBuilderImpl.java
@@ -303,11 +303,6 @@ public boolean isImplicitBuild() {
             return false;
         }
 
-        @Override
-        public Path calculateIdentityPathForProject(Path projectPath) {
-            return projectPath;
-        }
-
         @Override
         public StartParameterInternal getStartParameter() {
             throw new UnsupportedOperationException();
diff --git a/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultIncludedBuild.java b/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultIncludedBuild.java
index c842d7766ff..c355863fd32 100644
--- a/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultIncludedBuild.java
+++ b/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultIncludedBuild.java
@@ -121,11 +121,6 @@ public File getBuildRootDir() {
         return buildDefinition.getBuildRootDir();
     }
 
-    @Override
-    public Path calculateIdentityPathForProject(Path projectPath) {
-        return getIdentityPath().append(projectPath);
-    }
-
     @Override
     public Action<? super DependencySubstitutions> getRegisteredDependencySubstitutions() {
         return buildDefinition.getDependencySubstitutions();
diff --git a/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultNestedBuild.java b/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultNestedBuild.java
index 87c14a9a55a..106cac406b8 100644
--- a/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultNestedBuild.java
+++ b/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultNestedBuild.java
@@ -110,11 +110,6 @@ public <T> T run(Function<? super BuildTreeLifecycleController, T> buildAction)
         return buildAction.apply(buildTreeLifecycleController);
     }
 
-    @Override
-    public Path calculateIdentityPathForProject(Path projectPath) {
-        return getBuildController().getGradle().getIdentityPath().append(projectPath);
-    }
-
     @Override
     public File getBuildRootDir() {
         return buildDefinition.getBuildRootDir();
diff --git a/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultRootBuildState.java b/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultRootBuildState.java
index df256c919b3..32ffefc5b7f 100644
--- a/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultRootBuildState.java
+++ b/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/DefaultRootBuildState.java
@@ -141,11 +141,6 @@ public StartParameterInternal getStartParameter() {
         return getBuildController().getGradle().getStartParameter();
     }
 
-    @Override
-    public Path calculateIdentityPathForProject(Path path) {
-        return path;
-    }
-
     @Override
     protected void ensureChildBuildConfigured() {
         // nothing to do for the root build
diff --git a/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/RootOfNestedBuildTree.java b/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/RootOfNestedBuildTree.java
index 9307438176f..64ffb31d60c 100644
--- a/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/RootOfNestedBuildTree.java
+++ b/subprojects/composite-builds/src/main/java/org/gradle/composite/internal/RootOfNestedBuildTree.java
@@ -108,11 +108,6 @@ public boolean isImplicitBuild() {
         return false;
     }
 
-    @Override
-    public Path calculateIdentityPathForProject(Path projectPath) {
-        return getBuildController().getGradle().getIdentityPath().append(projectPath);
-    }
-
     @Override
     public File getBuildRootDir() {
         return getBuildController().getGradle().getServices().get(BuildLayout.class).getRootDirectory();
diff --git a/subprojects/core/src/main/java/org/gradle/api/internal/GradleInternal.java b/subprojects/core/src/main/java/org/gradle/api/internal/GradleInternal.java
index 549481bb36b..3d46ea0e5be 100644
--- a/subprojects/core/src/main/java/org/gradle/api/internal/GradleInternal.java
+++ b/subprojects/core/src/main/java/org/gradle/api/internal/GradleInternal.java
@@ -128,6 +128,8 @@ public interface GradleInternal extends Gradle, PluginAwareInternal {

     /**
      * Returns a unique path for this build within the current Gradle invocation.
+     * <p>
+     * Prefer {@link BuildState#getIdentityPath()}.
      */
     Path getIdentityPath();

diff --git a/subprojects/core/src/main/java/org/gradle/internal/build/BuildState.java b/subprojects/core/src/main/java/org/gradle/internal/build/BuildState.java
index 5c6578f91bf..a5d43ac2fc4 100644
--- a/subprojects/core/src/main/java/org/gradle/internal/build/BuildState.java
+++ b/subprojects/core/src/main/java/org/gradle/internal/build/BuildState.java
@@ -60,7 +60,9 @@ public interface BuildState {
     /**
      * Calculates the identity path for a project in this build.
      */
-    Path calculateIdentityPathForProject(Path projectPath) throws IllegalStateException;
+    default Path calculateIdentityPathForProject(Path projectPath) {
+        return getIdentityPath().append(projectPath);
+    }

