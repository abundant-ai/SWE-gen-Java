diff --git a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/AdapterGenerator.kt b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/AdapterGenerator.kt
index a5dbbdd6..ac76ae82 100644
--- a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/AdapterGenerator.kt
+++ b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/AdapterGenerator.kt
@@ -49,7 +49,7 @@ internal class AdapterGenerator(
 ) {
   private val className = target.name
   private val isDataClass = target.proto.isDataClass
-  private val hasCompanionObject = target.hasCompanionObject
+  private val companionObjectName = target.companionObjectName
   private val visibility = target.proto.visibility!!
   private val typeVariables = target.typeVariables
 
@@ -94,8 +94,8 @@ internal class AdapterGenerator(
 
     val result = FileSpec.builder(className.packageName(), adapterName)
     result.addComment("Code generated by moshi-kotlin-codegen. Do not edit.")
-    if (hasCompanionObject) {
-      result.addFunction(generateJsonAdapterFun())
+    companionObjectName?.let {
+      result.addFunction(generateJsonAdapterFun(it))
     }
     result.addType(generateType(messager, generatedOption))
     return result.build()
@@ -312,7 +312,7 @@ internal class AdapterGenerator(
     return result.build()
   }
 
-  private fun generateJsonAdapterFun(): FunSpec {
+  private fun generateJsonAdapterFun(name: String): FunSpec {
     val rawType = when (originalTypeName) {
       is TypeVariableName -> throw IllegalArgumentException("Cannot get raw type of TypeVariable!")
       is ParameterizedTypeName -> originalTypeName.rawType
@@ -320,7 +320,7 @@ internal class AdapterGenerator(
     }
 
     val result = FunSpec.builder("jsonAdapter")
-        .receiver(rawType.nestedClass("Companion"))
+        .receiver(rawType.nestedClass(name))
         .returns(jsonAdapterTypeName)
         .addParameter(moshiParam)
 
diff --git a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/TargetType.kt b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/TargetType.kt
index c354bff3..3a9aa470 100644
--- a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/TargetType.kt
+++ b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/TargetType.kt
@@ -53,10 +53,10 @@ internal data class TargetType(
   val element: TypeElement,
   val constructor: TargetConstructor,
   val properties: Map<String, TargetProperty>,
-  val typeVariables: List<TypeVariableName>
+  val typeVariables: List<TypeVariableName>,
+  val companionObjectName: String?
 ) {
   val name = element.className
-  val hasCompanionObject = proto.hasCompanionObjectName()
 
   companion object {
     private val OBJECT_CLASS = ClassName("java.lang", "Object")
@@ -129,7 +129,12 @@ internal data class TargetType(
           properties.putIfAbsent(name, property)
         }
       }
-      return TargetType(proto, element, constructor, properties, typeVariables)
+      val companionObjectName = if (proto.hasCompanionObjectName()) {
+        typeMetadata.data.nameResolver.getQualifiedClassName(proto.companionObjectName)
+      } else {
+        null
+      }
+      return TargetType(proto, element, constructor, properties, typeVariables, companionObjectName)
     }
 
     /** Returns the properties declared by `typeElement`. */
