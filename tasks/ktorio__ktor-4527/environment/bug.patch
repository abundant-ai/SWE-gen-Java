diff --git a/ktor-server/ktor-server-servlet-jakarta/jvm/src/io/ktor/server/servlet/jakarta/ServletWriter.kt b/ktor-server/ktor-server-servlet-jakarta/jvm/src/io/ktor/server/servlet/jakarta/ServletWriter.kt
index 8f7064cad..0ae7716ad 100644
--- a/ktor-server/ktor-server-servlet-jakarta/jvm/src/io/ktor/server/servlet/jakarta/ServletWriter.kt
+++ b/ktor-server/ktor-server-servlet-jakarta/jvm/src/io/ktor/server/servlet/jakarta/ServletWriter.kt
@@ -77,7 +77,7 @@ private class ServletWriter(val output: ServletOutputStream) : WriteListener {
                 }
 
                 awaitReady()
-                output.write(buffer, start, rc)
+                output.write(buffer, 0, rc)
                 awaitReady()
                 rc
             }
diff --git a/ktor-server/ktor-server-servlet-jakarta/jvm/test/io/ktor/tests/servlet/jakarta/ServletWriterJakartaTest.kt b/ktor-server/ktor-server-servlet-jakarta/jvm/test/io/ktor/tests/servlet/jakarta/ServletWriterJakartaTest.kt
deleted file mode 100644
index 0a70b3e46..000000000
--- a/ktor-server/ktor-server-servlet-jakarta/jvm/test/io/ktor/tests/servlet/jakarta/ServletWriterJakartaTest.kt
+++ /dev/null
@@ -1,55 +0,0 @@
-/*
- * Copyright 2014-2024 JetBrains s.r.o and contributors. Use of this source code is governed by the Apache 2.0 license.
- */
-
-package io.ktor.tests.servlet.jakarta
-
-import io.ktor.server.servlet.*
-import io.ktor.server.servlet.jakarta.servletWriter
-import io.ktor.utils.io.*
-import io.ktor.utils.io.core.*
-import jakarta.servlet.ServletOutputStream
-import jakarta.servlet.WriteListener
-import kotlinx.coroutines.coroutineScope
-import kotlinx.coroutines.runBlocking
-import kotlinx.io.readByteArray
-import kotlin.test.Test
-import kotlin.test.assertEquals
-
-class ServletWriterJakartaTest {
-
-    @Test
-    fun testWriteBufferWithPositivePosition() = runBlocking {
-        val content = withServletWriter {
-            val buffer = ByteReadPacket("1234567890".toByteArray())
-            buffer.readByte()
-
-            writeBuffer(buffer)
-            flushAndClose()
-        }
-
-        assertEquals("234567890", content.decodeToString())
-    }
-
-    suspend fun withServletWriter(block: suspend ByteWriteChannel.() -> Unit): ByteArray {
-        val content = BytePacketBuilder()
-        val output = object : ServletOutputStream() {
-            override fun isReady(): Boolean = true
-            override fun setWriteListener(writeListener: WriteListener) {
-                writeListener.onWritePossible()
-            }
-
-            override fun write(b: Int) {
-                content.writeByte((b and 0xff).toByte())
-            }
-        }
-
-        coroutineScope {
-            val channel = servletWriter(output).channel
-            block(channel)
-            channel.flushAndClose()
-        }
-
-        return content.build().readByteArray()
-    }
-}
diff --git a/ktor-server/ktor-server-servlet/jvm/src/io/ktor/server/servlet/ServletWriter.kt b/ktor-server/ktor-server-servlet/jvm/src/io/ktor/server/servlet/ServletWriter.kt
index ae706de56..6e3298e40 100644
--- a/ktor-server/ktor-server-servlet/jvm/src/io/ktor/server/servlet/ServletWriter.kt
+++ b/ktor-server/ktor-server-servlet/jvm/src/io/ktor/server/servlet/ServletWriter.kt
@@ -77,7 +77,7 @@ private class ServletWriter(val output: ServletOutputStream) : WriteListener {
                 }
 
                 awaitReady()
-                output.write(buffer, start, rc)
+                output.write(buffer, 0, rc)
                 awaitReady()
                 rc
             }
diff --git a/ktor-server/ktor-server-servlet/jvm/test/io/ktor/tests/servlet/ServletWriterTest.kt b/ktor-server/ktor-server-servlet/jvm/test/io/ktor/tests/servlet/ServletWriterTest.kt
deleted file mode 100644
index 6c5dea883..000000000
--- a/ktor-server/ktor-server-servlet/jvm/test/io/ktor/tests/servlet/ServletWriterTest.kt
+++ /dev/null
@@ -1,55 +0,0 @@
-/*
- * Copyright 2014-2024 JetBrains s.r.o and contributors. Use of this source code is governed by the Apache 2.0 license.
- */
-
-package io.ktor.tests.servlet
-
-import io.ktor.server.servlet.*
-import io.ktor.utils.io.*
-import io.ktor.utils.io.core.*
-import kotlinx.coroutines.coroutineScope
-import kotlinx.coroutines.runBlocking
-import kotlinx.io.readByteArray
-import javax.servlet.ServletOutputStream
-import javax.servlet.WriteListener
-import kotlin.test.Test
-import kotlin.test.assertEquals
-
-class ServletWriterTest {
-
-    @Test
-    fun testWriteBufferWithPositivePosition() = runBlocking {
-        val content = withServletWriter {
-            val buffer = ByteReadPacket("1234567890".toByteArray())
-            buffer.readByte()
-
-            writeBuffer(buffer)
-            flushAndClose()
-        }
-
-        assertEquals("234567890", content.decodeToString())
-    }
-
-    suspend fun withServletWriter(block: suspend ByteWriteChannel.() -> Unit): ByteArray {
-        val content = BytePacketBuilder()
-        val output = object : ServletOutputStream() {
-            override fun isReady(): Boolean = true
-
-            override fun setWriteListener(writeListener: WriteListener) {
-                writeListener.onWritePossible()
-            }
-
-            override fun write(b: Int) {
-                content.writeByte((b and 0xff).toByte())
-            }
-        }
-
-        coroutineScope {
-            val channel = servletWriter(output).channel
-            block(channel)
-            channel.flushAndClose()
-        }
-
-        return content.build().readByteArray()
-    }
-}
diff --git a/ktor-server/ktor-server-tests/build.gradle.kts b/ktor-server/ktor-server-tests/build.gradle.kts
index 2f7e66c29..29c7a5681 100644
--- a/ktor-server/ktor-server-tests/build.gradle.kts
+++ b/ktor-server/ktor-server-tests/build.gradle.kts
@@ -15,7 +15,6 @@ kotlin.sourceSets {
     jvmTest {
         dependencies {
             implementation(libs.jansi)
-            implementation(project(":ktor-client:ktor-client-plugins:ktor-client-encoding"))
             api(project(":ktor-server:ktor-server-core", configuration = "testOutput"))
             api(libs.logback.classic)
             api(project(":ktor-server:ktor-server-plugins:ktor-server-sse"))
diff --git a/ktor-server/ktor-server-tests/jvm/test/io/ktor/server/plugins/CompressionTest.kt b/ktor-server/ktor-server-tests/jvm/test/io/ktor/server/plugins/CompressionTest.kt
index 4277b345e..9c979b8e3 100644
--- a/ktor-server/ktor-server-tests/jvm/test/io/ktor/server/plugins/CompressionTest.kt
+++ b/ktor-server/ktor-server-tests/jvm/test/io/ktor/server/plugins/CompressionTest.kt
@@ -22,16 +22,11 @@ import io.ktor.server.testing.*
 import io.ktor.util.*
 import io.ktor.utils.io.*
 import io.ktor.utils.io.jvm.javaio.*
-import kotlinx.coroutines.Job
-import kotlinx.coroutines.coroutineScope
-import kotlinx.coroutines.launch
-import kotlinx.io.readByteArray
-import java.time.ZoneId
-import java.time.ZonedDateTime
-import java.util.zip.GZIPInputStream
-import java.util.zip.Inflater
-import java.util.zip.InflaterInputStream
-import kotlin.coroutines.CoroutineContext
+import kotlinx.coroutines.*
+import kotlinx.io.*
+import java.time.*
+import java.util.zip.*
+import kotlin.coroutines.*
 import kotlin.test.*
 
 class CompressionTest {
