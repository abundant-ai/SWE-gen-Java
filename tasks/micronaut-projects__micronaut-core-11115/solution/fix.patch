diff --git a/gradle.properties b/gradle.properties
index a415efaa67..cfa6c8c104 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -1,4 +1,4 @@
-projectVersion=4.6.4-SNAPSHOT
+projectVersion=4.6.3-SNAPSHOT
 projectGroupId=io.micronaut
 projectDesc=Core components supporting the Micronaut Framework
 title=Micronaut Core
diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
index 07c85e5ba1..3fb363bbd4 100644
--- a/gradle/libs.versions.toml
+++ b/gradle/libs.versions.toml
@@ -37,7 +37,7 @@ logback = "1.5.7"
 logbook-netty = "2.16.0"
 log4j = "2.23.1"
 micronaut-aws = "4.6.0"
-micronaut-build-plugins="7.2.1"
+micronaut-build-plugins="7.2.0"
 micronaut-groovy = "4.3.0"
 micronaut-session = "4.3.0"
 micronaut-sql = "5.3.0"
diff --git a/gradle/wrapper/gradle-wrapper.jar b/gradle/wrapper/gradle-wrapper.jar
index a4b76b9530..2c3521197d 100644
Binary files a/gradle/wrapper/gradle-wrapper.jar and b/gradle/wrapper/gradle-wrapper.jar differ
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 9355b41557..09523c0e54 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-8.10-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-8.9-bin.zip
 networkTimeout=10000
 validateDistributionUrl=true
 zipStoreBase=GRADLE_USER_HOME
diff --git a/http-netty/src/main/java/io/micronaut/http/netty/body/NettyJsonHandler.java b/http-netty/src/main/java/io/micronaut/http/netty/body/NettyJsonHandler.java
index ccee0728d6..019c94cb9e 100644
--- a/http-netty/src/main/java/io/micronaut/http/netty/body/NettyJsonHandler.java
+++ b/http-netty/src/main/java/io/micronaut/http/netty/body/NettyJsonHandler.java
@@ -20,7 +20,6 @@ import io.micronaut.context.annotation.Replaces;
 import io.micronaut.context.annotation.Requires;
 import io.micronaut.core.annotation.Internal;
 import io.micronaut.core.annotation.NonNull;
-import io.micronaut.core.annotation.Order;
 import io.micronaut.core.io.buffer.ByteBuffer;
 import io.micronaut.core.io.buffer.ByteBufferFactory;
 import io.micronaut.core.type.Argument;
@@ -57,7 +56,6 @@ import java.io.OutputStream;
  *
  * @param <T> The type
  */
-@Order(JsonMessageHandler.ORDER)
 @Singleton
 @Internal
 @Replaces(JsonMessageHandler.class)
diff --git a/http-server-netty/src/main/java/io/micronaut/http/server/netty/body/InputStreamBodyWriter.java b/http-server-netty/src/main/java/io/micronaut/http/server/netty/body/InputStreamBodyWriter.java
index 04789a8456..b3ace0b391 100644
--- a/http-server-netty/src/main/java/io/micronaut/http/server/netty/body/InputStreamBodyWriter.java
+++ b/http-server-netty/src/main/java/io/micronaut/http/server/netty/body/InputStreamBodyWriter.java
@@ -31,6 +31,7 @@ import io.micronaut.http.netty.body.NettyWriteContext;
 import io.micronaut.http.server.netty.configuration.NettyHttpServerConfiguration;
 import io.micronaut.scheduling.TaskExecutors;
 import io.netty.handler.codec.http.DefaultHttpResponse;
+import io.netty.handler.codec.http.HttpHeaderNames;
 import jakarta.inject.Named;
 import jakarta.inject.Singleton;
 
@@ -58,6 +59,7 @@ public final class InputStreamBodyWriter extends AbstractFileBodyWriter implemen
 
     @Override
     public void writeTo(HttpRequest<?> request, MutableHttpResponse<InputStream> outgoingResponse, Argument<InputStream> type, MediaType mediaType, InputStream object, NettyWriteContext nettyContext) throws CodecException {
+        outgoingResponse.getHeaders().setIfMissing(HttpHeaderNames.CONTENT_TYPE, mediaType);
         if (outgoingResponse instanceof NettyMutableHttpResponse<?> nettyResponse) {
             final DefaultHttpResponse finalResponse = new DefaultHttpResponse(
                 nettyResponse.getNettyHttpVersion(),
diff --git a/http-server-netty/src/main/java/io/micronaut/http/server/netty/body/NettyBodyAdapter.java b/http-server-netty/src/main/java/io/micronaut/http/server/netty/body/NettyBodyAdapter.java
index 6e6649add0..05a5d85ff2 100644
--- a/http-server-netty/src/main/java/io/micronaut/http/server/netty/body/NettyBodyAdapter.java
+++ b/http-server-netty/src/main/java/io/micronaut/http/server/netty/body/NettyBodyAdapter.java
@@ -115,10 +115,10 @@ public final class NettyBodyAdapter implements BufferConsumer.Upstream, Subscrib
     @Override
     public void onSubscribe(Subscription s) {
         this.subscription = s;
+        long demand = this.demand.get();
+        s.request(demand);
         if (cancelled) {
             s.cancel();
-        } else {
-            s.request(1);
         }
     }
 
@@ -130,11 +130,8 @@ public final class NettyBodyAdapter implements BufferConsumer.Upstream, Subscrib
     }
 
     private void onNext0(ByteBuf bytes) {
-        long newDemand = demand.addAndGet(-bytes.readableBytes());
+        demand.addAndGet(-bytes.readableBytes());
         sharedBuffer.add(bytes);
-        if (newDemand > 0) {
-            subscription.request(1);
-        }
     }
 
     @Override
diff --git a/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/MultiplexedServerHandler.java b/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/MultiplexedServerHandler.java
index 34adb5b5fb..c27b9474a5 100644
--- a/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/MultiplexedServerHandler.java
+++ b/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/MultiplexedServerHandler.java
@@ -298,9 +298,11 @@ abstract class MultiplexedServerHandler {
                     }
 
                     private void complete0() {
-                        if (finish()) {
+                        if (!responseDone) {
                             writeData(Unpooled.EMPTY_BUFFER, true, ctx.voidPromise());
-                            flush();
+                            if (finish()) {
+                                flush();
+                            }
                         }
                     }
 
diff --git a/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/PipeliningServerHandler.java b/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/PipeliningServerHandler.java
index bda0d6d987..195ecc08da 100644
--- a/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/PipeliningServerHandler.java
+++ b/http-server-netty/src/main/java/io/micronaut/http/server/netty/handler/PipeliningServerHandler.java
@@ -1108,8 +1108,9 @@ public final class PipeliningServerHandler extends ChannelInboundHandlerAdapter
             }
 
             if (!removed) {
+                int n = buf.readableBytes();
                 writeCompressing(new DefaultHttpContent(buf), true, false);
-                incompleteWrittenBytes += buf.readableBytes();
+                incompleteWrittenBytes += n;
                 if (ctx.channel().isWritable()) {
                     writeSome();
                 }
diff --git a/http/src/main/java/io/micronaut/http/MediaType.java b/http/src/main/java/io/micronaut/http/MediaType.java
index a6f398d5b1..97e7352934 100644
--- a/http/src/main/java/io/micronaut/http/MediaType.java
+++ b/http/src/main/java/io/micronaut/http/MediaType.java
@@ -886,38 +886,11 @@ public class MediaType implements CharSequence {
         if (expectedContentType == this) {
             return true;
         }
-        return matchesType(expectedContentType.getType()) && matchesSubtype(expectedContentType.getSubtype());
-    }
-
-    /**
-     * Check if the subtype matches.
-     *
-     * @param matchSubtype The subtype to match
-     * @return true if matches
-     * @since 4.6.3
-     */
-    public boolean matchesSubtype(String matchSubtype) {
-        return subtype.equals(WILDCARD) || subtype.equalsIgnoreCase(matchSubtype);
-    }
-
-    /**
-     * Check if the type matches.
-     * @param matchType The type to match
-     * @return true if matches
-     * @since 4.6.3
-     */
-    public boolean matchesType(String matchType) {
-        return type.equals(WILDCARD) || type.equalsIgnoreCase(matchType);
-    }
-
-    /**
-     * Check if the extension matches.
-     * @param matchExtension The extension to match
-     * @return true if matches
-     * @since 4.6.3
-     */
-    public boolean matchesExtension(String matchExtension) {
-        return extension.equalsIgnoreCase(ALL_TYPE.extension) || extension.equals(WILDCARD) || extension.equalsIgnoreCase(matchExtension);
+        String expectedType = expectedContentType.getType();
+        String expectedSubtype = expectedContentType.getSubtype();
+        boolean typeMatch = type.equals(WILDCARD) || type.equalsIgnoreCase(expectedType);
+        boolean subtypeMatch = subtype.equals(WILDCARD) || subtype.equalsIgnoreCase(expectedSubtype);
+        return typeMatch && subtypeMatch;
     }
 
     /**
diff --git a/http/src/main/java/io/micronaut/http/body/DefaultMessageBodyHandlerRegistry.java b/http/src/main/java/io/micronaut/http/body/DefaultMessageBodyHandlerRegistry.java
index 7e64572407..0c72a2df53 100644
--- a/http/src/main/java/io/micronaut/http/body/DefaultMessageBodyHandlerRegistry.java
+++ b/http/src/main/java/io/micronaut/http/body/DefaultMessageBodyHandlerRegistry.java
@@ -134,7 +134,6 @@ public final class DefaultMessageBodyHandlerRegistry extends AbstractMessageBody
         @Override
         public <K extends BeanType<T>> Collection<K> filter(Class<T> beanType, Collection<K> candidates) {
             List<K> all = new ArrayList<>(candidates.size());
-            candidatesLoop:
             for (K candidate : candidates) {
                 String[] applicableTypes = candidate.getAnnotationMetadata().stringValues(annotationType);
                 if (applicableTypes.length == 0) {
@@ -142,12 +141,9 @@ public final class DefaultMessageBodyHandlerRegistry extends AbstractMessageBody
                     continue;
                 }
                 for (String mt : applicableTypes) {
-                    MediaType mediaType = new MediaType(mt);
-                    for (MediaType m : mediaTypes) {
-                        if (m.matches(mediaType)) {
-                            all.add(candidate);
-                            continue candidatesLoop;
-                        }
+                    if (mediaTypes.contains(new MediaType(mt))) {
+                        all.add(candidate);
+                        break;
                     }
                 }
             }
diff --git a/http/src/main/java/io/micronaut/http/body/TextPlainObjectBodyReader.java b/http/src/main/java/io/micronaut/http/body/TextPlainObjectBodyReader.java
index 51bd22f8fe..75eebb3273 100644
--- a/http/src/main/java/io/micronaut/http/body/TextPlainObjectBodyReader.java
+++ b/http/src/main/java/io/micronaut/http/body/TextPlainObjectBodyReader.java
@@ -62,7 +62,7 @@ public final class TextPlainObjectBodyReader<T> implements TypedMessageBodyReade
 
     @Override
     public boolean isReadable(Argument<T> type, MediaType mediaType) {
-        return mediaType != null && mediaType.matches(MediaType.TEXT_PLAIN_TYPE);
+        return mediaType == MediaType.TEXT_PLAIN_TYPE;
     }
 
     @Override
diff --git a/json-core/src/main/java/io/micronaut/json/body/JsonMessageHandler.java b/json-core/src/main/java/io/micronaut/json/body/JsonMessageHandler.java
index 505ffd9e3c..878b235d50 100644
--- a/json-core/src/main/java/io/micronaut/json/body/JsonMessageHandler.java
+++ b/json-core/src/main/java/io/micronaut/json/body/JsonMessageHandler.java
@@ -18,7 +18,6 @@ package io.micronaut.json.body;
 import io.micronaut.context.annotation.BootstrapContextCompatible;
 import io.micronaut.core.annotation.Experimental;
 import io.micronaut.core.annotation.NonNull;
-import io.micronaut.core.annotation.Order;
 import io.micronaut.core.io.buffer.ByteBuffer;
 import io.micronaut.core.io.buffer.ReferenceCounted;
 import io.micronaut.core.type.Argument;
@@ -53,7 +52,6 @@ import static java.lang.annotation.RetentionPolicy.RUNTIME;
  * @author Jonas Konrad
  * @since 4.0.0
  */
-@Order(JsonMessageHandler.ORDER)
 @Experimental
 @Singleton
 @JsonMessageHandler.ProducesJson
@@ -61,11 +59,6 @@ import static java.lang.annotation.RetentionPolicy.RUNTIME;
 @BootstrapContextCompatible
 public final class JsonMessageHandler<T> implements MessageBodyHandler<T> {
 
-    /**
-     * The JSON handler should be preferred if for any type.
-     */
-    public static final int ORDER = -10;
-
     private final JsonMapper jsonMapper;
 
     public JsonMessageHandler(JsonMapper jsonMapper) {
@@ -84,7 +77,7 @@ public final class JsonMessageHandler<T> implements MessageBodyHandler<T> {
 
     @Override
     public boolean isReadable(@NonNull Argument<T> type, MediaType mediaType) {
-        return mediaType != null && mediaType.matchesExtension(MediaType.EXTENSION_JSON);
+        return mediaType != null && mediaType.getExtension().equals(MediaType.EXTENSION_JSON);
     }
 
     private static CodecException decorateRead(Argument<?> type, IOException e) {
@@ -121,7 +114,7 @@ public final class JsonMessageHandler<T> implements MessageBodyHandler<T> {
 
     @Override
     public boolean isWriteable(@NonNull Argument<T> type, MediaType mediaType) {
-        return mediaType != null && mediaType.matchesExtension(MediaType.EXTENSION_JSON);
+        return mediaType != null && mediaType.getExtension().equals(MediaType.EXTENSION_JSON);
     }
 
     private static CodecException decorateWrite(Object object, IOException e) {
