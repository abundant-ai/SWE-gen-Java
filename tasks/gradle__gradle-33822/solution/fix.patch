diff --git a/.teamcity/src/main/kotlin/common/CommonExtensions.kt b/.teamcity/src/main/kotlin/common/CommonExtensions.kt
index 2fa8bbd7cbc..4b8f3e611a8 100644
--- a/.teamcity/src/main/kotlin/common/CommonExtensions.kt
+++ b/.teamcity/src/main/kotlin/common/CommonExtensions.kt
@@ -276,6 +276,7 @@ fun buildToolGradleParameters(
         "-Dorg.gradle.workers.max=$maxParallelForks",
         "-PmaxParallelForks=$maxParallelForks",
         PLUGINS_PORTAL_URL_OVERRIDE,
+        buildScanCustomValueParam("tcPipeline", VersionedSettingsBranch.fromDslContext().branchName),
         "-s",
         "%additional.gradle.parameters%",
         if (isContinue) "--continue" else "",
diff --git a/.teamcity/src/main/kotlin/common/VersionedSettingsBranch.kt b/.teamcity/src/main/kotlin/common/VersionedSettingsBranch.kt
index a0f9efa71dd..fa1baf4ed6f 100644
--- a/.teamcity/src/main/kotlin/common/VersionedSettingsBranch.kt
+++ b/.teamcity/src/main/kotlin/common/VersionedSettingsBranch.kt
@@ -53,7 +53,7 @@ data class VersionedSettingsBranch(
 
         private val OLD_RELEASE_PATTERN = "release(\\d+)x".toRegex()
 
-        fun fromDslContext(): VersionedSettingsBranch = VersionedSettingsBranch(DslContext.getParameter("branch"))
+        fun fromDslContext(): VersionedSettingsBranch = VersionedSettingsBranch(DslContext.getParameter("branch", "master"))
 
         private fun determineNightlyPromotionTriggerHour(branchName: String) =
             when (branchName) {
diff --git a/.teamcity/src/main/kotlin/configurations/GradleBuildConfigurationDefaults.kt b/.teamcity/src/main/kotlin/configurations/GradleBuildConfigurationDefaults.kt
index dbb4b7b7e21..48eae040e4d 100644
--- a/.teamcity/src/main/kotlin/configurations/GradleBuildConfigurationDefaults.kt
+++ b/.teamcity/src/main/kotlin/configurations/GradleBuildConfigurationDefaults.kt
@@ -53,7 +53,7 @@ fun checkCleanDirWindows(
     dir: String,
     exitOnFailure: Boolean = true,
 ) = """
-    
+
     IF exist $dir (
         TREE $dir
         RMDIR /S /Q $dir
