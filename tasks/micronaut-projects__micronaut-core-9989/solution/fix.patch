diff --git a/config/accepted-api-changes.json b/config/accepted-api-changes.json
index 4cd097e327..0fd4433535 100644
--- a/config/accepted-api-changes.json
+++ b/config/accepted-api-changes.json
@@ -348,20 +348,5 @@
     "type": "io.micronaut.core.graal.AutomaticFeatureUtils",
     "member": "Constructor io.micronaut.core.graal.AutomaticFeatureUtils()",
     "reason": "Was deprecated"
-  },
-  {
-    "type": "io.micronaut.ast.groovy.TypeElementVisitorTransform$ElementVisitor$_visitNativeProperty_lambda1",
-    "member": "Constructor io.micronaut.ast.groovy.TypeElementVisitorTransform$ElementVisitor$_visitNativeProperty_lambda1(java.lang.Object,java.lang.Object,groovy.lang.Reference)",
-    "reason": "Under Java 21 the constructor is absent"
-  },
-  {
-    "type": "io.micronaut.ast.groovy.TypeElementVisitorTransform$ElementVisitor$_visitNativeProperty_lambda2",
-    "member": "Constructor io.micronaut.ast.groovy.TypeElementVisitorTransform$ElementVisitor$_visitNativeProperty_lambda2(java.lang.Object,java.lang.Object,groovy.lang.Reference)",
-    "reason": "Under Java 21 the constructor is absent"
-  },
-  {
-    "type": "io.micronaut.ast.groovy.TypeElementVisitorTransform$ElementVisitor$_visitNativeProperty_lambda3",
-    "member": "Constructor io.micronaut.ast.groovy.TypeElementVisitorTransform$ElementVisitor$_visitNativeProperty_lambda3(java.lang.Object,java.lang.Object,groovy.lang.Reference)",
-    "reason": "Under Java 21 the constructor is absent"
   }
 ]
diff --git a/context-propagation/build.gradle b/context-propagation/build.gradle
index fb10fb800f..c939757f14 100644
--- a/context-propagation/build.gradle
+++ b/context-propagation/build.gradle
@@ -1,7 +1,7 @@
 plugins {
     id "io.micronaut.build.internal.convention-library"
     id "org.jetbrains.kotlin.jvm"
-    id("com.google.devtools.ksp")
+    id "org.jetbrains.kotlin.kapt"
 }
 
 dependencies {
@@ -58,7 +58,9 @@ dependencies {
 
 // Kotlin
 dependencies {
-    kspTest projects.injectKotlin
+    kapt project(':inject-java')
+    kaptTest project(':inject-java')
+
     compileOnly libs.managed.kotlin.stdlib.jdk8
     compileOnly libs.managed.kotlinx.coroutines.core
 
diff --git a/gradle.properties b/gradle.properties
index 85351e92fe..d0917d431e 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -57,3 +57,16 @@ org.gradle.parallel=true
 org.gradle.jvmargs=-Xmx1g
 systemProp.predictiveTestSelection=false
 predictiveTestSelection=false
+
+# No matter which Java toolchain we use, the Kotlin Daemon is always invoked by the current JDK.
+# Therefor to fix Kapt errors when running tests under Java 21, we need to open up some modules for the Kotlin Daemon.
+kotlin.daemon.jvmargs=--add-opens=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED\
+ --add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED \
+ --add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED \
+ --add-opens=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED \
+ --add-opens=jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED \
+ --add-opens=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED \
+ --add-opens=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED \
+ --add-opens=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED \
+ --add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED \
+ --add-opens=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED
diff --git a/settings.gradle b/settings.gradle
index 1afccacda4..a5a1560a49 100644
--- a/settings.gradle
+++ b/settings.gradle
@@ -6,7 +6,7 @@ pluginManagement {
 }
 
 plugins {
-    id 'io.micronaut.build.shared.settings' version '6.5.7'
+    id 'io.micronaut.build.shared.settings' version '6.6.0'
 }
 enableFeaturePreview("TYPESAFE_PROJECT_ACCESSORS")
 
@@ -68,9 +68,7 @@ include "test-suite-javax-inject"
 include "test-suite-jakarta-inject-bean-import"
 include "test-suite-http-server-tck-jdk"
 include "test-suite-http-server-tck-netty"
-if (JavaVersion.current() < JavaVersion.VERSION_21) {
-    include "test-suite-kotlin"
-}
+include "test-suite-kotlin"
 include "test-suite-kotlin-ksp"
 include "test-suite-groovy"
 include "test-suite-groovy"
