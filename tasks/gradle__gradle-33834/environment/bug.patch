diff --git a/build-logic-commons/basics/src/main/kotlin/gradlebuild/basics/kotlindsl/kotlin-compiler-configuration.kt b/build-logic-commons/basics/src/main/kotlin/gradlebuild/basics/kotlindsl/kotlin-compiler-configuration.kt
index 28bcf8f105e..f64f93e0cfd 100644
--- a/build-logic-commons/basics/src/main/kotlin/gradlebuild/basics/kotlindsl/kotlin-compiler-configuration.kt
+++ b/build-logic-commons/basics/src/main/kotlin/gradlebuild/basics/kotlindsl/kotlin-compiler-configuration.kt
@@ -38,6 +38,7 @@ fun KotlinCompile.configureKotlinCompilerForGradleBuild() {
         allWarningsAsErrors = true
         apiVersion = KotlinVersion.KOTLIN_1_8
         languageVersion = KotlinVersion.KOTLIN_1_8
+        jvmTarget = JvmTarget.JVM_1_8
         freeCompilerArgs.addAll(
             "-Xjsr305=strict",
             "-Xjspecify-annotations=strict",
diff --git a/build-logic-commons/module-identity/src/main/kotlin/gradlebuild/identity/extension/ReleasedVersionsDetails.kt b/build-logic-commons/module-identity/src/main/kotlin/gradlebuild/identity/extension/ReleasedVersionsDetails.kt
index 14f55d60b2a..0ddad7d1033 100644
--- a/build-logic-commons/module-identity/src/main/kotlin/gradlebuild/identity/extension/ReleasedVersionsDetails.kt
+++ b/build-logic-commons/module-identity/src/main/kotlin/gradlebuild/identity/extension/ReleasedVersionsDetails.kt
@@ -32,7 +32,7 @@ class ReleasedVersionsDetails(currentBaseVersion: GradleVersion, releasedVersion
 
     val mainTestedVersions: List<GradleVersion>
     val lowestInterestingVersion: GradleVersion = GradleVersion.version("0.8")
-    val lowestTestedVersion: GradleVersion = GradleVersion.version("4.0")
+    val lowestTestedVersion: GradleVersion = GradleVersion.version("3.0")
 
     init {
         val releasedVersions = releasedVersionsFile.asFile.reader().use {
diff --git a/build-logic/build-init-samples/build.gradle.kts b/build-logic/build-init-samples/build.gradle.kts
index 6b2d1db9039..85ce021aace 100644
--- a/build-logic/build-init-samples/build.gradle.kts
+++ b/build-logic/build-init-samples/build.gradle.kts
@@ -5,8 +5,6 @@ plugins {
 description = "Provides a plugin to generate samples using internal build init APIs"
 
 dependencies {
-    implementation(projects.jvm)
-
     implementation("gradlebuild:basics")
     implementation("org.gradle.guides:gradle-guides-plugin")
     implementation("org.asciidoctor:asciidoctor-gradle-jvm") {
diff --git a/build-logic/build-init-samples/src/main/kotlin/gradlebuild/generate-samples.gradle.kts b/build-logic/build-init-samples/src/main/kotlin/gradlebuild/generate-samples.gradle.kts
index 212f10ab131..9d551f36eca 100644
--- a/build-logic/build-init-samples/src/main/kotlin/gradlebuild/generate-samples.gradle.kts
+++ b/build-logic/build-init-samples/src/main/kotlin/gradlebuild/generate-samples.gradle.kts
@@ -29,11 +29,6 @@ import org.gradle.docs.samples.Dsl
 
 plugins {
     id("org.gradle.samples")
-    id("gradlebuild.jvm-compile")
-}
-
-jvmCompile {
-    addCompilationFrom(sourceSets.docsTest)
 }
 
 val singleProjectSampleLanguages = listOf(JAVA, GROOVY, SCALA, KOTLIN, SWIFT, CPP)
diff --git a/build-logic/buildquality/build.gradle.kts b/build-logic/buildquality/build.gradle.kts
index 3e520d2c685..3878fdd2cf4 100644
--- a/build-logic/buildquality/build.gradle.kts
+++ b/build-logic/buildquality/build.gradle.kts
@@ -10,7 +10,6 @@ dependencies {
     implementation(projects.cleanup)
     implementation(projects.documentation)
     implementation(projects.integrationTesting)
-    implementation(projects.jvm)
     implementation(projects.performanceTesting)
     implementation(projects.profiling)
     implementation(projects.binaryCompatibility)
diff --git a/build-logic/buildquality/src/main/kotlin/gradlebuild.arch-test.gradle.kts b/build-logic/buildquality/src/main/kotlin/gradlebuild.arch-test.gradle.kts
index e1af5b220db..2e598567921 100644
--- a/build-logic/buildquality/src/main/kotlin/gradlebuild.arch-test.gradle.kts
+++ b/build-logic/buildquality/src/main/kotlin/gradlebuild.arch-test.gradle.kts
@@ -21,7 +21,6 @@ plugins {
     `jvm-test-suite`
     id("gradlebuild.dependency-modules")
     id("gradlebuild.code-quality")
-    id("gradlebuild.jvm-compile")
 }
 
 val packageCyclesExtension = extensions.create<PackageCyclesExtension>("packageCycles").apply {
@@ -48,11 +47,6 @@ testing {
     suites {
         create("archTest", JvmTestSuite::class) {
             useJUnitJupiter()
-
-            project.jvmCompile {
-                addCompilationFrom(sources)
-            }
-
             dependencies {
                 implementation(project.dependencies.create(project))
                 notForAccessorGeneration {
@@ -60,7 +54,6 @@ testing {
                     implementation(project(":internal-architecture-testing"))
                 }
             }
-
             targets {
                 all {
                     testTask.configure {
diff --git a/build-logic/integration-testing/build.gradle.kts b/build-logic/integration-testing/build.gradle.kts
index b2a15cd7973..7245cb1b943 100644
--- a/build-logic/integration-testing/build.gradle.kts
+++ b/build-logic/integration-testing/build.gradle.kts
@@ -19,7 +19,6 @@ dependencies {
 
     implementation(projects.cleanup)
     implementation(projects.dependencyModules)
-    implementation(projects.jvm)
 
     testImplementation("junit:junit")
 }
diff --git a/build-logic/integration-testing/src/main/kotlin/gradlebuild.cross-version-tests.gradle.kts b/build-logic/integration-testing/src/main/kotlin/gradlebuild.cross-version-tests.gradle.kts
index 7e2ea98ae60..11fc1e125fb 100644
--- a/build-logic/integration-testing/src/main/kotlin/gradlebuild.cross-version-tests.gradle.kts
+++ b/build-logic/integration-testing/src/main/kotlin/gradlebuild.cross-version-tests.gradle.kts
@@ -17,6 +17,7 @@
 import gradlebuild.basics.capitalize
 import gradlebuild.basics.testing.TestType
 import gradlebuild.integrationtests.addDependenciesAndConfigurations
+import gradlebuild.integrationtests.addSourceSet
 import gradlebuild.integrationtests.configureIde
 import gradlebuild.integrationtests.createTestTask
 import gradlebuild.integrationtests.setSystemPropertiesOfTestJVM
@@ -25,13 +26,9 @@ plugins {
     java
     id("gradlebuild.module-identity")
     id("gradlebuild.dependency-modules")
-    id("gradlebuild.jvm-compile")
 }
 
-val sourceSet = sourceSets.create("${TestType.CROSSVERSION.prefix}Test")
-jvmCompile {
-    addCompilationFrom(sourceSet)
-}
+val sourceSet = addSourceSet(TestType.CROSSVERSION)
 addDependenciesAndConfigurations(TestType.CROSSVERSION.prefix)
 createQuickFeedbackTasks()
 createAggregateTasks(sourceSet)
diff --git a/build-logic/integration-testing/src/main/kotlin/gradlebuild.integration-tests.gradle.kts b/build-logic/integration-testing/src/main/kotlin/gradlebuild.integration-tests.gradle.kts
index 2004a9cbbb4..ee3c536e22e 100644
--- a/build-logic/integration-testing/src/main/kotlin/gradlebuild.integration-tests.gradle.kts
+++ b/build-logic/integration-testing/src/main/kotlin/gradlebuild.integration-tests.gradle.kts
@@ -17,16 +17,16 @@
 import gradlebuild.basics.testing.TestType
 import gradlebuild.basics.testing.includeSpockAnnotation
 import gradlebuild.integrationtests.addDependenciesAndConfigurations
+import gradlebuild.integrationtests.addSourceSet
 import gradlebuild.integrationtests.configureIde
 import gradlebuild.integrationtests.createTasks
 import gradlebuild.integrationtests.createTestTask
-import gradlebuild.integrationtests.extension.IntegrationTestExtension
 import gradlebuild.integrationtests.setSystemPropertiesOfTestJVM
+import gradlebuild.integrationtests.extension.IntegrationTestExtension
 
 plugins {
     java
     id("gradlebuild.dependency-modules")
-    id("gradlebuild.jvm-compile")
 }
 
 extensions.create<IntegrationTestExtension>("integTest").apply {
@@ -34,10 +34,7 @@ extensions.create<IntegrationTestExtension>("integTest").apply {
     testJvmXmx.convention("512m")
 }
 
-val sourceSet = sourceSets.create("${TestType.INTEGRATION.prefix}Test")
-jvmCompile {
-    addCompilationFrom(sourceSet)
-}
+val sourceSet = addSourceSet(TestType.INTEGRATION)
 addDependenciesAndConfigurations(TestType.INTEGRATION.prefix)
 createTasks(sourceSet, TestType.INTEGRATION)
 configureIde(TestType.INTEGRATION)
diff --git a/build-logic/integration-testing/src/main/kotlin/gradlebuild.test-fixtures.gradle.kts b/build-logic/integration-testing/src/main/kotlin/gradlebuild.test-fixtures.gradle.kts
index f68431e8246..5b2d978bc6f 100644
--- a/build-logic/integration-testing/src/main/kotlin/gradlebuild.test-fixtures.gradle.kts
+++ b/build-logic/integration-testing/src/main/kotlin/gradlebuild.test-fixtures.gradle.kts
@@ -30,14 +30,6 @@ plugins {
     `java-test-fixtures`
     groovy
     id("gradlebuild.dependency-modules")
-    id("gradlebuild.jvm-compile")
-}
-
-jvmCompile {
-    addCompilationFrom(sourceSets.named("testFixtures")) {
-        // By default, test fixtures compile to the same JVM version as the production code.
-        targetJvmVersion = compilations.named("main").flatMap { it.targetJvmVersion }
-    }
 }
 
 // The below mimics what the java-library plugin does, but creating a library of test fixtures instead.
diff --git a/build-logic/integration-testing/src/main/kotlin/gradlebuild/integrationtests/shared-configuration.kt b/build-logic/integration-testing/src/main/kotlin/gradlebuild/integrationtests/shared-configuration.kt
index e428cb16217..ed64e0c1fd6 100644
--- a/build-logic/integration-testing/src/main/kotlin/gradlebuild/integrationtests/shared-configuration.kt
+++ b/build-logic/integration-testing/src/main/kotlin/gradlebuild/integrationtests/shared-configuration.kt
@@ -105,6 +105,16 @@ fun Project.addDependenciesAndConfigurations(prefix: String) {
 }
 
 
+@Suppress("UnusedPrivateProperty")
+internal
+fun Project.addSourceSet(testType: TestType): SourceSet {
+    val prefix = testType.prefix
+    val sourceSets = the<SourceSetContainer>()
+    val main by sourceSets.getting
+    return sourceSets.create("${prefix}Test")
+}
+
+
 internal
 fun Project.createTasks(sourceSet: SourceSet, testType: TestType) {
     val prefix = testType.prefix
diff --git a/build-logic/jvm/src/main/kotlin/gradlebuild.jvm-compile.gradle.kts b/build-logic/jvm/src/main/kotlin/gradlebuild.jvm-compile.gradle.kts
deleted file mode 100644
index 51a1eb2f07c..00000000000
--- a/build-logic/jvm/src/main/kotlin/gradlebuild.jvm-compile.gradle.kts
+++ /dev/null
@@ -1,39 +0,0 @@
-import gradlebuild.jvm.JvmCompileExtension
-
-/*
- * Copyright 2018 the original author or authors.
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-plugins {
-    id("java-base")
-}
-
-// Creates the `jvmCompile` extension, which is a container for JvmCompilation instances.
-// JvmCompilation instances control the way each source set is compiled -- most importantly,
-// it controls the JVM version of the compilation. This allows each source set within a project
-// to compile to different JVM versions.
-
-val jvmCompile = extensions.create<JvmCompileExtension>(JvmCompileExtension.NAME)
-
-jvmCompile.compilations.configureEach {
-    // Assume the compilation does not use any workarounds
-    usesJdkInternals = false
-    usesFutureStdlib = false
-
-    // All compilations must have a target JVM version configured explicitly.
-    targetJvmVersion = provider {
-        throw RuntimeException("Target JVM version for $name has not been configured")
-    }
-}
diff --git a/build-logic/jvm/src/main/kotlin/gradlebuild.unittest-and-compile.gradle.kts b/build-logic/jvm/src/main/kotlin/gradlebuild.unittest-and-compile.gradle.kts
index aa8e25e08e1..713ccfca961 100644
--- a/build-logic/jvm/src/main/kotlin/gradlebuild.unittest-and-compile.gradle.kts
+++ b/build-logic/jvm/src/main/kotlin/gradlebuild.unittest-and-compile.gradle.kts
@@ -38,10 +38,12 @@ import gradlebuild.basics.testing.includeSpockAnnotation
 import gradlebuild.filterEnvironmentVariables
 import gradlebuild.identity.extension.GradleModuleExtension
 import gradlebuild.identity.extension.ModuleTargetRuntimes
-import gradlebuild.jvm.JvmCompileExtension
 import gradlebuild.jvm.argumentproviders.CiEnvironmentProvider
+import gradlebuild.jvm.extension.UnitTestAndCompileExtension
 import org.gradle.internal.jvm.JpmsConfiguration
 import org.gradle.internal.os.OperatingSystem
+import org.jetbrains.kotlin.gradle.dsl.JvmTarget
+import org.jetbrains.kotlin.gradle.dsl.jvm.JvmTargetValidationMode
 import org.jetbrains.kotlin.gradle.tasks.KotlinCompile
 import java.time.Duration
 import java.util.Optional
@@ -51,30 +53,30 @@ plugins {
     idea // Need to apply the idea plugin, so the extended configuration is taken into account on sync
     id("gradlebuild.module-jar")
     id("gradlebuild.dependency-modules")
-    id("gradlebuild.jvm-compile")
-}
-
-tasks.withType<JavaCompile>().configureEach {
-    options.release = provider {
-        throw GradleException("This task '${name}' is not associated with a compilation. Associate it with a compilation on the '${JvmCompileExtension.NAME}' extension.")
-    }
 }
 
 val gradleModule = the<GradleModuleExtension>()
-the<JvmCompileExtension>().apply {
-    compilations {
-        configureEach {
-            // Everything compiles to Java 17 by default
-            targetJvmVersion = 17
-        }
-    }
-    addCompilationFrom(sourceSets.main) {
-        // For the production code, we derive the JVM version from the target runtime
-        targetJvmVersion = gradleModule.targetRuntimes.computeProductionJvmTargetVersion()
-    }
-    addCompilationFrom(sourceSets.test)
+
+// Create an extension that allows projects to configure the way they are compiled and tested.
+//
+// Projects may describe whether they are using any "workarounds" like:
+// - Using JDK internal classes
+// - Using Java standard library APIs that were introduced after the JVM version they are targeting
+// - Using dependencies that target a higher JVM version than the project's target JVM version
+//
+// All of these workarounds should be generally avoided, but, with this data we can configure the
+// compile tasks to permit some of these requirements.
+val jvmCompile = extensions.create<UnitTestAndCompileExtension>(UnitTestAndCompileExtension.NAME).apply {
+    // And assume it does not use any workarounds
+    usesJdkInternals = false
+    usesFutureStdlib = false
+
+    // By default, use the target runtimes of the module to determine the java version
+    targetJvmVersion = gradleModule.targetRuntimes.computeProductionJvmTargetVersion()
 }
 
+enforceCompatibility(jvmCompile)
+
 removeTeamcityTempProperty()
 addDependencies()
 configureCompileDefaults()
@@ -95,6 +97,32 @@ fun configureCompileDefaults() {
     }
 }
 
+/**
+ * Given the user-configured values in the extension, configure the compilation tasks
+ * to enforce compatibility with the target JVM version.
+ *
+ * We try to use the toolchain configured in [configureDefaultToolchain] as much as possible,
+ * but in some cases, we need to use another toolchain.
+ *
+ * In some cases, we need to set the source and target compatibility flags instead of using
+ * the release flag. This is because the release flag limits us from using internal APIs or
+ * APIs defined by a Java version higher than the target version.
+ *
+ * Finally, Groovy does not support the release flag at all. We manually set a toolchain
+ * for Groovy to ensure it compiles against the correct classes.
+ */
+private
+fun enforceCompatibility(jvmCompile: UnitTestAndCompileExtension) {
+    // When using the release flag, compiled code cannot access JDK internal classes or standard library
+    // APIs defined in future versions of Java. If either of these cases are true, we do not use the
+    // release flag, but instead set the source and target compatibility flags.
+    val useRelease = jvmCompile.usesJdkInternals.zip(jvmCompile.usesFutureStdlib) { internals, futureApis -> !internals && !futureApis }
+
+    enforceJavaCompatibility(jvmCompile.targetJvmVersion, useRelease)
+    enforceGroovyCompatibility(jvmCompile.targetJvmVersion)
+    enforceKotlinCompatibility(jvmCompile.targetJvmVersion, useRelease)
+}
+
 /**
  * Given the declared target platforms of a given Gradle module, determine
  * the JVM version that the production code should target.
@@ -108,16 +136,74 @@ fun ModuleTargetRuntimes.computeProductionJvmTargetVersion(): Provider<Int> {
     )
 
     return reduceBooleanFlagValues(targetRuntimeJavaVersions, ::minOf).orElse(provider {
-        throw GradleException("No target JVM version configured. Specify at least one runtime target for $project on the '${GradleModuleExtension.NAME}' extension.")
+        throw GradleException("No target JVM version configured. Specify a runtime target for $project on ${UnitTestAndCompileExtension::class.java.simpleName} for $project")
     })
 }
 
+fun enforceJavaCompatibility(targetVersion: Provider<Int>, useRelease: Provider<Boolean>) {
+    tasks.withType<JavaCompile>().configureEach {
+        // Set the release flag is requested.
+        // Otherwise, we set the source and target compatibility in the afterEvaluate below.
+        options.release = useRelease.zip(targetVersion) { doUseRelease, target -> if (doUseRelease) { target } else { null } }
+    }
+
+    // Need to use afterEvaluate since source/target compatibility are not lazy
+    project.afterEvaluate {
+        tasks.withType<JavaCompile>().configureEach {
+            if (!useRelease.get()) {
+                val version = targetVersion.get().toString()
+                sourceCompatibility = version
+                targetCompatibility = version
+            }
+        }
+    }
+}
+
+fun enforceGroovyCompatibility(targetVersion: Provider<Int>) {
+    tasks.withType<GroovyCompile>().configureEach {
+        // Groovy does not support the release flag. We must compile with the same
+        // JDK we are targeting in order to see the correct standard lib classes
+        // during compilation
+        javaLauncher = javaToolchains.launcherFor {
+            languageVersion = targetVersion.map { JavaLanguageVersion.of(it) }
+        }
+    }
+
+    // Need to use afterEvaluate since source/target Compatibility are not lazy
+    project.afterEvaluate {
+        tasks.withType<GroovyCompile>().configureEach {
+            val version = targetVersion.get().toString()
+            sourceCompatibility = version
+            targetCompatibility = version
+        }
+    }
+}
+
+fun enforceKotlinCompatibility(targetVersion: Provider<Int>, useRelease: Provider<Boolean>) {
+    tasks.withType<KotlinCompile>().configureEach {
+        jvmTargetValidationMode.set(JvmTargetValidationMode.ERROR)
+        compilerOptions {
+            jvmTarget = targetVersion.map {
+                JvmTarget.fromTarget(if (it < 9) "1.${it}" else it.toString())
+            }
+
+            // TODO KT-49746: Use the DSL to set the release version
+            freeCompilerArgs.addAll(useRelease.zip(jvmTarget) { doUseRelease, targetVersion ->
+                if (doUseRelease) {
+                    listOf("-Xjdk-release=${targetVersion.target}")
+                } else {
+                    listOf()
+                }
+            })
+        }
+    }
+}
+
 fun configureSourcesVariant() {
     java {
         withSourcesJar()
     }
 
-    // TODO: This should not be necessary anymore now that we have variant reselection.
     @Suppress("UnusedPrivateProperty")
     val transitiveSourcesElements by configurations.creating {
         isCanBeResolved = false
@@ -189,7 +275,7 @@ fun addCompileAllTasks() {
     tasks.register("compileAll") {
         description = "Compile all source code, including main, test, integTest, crossVersionTest, testFixtures, etc."
         val compileTasks = project.tasks.matching {
-            it is JavaCompile || it is GroovyCompile || it is KotlinCompile
+            it is JavaCompile || it is GroovyCompile
         }
         dependsOn(compileTasks)
     }
@@ -198,7 +284,7 @@ fun addCompileAllTasks() {
         description = "Compile all production source code, usually only main and testFixtures."
         val compileTasks = project.tasks.matching {
             // Currently, we compile everything since the Groovy compiler is not deterministic enough.
-            (it is JavaCompile || it is GroovyCompile || it is KotlinCompile)
+            (it is JavaCompile || it is GroovyCompile)
         }
         dependsOn(compileTasks)
     }
diff --git a/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/JvmCompilation.kt b/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/JvmCompilation.kt
deleted file mode 100644
index f57342865fb..00000000000
--- a/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/JvmCompilation.kt
+++ /dev/null
@@ -1,147 +0,0 @@
-/*
- * Copyright 2025 the original author or authors.
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package gradlebuild.jvm
-
-import org.gradle.api.Project
-import org.gradle.api.plugins.GroovyBasePlugin
-import org.gradle.api.provider.Property
-import org.gradle.api.provider.Provider
-import org.gradle.api.tasks.SourceSet
-import org.gradle.api.tasks.TaskProvider
-import org.gradle.api.tasks.compile.GroovyCompile
-import org.gradle.api.tasks.compile.JavaCompile
-import org.gradle.jvm.toolchain.JavaLanguageVersion
-import org.gradle.jvm.toolchain.JavaToolchainService
-import org.gradle.kotlin.dsl.*
-import org.jetbrains.kotlin.gradle.dsl.JvmTarget
-import org.jetbrains.kotlin.gradle.dsl.jvm.JvmTargetValidationMode
-import org.jetbrains.kotlin.gradle.tasks.KotlinCompile
-
-/**
- * Encapsulates the configuration for the compilation of a source set, including:
- * - The target JVM version
- * - Workarounds which may affect the way the compilation is performed
- *
- * The compilation workarounds include:
- * - Using JDK internal classes
- * - Using Java standard library APIs that were introduced after the JVM version they are targeting
- *
- * All of these workarounds should be generally avoided, but, with this data we can configure the
- * compile tasks to permit some of these requirements.
- */
-abstract class JvmCompilation {
-
-    abstract val name: String
-
-    /**
-     * Set this flag to true if the compilation compiles against JDK internal classes.
-     *
-     * This workaround should be used sparingly.
-     */
-    abstract val usesJdkInternals: Property<Boolean>
-
-    /**
-     * Set this flag to true if the compilation compiles against Java standard library APIs
-     * that were introduced after [targetJvmVersion].
-     *
-     * This workaround should be used sparingly.
-     */
-    abstract val usesFutureStdlib: Property<Boolean>
-
-    /**
-     * The JVM version that all JVM code in this compilation will target.
-     */
-    abstract val targetJvmVersion: Property<Int>
-
-    fun Project.from(sourceSet: SourceSet) {
-        associate(tasks.named<JavaCompile>(sourceSet.getCompileTaskName("java")))
-        plugins.withType<GroovyBasePlugin>() {
-            associate(tasks.named<GroovyCompile>(sourceSet.getCompileTaskName("groovy")))
-        }
-        plugins.withId("org.jetbrains.kotlin.jvm") {
-            associate(tasks.named<KotlinCompile>(sourceSet.getCompileTaskName("kotlin")))
-        }
-    }
-
-    @JvmName("associateJava")
-    fun Project.associate(javaCompile: TaskProvider<JavaCompile>) {
-        javaCompile.configure {
-            // Set the release flag if requested.
-            // Otherwise, we set the source and target compatibility in the afterEvaluate below.
-            options.release = useRelease().zip(targetJvmVersion) { doUseRelease, target -> if (doUseRelease) { target } else { null } }
-        }
-
-        // Need to use afterEvaluate since source/target compatibility are not lazy
-        afterEvaluate {
-            tasks.withType<JavaCompile>().configureEach {
-                if (!useRelease().get()) {
-                    val version = targetJvmVersion.get().toString()
-                    sourceCompatibility = version
-                    targetCompatibility = version
-                }
-            }
-        }
-    }
-
-    @JvmName("associateGroovy")
-    fun Project.associate(groovyCompile: TaskProvider<GroovyCompile>) {
-        groovyCompile.configure {
-            val javaToolchains = project.the<JavaToolchainService>()
-            // Groovy does not support the release flag. We must compile with the same
-            // JDK we are targeting in order to see the correct standard lib classes
-            // during compilation
-            javaLauncher = javaToolchains.launcherFor {
-                languageVersion = targetJvmVersion.map { JavaLanguageVersion.of(it) }
-            }
-        }
-
-        // Need to use afterEvaluate since source/target Compatibility are not lazy
-        afterEvaluate {
-            groovyCompile.configure {
-                val version = targetJvmVersion.get().toString()
-                sourceCompatibility = version
-                targetCompatibility = version
-            }
-        }
-    }
-
-    @JvmName("associateKotlin")
-    fun associate(kotlinCompile: TaskProvider<KotlinCompile>) {
-        kotlinCompile.configure {
-            jvmTargetValidationMode.set(JvmTargetValidationMode.ERROR)
-            compilerOptions {
-                jvmTarget = targetJvmVersion.map {
-                    JvmTarget.fromTarget(if (it < 9) "1.${it}" else it.toString())
-                }
-
-                // TODO KT-49746: Use the DSL to set the release version
-                freeCompilerArgs.addAll(useRelease().zip(jvmTarget) { doUseRelease, targetVersion ->
-                    if (doUseRelease) {
-                        listOf("-Xjdk-release=${targetVersion.target}")
-                    } else {
-                        listOf()
-                    }
-                })
-            }
-        }
-    }
-
-    private fun useRelease(): Provider<Boolean> {
-        return usesJdkInternals.zip(usesFutureStdlib) { internals, futureApis -> !internals && !futureApis }
-    }
-
-}
diff --git a/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/JvmCompileExtension.kt b/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/JvmCompileExtension.kt
deleted file mode 100644
index 4f835257e6e..00000000000
--- a/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/JvmCompileExtension.kt
+++ /dev/null
@@ -1,58 +0,0 @@
-/*
- * Copyright 2025 the original author or authors.
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package gradlebuild.jvm
-
-import org.gradle.api.NamedDomainObjectContainer
-import org.gradle.api.NamedDomainObjectProvider
-import org.gradle.api.Project
-import org.gradle.api.tasks.SourceSet
-
-/**
- * A container of [JvmCompilation]s for a JVM project.
- *
- * Utility methods are provided to add compilations based on existing [SourceSet]s.
- */
-abstract class JvmCompileExtension {
-
-    companion object {
-        const val NAME: String = "jvmCompile"
-    }
-
-    abstract val compilations: NamedDomainObjectContainer<JvmCompilation>
-
-    fun Project.addCompilationFrom(sourceSet: NamedDomainObjectProvider<SourceSet>): JvmCompilation {
-        return addCompilationFrom(sourceSet.get())
-    }
-
-    fun Project.addCompilationFrom(sourceSet: NamedDomainObjectProvider<SourceSet>, configure: JvmCompilation.() -> Unit): JvmCompilation {
-        return addCompilationFrom(sourceSet.get(), configure)
-    }
-
-    fun Project.addCompilationFrom(sourceSet: SourceSet): JvmCompilation {
-        return compilations.create(sourceSet.name) {
-            from(sourceSet)
-        }
-    }
-
-    fun Project.addCompilationFrom(sourceSet: SourceSet, configure: JvmCompilation.() -> Unit): JvmCompilation {
-        return compilations.create(sourceSet.name) {
-            from(sourceSet)
-            configure()
-        }
-    }
-
-}
diff --git a/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/extension/UnitTestAndCompileExtension.kt b/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/extension/UnitTestAndCompileExtension.kt
new file mode 100644
index 00000000000..6fb3cd8c4f2
--- /dev/null
+++ b/build-logic/jvm/src/main/kotlin/gradlebuild/jvm/extension/UnitTestAndCompileExtension.kt
@@ -0,0 +1,51 @@
+/*
+ * Copyright 2020 the original author or authors.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package gradlebuild.jvm.extension
+
+import org.gradle.api.provider.Property
+
+/**
+ * An extension intended for configuring the manner in which a project is
+ * compiled and tested.
+ */
+abstract class UnitTestAndCompileExtension {
+
+    companion object {
+        const val NAME: String = "jvmCompile"
+    }
+
+    /**
+     * Set this flag to true if the project compiles against JDK internal classes.
+     *
+     * This workaround should be used sparingly.
+     */
+    abstract val usesJdkInternals: Property<Boolean>
+
+    /**
+     * Set this flag to true if the project compiles against Java standard library APIs
+     * that were introduced after the target JVM bytecode version of the project.
+     *
+     * This workaround should be used sparingly.
+     */
+    abstract val usesFutureStdlib: Property<Boolean>
+
+    /**
+     * The JVM version that all JVM code in this module will target.
+     */
+    abstract val targetJvmVersion: Property<Int>
+
+}
diff --git a/build-logic/performance-testing/build.gradle.kts b/build-logic/performance-testing/build.gradle.kts
index eb382b52aca..0b01a472af7 100644
--- a/build-logic/performance-testing/build.gradle.kts
+++ b/build-logic/performance-testing/build.gradle.kts
@@ -9,10 +9,9 @@ dependencies {
     implementation("gradlebuild:basics")
     implementation("gradlebuild:module-identity")
 
+    implementation(projects.integrationTesting)
     implementation(projects.cleanup)
     implementation(projects.buildUpdateUtils)
-    implementation(projects.integrationTesting)
-    implementation(projects.jvm)
 
     implementation("com.google.guava:guava")
     implementation("com.google.code.gson:gson")
diff --git a/build-logic/performance-testing/src/main/kotlin/gradlebuild/performance/PerformanceTestPlugin.kt b/build-logic/performance-testing/src/main/kotlin/gradlebuild/performance/PerformanceTestPlugin.kt
index 7db1fbebef5..598445c1379 100644
--- a/build-logic/performance-testing/src/main/kotlin/gradlebuild/performance/PerformanceTestPlugin.kt
+++ b/build-logic/performance-testing/src/main/kotlin/gradlebuild/performance/PerformanceTestPlugin.kt
@@ -48,7 +48,6 @@ import gradlebuild.performance.tasks.DetermineBaselines
 import gradlebuild.performance.tasks.PerformanceTest
 import gradlebuild.performance.tasks.PerformanceTestReport
 import gradlebuild.integrationtests.ide.DEFAULT_ANDROID_STUDIO_VERSION
-import gradlebuild.jvm.JvmCompileExtension
 import org.gradle.api.Action
 import org.gradle.api.Plugin
 import org.gradle.api.Project
@@ -104,10 +103,6 @@ class PerformanceTestPlugin : Plugin<Project> {
         createAndWireCommitDistributionTask(performanceTestExtension)
         createAdditionalTasks(performanceTestSourceSet)
         configureIdePlugins(performanceTestSourceSet)
-
-        the<JvmCompileExtension>().apply {
-            addCompilationFrom(performanceTestSourceSet)
-        }
     }
 
     private
diff --git a/build-logic/profiling/build.gradle.kts b/build-logic/profiling/build.gradle.kts
index 1dc18235b4c..0444a50e681 100644
--- a/build-logic/profiling/build.gradle.kts
+++ b/build-logic/profiling/build.gradle.kts
@@ -11,7 +11,6 @@ dependencies {
     implementation("gradlebuild:module-identity")
 
     implementation(projects.documentation)
-    implementation(projects.jvm)
 
     implementation("me.champeau.jmh:jmh-gradle-plugin")
 }
diff --git a/build-logic/profiling/src/main/kotlin/gradlebuild.jmh.gradle.kts b/build-logic/profiling/src/main/kotlin/gradlebuild.jmh.gradle.kts
index 0af67e5f5ae..3e60140c1ad 100644
--- a/build-logic/profiling/src/main/kotlin/gradlebuild.jmh.gradle.kts
+++ b/build-logic/profiling/src/main/kotlin/gradlebuild.jmh.gradle.kts
@@ -17,13 +17,6 @@ import gradlebuild.jmh.tasks.JmhHTMLReport
 
 plugins {
     id("me.champeau.jmh")
-    id("gradlebuild.jvm-compile")
-}
-
-jvmCompile {
-    addCompilationFrom(sourceSets.jmh) {
-        associate(tasks.jmhCompileGeneratedClasses)
-    }
 }
 
 configurations {
diff --git a/build-logic/uber-plugins/src/main/kotlin/gradlebuild.internal.java.gradle.kts b/build-logic/uber-plugins/src/main/kotlin/gradlebuild.internal.java.gradle.kts
index 1f8d926700c..6a037d88290 100644
--- a/build-logic/uber-plugins/src/main/kotlin/gradlebuild.internal.java.gradle.kts
+++ b/build-logic/uber-plugins/src/main/kotlin/gradlebuild.internal.java.gradle.kts
@@ -19,9 +19,5 @@ plugins {
 }
 
 jvmCompile {
-    compilations {
-        named("main") {
-            targetJvmVersion = 17
-        }
-    }
+    targetJvmVersion = 8
 }
diff --git a/build-logic/uber-plugins/src/main/kotlin/gradlebuild.internal.kotlin.gradle.kts b/build-logic/uber-plugins/src/main/kotlin/gradlebuild.internal.kotlin.gradle.kts
index 79c964e314d..15b04b2bf1b 100644
--- a/build-logic/uber-plugins/src/main/kotlin/gradlebuild.internal.kotlin.gradle.kts
+++ b/build-logic/uber-plugins/src/main/kotlin/gradlebuild.internal.kotlin.gradle.kts
@@ -19,9 +19,5 @@ plugins {
 }
 
 jvmCompile {
-    compilations {
-        named("main") {
-            targetJvmVersion = 17
-        }
-    }
+    targetJvmVersion = 8
 }
diff --git a/platforms/core-configuration/bean-serialization-services/build.gradle.kts b/platforms/core-configuration/bean-serialization-services/build.gradle.kts
index 2814ee7a6d8..2276ac1aaa0 100644
--- a/platforms/core-configuration/bean-serialization-services/build.gradle.kts
+++ b/platforms/core-configuration/bean-serialization-services/build.gradle.kts
@@ -22,11 +22,7 @@ plugins {
 description = "Configuration Cache services supporting bean serialization"
 
 jvmCompile {
-    compilations {
-        named("main") {
-            usesJdkInternals = true
-        }
-    }
+    usesJdkInternals = true
 }
 
 dependencies {
diff --git a/platforms/core-configuration/core-serialization-codecs/build.gradle.kts b/platforms/core-configuration/core-serialization-codecs/build.gradle.kts
index ba166e773a9..3c69a372eb8 100644
--- a/platforms/core-configuration/core-serialization-codecs/build.gradle.kts
+++ b/platforms/core-configuration/core-serialization-codecs/build.gradle.kts
@@ -21,11 +21,7 @@ plugins {
 description = "Configuration Cache serialization codecs for :core (and family) types"
 
 jvmCompile {
-    compilations {
-        named("main") {
-            usesFutureStdlib = true
-        }
-    }
+    usesFutureStdlib = true
 }
 
 dependencies {
diff --git a/platforms/core-configuration/model-core/build.gradle.kts b/platforms/core-configuration/model-core/build.gradle.kts
index 035eb28e1e8..84a79d12297 100644
--- a/platforms/core-configuration/model-core/build.gradle.kts
+++ b/platforms/core-configuration/model-core/build.gradle.kts
@@ -6,11 +6,7 @@ plugins {
 description = "Implementation of configuration model types and annotation metadata handling (Providers, software model, conventions)"
 
 jvmCompile {
-    compilations {
-        named("main") {
-            usesJdkInternals = true
-        }
-    }
+    usesJdkInternals = true
 }
 
 dependencies {
diff --git a/platforms/core-runtime/base-services/build.gradle.kts b/platforms/core-runtime/base-services/build.gradle.kts
index bb16a876b7b..8ed884acf0e 100644
--- a/platforms/core-runtime/base-services/build.gradle.kts
+++ b/platforms/core-runtime/base-services/build.gradle.kts
@@ -15,11 +15,7 @@ gradleModule {
 }
 
 jvmCompile {
-    compilations {
-        named("main") {
-            usesFutureStdlib = true
-        }
-    }
+    usesFutureStdlib = true
 }
 
 dependencies {
diff --git a/platforms/core-runtime/classloaders/build.gradle.kts b/platforms/core-runtime/classloaders/build.gradle.kts
index bb41c25354d..ab177c96204 100644
--- a/platforms/core-runtime/classloaders/build.gradle.kts
+++ b/platforms/core-runtime/classloaders/build.gradle.kts
@@ -29,11 +29,7 @@ gradleModule {
 }
 
 jvmCompile {
-    compilations {
-        named("main") {
-            usesFutureStdlib = true
-        }
-    }
+    usesFutureStdlib = true
 }
 
 dependencies {
diff --git a/platforms/core-runtime/serialization/build.gradle.kts b/platforms/core-runtime/serialization/build.gradle.kts
index cd57d81fb06..2c8f7d0e3c2 100644
--- a/platforms/core-runtime/serialization/build.gradle.kts
+++ b/platforms/core-runtime/serialization/build.gradle.kts
@@ -28,11 +28,7 @@ gradleModule {
 }
 
 jvmCompile {
-    compilations {
-        named("main") {
-            usesFutureStdlib = true
-        }
-    }
+    usesFutureStdlib = true
 }
 
 dependencies {
diff --git a/platforms/ide/tooling-api/build.gradle.kts b/platforms/ide/tooling-api/build.gradle.kts
index 3639081a45e..81628ac8074 100644
--- a/platforms/ide/tooling-api/build.gradle.kts
+++ b/platforms/ide/tooling-api/build.gradle.kts
@@ -13,16 +13,8 @@ gradleModule {
 }
 
 jvmCompile {
-    compilations {
-        named("main") {
-            // JSpecify annotations on static inner type return types
-            usesJdkInternals = true
-        }
-        named("crossVersionTest") {
-            // The TAPI tests must be able to run the TAPI client, which is still JVM 8 compatible
-            targetJvmVersion = 8
-        }
-    }
+    // JSpecify annotations on static inner type return types
+    usesJdkInternals = true
 }
 
 tasks.named<Jar>("sourcesJar") {
diff --git a/platforms/jvm/java-compiler-plugin/build.gradle.kts b/platforms/jvm/java-compiler-plugin/build.gradle.kts
index efa327c14df..641581c4af1 100644
--- a/platforms/jvm/java-compiler-plugin/build.gradle.kts
+++ b/platforms/jvm/java-compiler-plugin/build.gradle.kts
@@ -5,11 +5,7 @@ plugins {
 description = "A Java compiler plugin used by Gradle's incremental compiler"
 
 jvmCompile {
-    compilations {
-        named("main") {
-            usesJdkInternals = true
-        }
-    }
+    usesJdkInternals = true
 }
 
 tasks.withType<Test>().configureEach {
diff --git a/platforms/jvm/language-java/build.gradle.kts b/platforms/jvm/language-java/build.gradle.kts
index b2f6c3c0a5f..ded7cbe42f4 100644
--- a/platforms/jvm/language-java/build.gradle.kts
+++ b/platforms/jvm/language-java/build.gradle.kts
@@ -5,11 +5,7 @@ plugins {
 description = "Source for JavaCompile, JavaExec and Javadoc tasks, it also contains logic for incremental Java compilation"
 
 jvmCompile {
-    compilations {
-        named("main") {
-            usesJdkInternals = true
-        }
-    }
+    usesJdkInternals = true
 }
 
 errorprone {
diff --git a/platforms/jvm/language-java/src/test/groovy/org/gradle/api/internal/tasks/compile/incremental/analyzer/DefaultClassDependenciesAnalyzerTest.groovy b/platforms/jvm/language-java/src/test/groovy/org/gradle/api/internal/tasks/compile/incremental/analyzer/DefaultClassDependenciesAnalyzerTest.groovy
index 19d9ff9c778..60d2797e99c 100644
--- a/platforms/jvm/language-java/src/test/groovy/org/gradle/api/internal/tasks/compile/incremental/analyzer/DefaultClassDependenciesAnalyzerTest.groovy
+++ b/platforms/jvm/language-java/src/test/groovy/org/gradle/api/internal/tasks/compile/incremental/analyzer/DefaultClassDependenciesAnalyzerTest.groovy
@@ -70,14 +70,13 @@ class DefaultClassDependenciesAnalyzerTest extends Specification {
 
         then:
         analysis.accessibleClassDependencies == [AccessedFromPackagePrivateField.name] as Set
-        analysis.privateClassDependencies == [
-            AccessedFromPrivateField.name,
-                AccessedFromPrivateMethod.name,
-                AccessedFromPrivateMethodBody.name,
-                // AccessedFromPrivateClass.name, // would be in ClassAnalysis for SomeClass$Foo
-                // AccessedFromPrivateClassPublicField.name, // would be in ClassAnalysis for SomeClass$Foo
-                SomeClass.name + '$Foo'
-        ] as Set
+        analysis.privateClassDependencies == [AccessedFromPrivateField.name,
+                                              AccessedFromPrivateMethod.name,
+                                              AccessedFromPrivateMethodBody.name,
+                                              // AccessedFromPrivateClass.name, // would be in ClassAnalysis for SomeClass$Foo
+                                              // AccessedFromPrivateClassPublicField.name, // would be in ClassAnalysis for SomeClass$Foo
+                                              SomeClass.name + '$Foo',
+                                              SomeClass.name + '$1'] as Set
     }
 
     def "knows basic class dependencies of a groovy class"() {
diff --git a/subprojects/core/build.gradle.kts b/subprojects/core/build.gradle.kts
index 191d634e1fe..545bb585434 100644
--- a/subprojects/core/build.gradle.kts
+++ b/subprojects/core/build.gradle.kts
@@ -31,12 +31,6 @@ dependencyAnalysis {
         ignoreSourceSet(testInterceptors.name)
     }
 }
-jvmCompile {
-    addCompilationFrom(testInterceptors) {
-        // By default, test interceptors compile to the same JVM version as the production code.
-        targetJvmVersion = compilations.named("main").flatMap { it.targetJvmVersion }
-    }
-}
 
 val testInterceptorsImplementation: Configuration by configurations.getting {
     extendsFrom(configurations.implementation.get())
diff --git a/subprojects/core/src/test/groovy/org/gradle/internal/classpath/DefaultCachedClasspathTransformerTest.groovy b/subprojects/core/src/test/groovy/org/gradle/internal/classpath/DefaultCachedClasspathTransformerTest.groovy
index 9b412678bc6..d77cb0c68df 100644
--- a/subprojects/core/src/test/groovy/org/gradle/internal/classpath/DefaultCachedClasspathTransformerTest.groovy
+++ b/subprojects/core/src/test/groovy/org/gradle/internal/classpath/DefaultCachedClasspathTransformerTest.groovy
@@ -47,10 +47,10 @@ import spock.lang.Subject
 import java.util.zip.ZipEntry
 
 class DefaultCachedClasspathTransformerTest extends ConcurrentSpec {
-    private static final String HASH_JAR = "91ec681b708f5791b57ef1225ccbde75"
-    private static final String HASH_JAR_WITH_STORED_RESOURCE = "67661fe89bbac9fbbd0863814999dd24"
-    private static final String HASH_DIR = "26d84a27e45ab67d330b1199328b4ee7"
-    private static final String HASH_COPYING_TRANSFORM_ON_JAR = "o_1f5b1eae547bef94b883b9b49cacc47c"
+    private static final String HASH_JAR = "2237539028494c023ca6ba0154b1b63b"
+    private static final String HASH_JAR_WITH_STORED_RESOURCE = "e592d5efeff1967dd9ef2120b20d9b0f"
+    private static final String HASH_DIR = "dbc7c1d348c743c06d46137f2fdd25e2"
+    private static final String HASH_COPYING_TRANSFORM_ON_JAR = "o_e161f24809571a55f09d3f820c8e5942"
 
     @Rule
     TestNameTestDirectoryProvider testDirectoryProvider = new TestNameTestDirectoryProvider(getClass())
@@ -406,7 +406,7 @@ class DefaultCachedClasspathTransformerTest extends ConcurrentSpec {
         def file = testDir.file("thing.jar")
         jar(file)
         def classpath = DefaultClassPath.of(file)
-        def cachedFile = testDir.file("cached/b4df09c8c528b9489440109655e5b9e2/thing.jar")
+        def cachedFile = testDir.file("cached/447b2b801d9cc27cc9539f0cd2c94692/thing.jar")
 
         when:
         def cachedClasspath = transformer.transform(classpath, transform)
diff --git a/testing/internal-integ-testing/build.gradle.kts b/testing/internal-integ-testing/build.gradle.kts
index da776a2373a..936475deb3c 100644
--- a/testing/internal-integ-testing/build.gradle.kts
+++ b/testing/internal-integ-testing/build.gradle.kts
@@ -7,15 +7,6 @@ plugins {
 
 description = "Collection of test fixtures for integration tests, internal use only"
 
-jvmCompile {
-    compilations {
-        named("main") {
-            // These test fixtures are used by the tooling API tests, which still run on JVM 8
-            targetJvmVersion = 8
-        }
-    }
-}
-
 sourceSets {
     main {
         // Incremental Groovy joint-compilation doesn't work with the Error Prone annotation processor
diff --git a/testing/internal-testing/build.gradle.kts b/testing/internal-testing/build.gradle.kts
index bb84f50c189..5ca3a4ecaa3 100644
--- a/testing/internal-testing/build.gradle.kts
+++ b/testing/internal-testing/build.gradle.kts
@@ -4,15 +4,6 @@ plugins {
 
 description = "Collection of test fixtures for both unit tests and integration tests, internal use only"
 
-jvmCompile {
-    compilations {
-        named("main") {
-            // These test fixtures are used by the tooling API tests, which still run on JVM 8
-            targetJvmVersion = 8
-        }
-    }
-}
-
 sourceSets {
     main {
         // Incremental Groovy joint-compilation doesn't work with the Error Prone annotation processor
diff --git a/testing/smoke-ide-test/build.gradle.kts b/testing/smoke-ide-test/build.gradle.kts
index db6e99acc72..7b30b6fe97a 100644
--- a/testing/smoke-ide-test/build.gradle.kts
+++ b/testing/smoke-ide-test/build.gradle.kts
@@ -12,10 +12,6 @@ val smokeIdeTestSourceSet = sourceSets.create("smokeIdeTest") {
     runtimeClasspath += sourceSets.main.get().output
 }
 
-jvmCompile {
-    addCompilationFrom(smokeIdeTestSourceSet)
-}
-
 dependencyAnalysis {
     issues {
         ignoreSourceSet(smokeIdeTestSourceSet.name)
diff --git a/testing/smoke-test/build.gradle.kts b/testing/smoke-test/build.gradle.kts
index a28183b8847..1663c4d089d 100644
--- a/testing/smoke-test/build.gradle.kts
+++ b/testing/smoke-test/build.gradle.kts
@@ -13,10 +13,6 @@ val smokeTestSourceSet = sourceSets.create("smokeTest") {
     runtimeClasspath += sourceSets.main.get().output
 }
 
-jvmCompile {
-    addCompilationFrom(smokeTestSourceSet)
-}
-
 dependencyAnalysis {
     issues {
         ignoreSourceSet(smokeTestSourceSet.name)
