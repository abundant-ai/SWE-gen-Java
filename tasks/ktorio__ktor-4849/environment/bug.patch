diff --git a/ktor-server/ktor-server-plugins/ktor-server-di/api/ktor-server-di.api b/ktor-server/ktor-server-plugins/ktor-server-di/api/ktor-server-di.api
index f20be0990..0bbfe92ab 100644
--- a/ktor-server/ktor-server-plugins/ktor-server-di/api/ktor-server-di.api
+++ b/ktor-server/ktor-server-plugins/ktor-server-di/api/ktor-server-di.api
@@ -218,6 +218,7 @@ public final class io/ktor/server/plugins/di/DependencyRegistry : io/ktor/server
 	public fun named (Ljava/lang/String;)Lio/ktor/server/plugins/di/DependencyResolverContext;
 	public final fun require (Lio/ktor/server/plugins/di/DependencyKey;)V
 	public fun set (Lio/ktor/server/plugins/di/DependencyKey;Lkotlin/jvm/functions/Function1;)V
+	public final fun validate ()V
 }
 
 public final class io/ktor/server/plugins/di/DependencyRegistryKt {
diff --git a/ktor-server/ktor-server-plugins/ktor-server-di/api/ktor-server-di.klib.api b/ktor-server/ktor-server-plugins/ktor-server-di/api/ktor-server-di.klib.api
index 8ce277fdd..91a00b24b 100644
--- a/ktor-server/ktor-server-plugins/ktor-server-di/api/ktor-server-di.klib.api
+++ b/ktor-server/ktor-server-plugins/ktor-server-di/api/ktor-server-di.klib.api
@@ -233,6 +233,7 @@ final class io.ktor.server.plugins.di/DependencyRegistry : io.ktor.server.plugin
     final fun <#A1: kotlin/Any?> set(io.ktor.server.plugins.di/DependencyKey, kotlin/Function1<io.ktor.server.plugins.di/DependencyResolver, #A1>) // io.ktor.server.plugins.di/DependencyRegistry.set|set(io.ktor.server.plugins.di.DependencyKey;kotlin.Function1<io.ktor.server.plugins.di.DependencyResolver,0:0>){0§<kotlin.Any?>}[0]
     final fun contains(io.ktor.server.plugins.di/DependencyKey): kotlin/Boolean // io.ktor.server.plugins.di/DependencyRegistry.contains|contains(io.ktor.server.plugins.di.DependencyKey){}[0]
     final fun require(io.ktor.server.plugins.di/DependencyKey) // io.ktor.server.plugins.di/DependencyRegistry.require|require(io.ktor.server.plugins.di.DependencyKey){}[0]
+    final fun validate() // io.ktor.server.plugins.di/DependencyRegistry.validate|validate(){}[0]
     final inline fun <#A1: reified kotlin/Any> (io.ktor.server.plugins.di/DependencyProvider).provide(kotlin.reflect/KClass<out #A1>) // io.ktor.server.plugins.di/DependencyRegistry.provide|provide@io.ktor.server.plugins.di.DependencyProvider(kotlin.reflect.KClass<out|0:0>){0§<kotlin.Any>}[0]
     final inline fun <#A1: reified kotlin/Any?> provide(kotlin/String? = ..., noinline kotlin/Function1<io.ktor.server.plugins.di/DependencyResolver, #A1?>) // io.ktor.server.plugins.di/DependencyRegistry.provide|provide(kotlin.String?;kotlin.Function1<io.ktor.server.plugins.di.DependencyResolver,0:0?>){0§<kotlin.Any?>}[0]
     final inline fun <#A1: reified kotlin/Any?> provideDelegate(kotlin/Any?, kotlin.reflect/KProperty<*>): kotlin.properties/ReadOnlyProperty<kotlin/Any?, #A1> // io.ktor.server.plugins.di/DependencyRegistry.provideDelegate|provideDelegate(kotlin.Any?;kotlin.reflect.KProperty<*>){0§<kotlin.Any?>}[0]
@@ -377,4 +378,3 @@ final inline fun <#A: reified kotlin/Any> (io.ktor.server.plugins.di/DependencyR
 final inline fun <#A: reified kotlin/Any> (io.ktor.server.plugins.di/DependencyResolver).io.ktor.server.plugins.di/create(kotlin.reflect/KClass<out #A>): #A // io.ktor.server.plugins.di/create|create@io.ktor.server.plugins.di.DependencyResolver(kotlin.reflect.KClass<out|0:0>){0§<kotlin.Any>}[0]
 final inline fun <#A: reified kotlin/Any?> (io.ktor.server.plugins.di/DependencyMap).io.ktor.server.plugins.di/resolve(kotlin/String? = ...): #A // io.ktor.server.plugins.di/resolve|resolve@io.ktor.server.plugins.di.DependencyMap(kotlin.String?){0§<kotlin.Any?>}[0]
 final inline fun <#A: reified kotlin/Any?> (io.ktor.server.plugins.di/DependencyProvider).io.ktor.server.plugins.di/provide(kotlin/String? = ..., noinline kotlin/Function1<io.ktor.server.plugins.di/DependencyResolver, #A?>) // io.ktor.server.plugins.di/provide|provide@io.ktor.server.plugins.di.DependencyProvider(kotlin.String?;kotlin.Function1<io.ktor.server.plugins.di.DependencyResolver,0:0?>){0§<kotlin.Any?>}[0]
-final inline fun <#A: reified kotlin/Any?> io.ktor.server.plugins.di/DependencyKey(kotlin/String? = ..., kotlin/Any? = ...): io.ktor.server.plugins.di/DependencyKey // io.ktor.server.plugins.di/DependencyKey|DependencyKey(kotlin.String?;kotlin.Any?){0§<kotlin.Any?>}[0]
diff --git a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyInjection.kt b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyInjection.kt
index 0a5b60f27..ffbc567c7 100644
--- a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyInjection.kt
+++ b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyInjection.kt
@@ -80,46 +80,12 @@ public val DI: ApplicationPlugin<DependencyInjectionConfig> =
                 installReference(registry, reference)
             }
             monitor.subscribe(ApplicationModulesLoaded) {
-                val exceptions = mutableListOf<Pair<DependencyKey, Throwable>>()
-                for ((key, source) in registry.requirements) {
-                    try {
-                        registry.get<Any>(key)
-                    } catch (e: Throwable) {
-                        environment.log.error("Cannot resolve $key\n${source.externalTrace()}")
-                        exceptions += key to e
-                    }
-                }
-                when (exceptions.size) {
-                    0 -> environment.log.debug("All dependencies resolved successfully")
-                    else -> {
-                        environment.log.error(
-                            buildString {
-                                append("Dependency resolution failed:")
-                                exceptions.forEach { (key, e) ->
-                                    append("\n  - $key: ${formatError(e)}")
-                                }
-                            }
-                        )
-                        throw DependencyInjectionException(
-                            "Some dependencies could not be resolved; check logs for details"
-                        )
-                    }
-                }
+                registry.validate()
             }
-
             attributes.put(DependencyRegistryKey, registry)
         }
     }
 
-private fun formatError(e: Throwable): String =
-    when (e) {
-        is MissingDependencyException -> "Missing declaration"
-        is CircularDependencyException -> "Circular dependency: ${e.keys.joinToString(" -> ")}"
-        is DuplicateDependencyException -> "Conflicting declaration"
-        is AmbiguousDependencyException -> "Ambiguous dependency: ${e.keys.joinToString(", ")}"
-        else -> e.message ?: ("Unknown error" + e.stackTraceToString().let { "\n$it" })
-    }
-
 private fun PluginBuilder<*>.isTestEngine(): Boolean =
     application.engine::class.simpleName == "TestApplicationEngine"
 
@@ -240,14 +206,6 @@ public data class DependencyKey(
     }
 }
 
-/**
- * Convenience function for `DependencyKey(typeInfo<T>(), name, qualifier)`.
- */
-public inline fun <reified T> DependencyKey(
-    name: String? = null,
-    qualifier: Any? = null,
-): DependencyKey = DependencyKey(typeInfo<T>(), name, qualifier)
-
 /**
  * Determines if the type associated with a `DependencyKey` is nullable.
  *
@@ -278,7 +236,7 @@ public class DuplicateDependencyException(key: DependencyKey) :
 /**
  * Thrown when there are two or more implicit dependencies that match the given key.
  */
-public class AmbiguousDependencyException(key: DependencyKey, internal val keys: Collection<DependencyKey>) :
+public class AmbiguousDependencyException(key: DependencyKey, keys: Collection<DependencyKey>) :
     DependencyInjectionException("Cannot decide which value for $key. Possible implementations: $keys")
 
 /**
diff --git a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyProvider.kt b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyProvider.kt
index 408173ba7..aa29a2146 100644
--- a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyProvider.kt
+++ b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyProvider.kt
@@ -11,8 +11,9 @@ import io.ktor.server.plugins.di.DependencyConflictResult.KeepPrevious
 import io.ktor.server.plugins.di.DependencyConflictResult.Replace
 import io.ktor.util.logging.KtorSimpleLogger
 import io.ktor.util.logging.Logger
-import io.ktor.util.logging.debug
 import io.ktor.util.logging.trace
+import io.ktor.util.reflect.*
+import io.ktor.utils.io.*
 
 /**
  * Represents a provider for managing dependencies in a dependency injection mechanism.
@@ -50,7 +51,7 @@ public inline fun <reified T> DependencyProvider.provide(
     name: String? = null,
     noinline provide: DependencyResolver.() -> T?
 ) {
-    set(DependencyKey<T>(name), provide)
+    set(DependencyKey(typeInfo<T>(), name), provide)
 }
 
 /**
@@ -197,9 +198,6 @@ public open class MapDependencyProvider(
     public val onConflict: (DependencyKey) -> Unit = { throw DuplicateDependencyException(it) },
     private val log: Logger = KtorSimpleLogger("io.ktor.server.plugins.di.MapDependencyProvider"),
 ) : DependencyProvider {
-    private companion object {
-        private const val COVARIANT_LOG_LIMIT = 8
-    }
     private val map = mutableMapOf<DependencyKey, DependencyCreateFunction>()
 
     override val declarations: Map<DependencyKey, DependencyCreateFunction>
@@ -207,7 +205,6 @@ public open class MapDependencyProvider(
 
     override fun <T> set(key: DependencyKey, value: DependencyResolver.() -> T) {
         val create = ExplicitCreateFunction(key, value as DependencyResolver.() -> Any)
-        log.debug { "Provided $key ${DependencyReference().externalTraceLine()}" }
         trySet(key, create)
         insertCovariantKeys(create, key)
     }
@@ -241,16 +238,9 @@ public open class MapDependencyProvider(
         key: DependencyKey
     ) {
         val covariantKeys = keyMapping.map(key, 0).toList()
-        log.trace { "Covariant keys: ${formatKeys(covariantKeys)}" }
+        log.trace { "Inferred keys $key: $covariantKeys" }
         for ((key, distance) in covariantKeys) {
             trySet(key, createFunction.derived(distance))
         }
     }
-
-    private fun formatKeys(keys: List<KeyMatch>): String =
-        if (keys.size > COVARIANT_LOG_LIMIT) {
-            keys.take(COVARIANT_LOG_LIMIT).joinToString { it.key.toString() } + ", ..."
-        } else {
-            keys.joinToString { it.key.toString() }
-        }
 }
diff --git a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyReflection.kt b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyReflection.kt
index b4b3d0bd9..b2ced8b33 100644
--- a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyReflection.kt
+++ b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyReflection.kt
@@ -4,6 +4,7 @@
 
 package io.ktor.server.plugins.di
 
+import io.ktor.util.reflect.*
 import kotlin.reflect.KClass
 
 /**
@@ -41,4 +42,4 @@ public inline fun <reified T : Any> DependencyResolver.create(): T =
  * @return An instance of the specified type [T].
  */
 public inline fun <reified T : Any> DependencyResolver.create(kClass: KClass<out T>): T =
-    getOrPut(DependencyKey<T>()) { reflection.create(kClass, ::get) }
+    getOrPut(DependencyKey(typeInfo<T>())) { reflection.create(kClass, ::get) }
diff --git a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyRegistry.kt b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyRegistry.kt
index 0f8fc6384..9661d561d 100644
--- a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyRegistry.kt
+++ b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyRegistry.kt
@@ -6,6 +6,7 @@ package io.ktor.server.plugins.di
 
 import io.ktor.server.application.*
 import io.ktor.server.plugins.di.MutableDependencyMap.Companion.asResolver
+import io.ktor.util.reflect.typeInfo
 import io.ktor.utils.io.*
 import kotlin.properties.ReadOnlyProperty
 import kotlin.reflect.KClass
@@ -32,7 +33,7 @@ public class DependencyRegistry(
     public override val reflection: DependencyReflection,
 ) : DependencyProvider by provider, DependencyResolver {
 
-    internal val requirements = mutableMapOf<DependencyKey, DependencyReference>()
+    private val requiredKeys = mutableSetOf<DependencyKey>()
     private val resolver: Lazy<DependencyResolver> = lazy {
         resolution.resolve(provider, external, reflection)
     }
@@ -54,17 +55,28 @@ public class DependencyRegistry(
     /**
      * Indicates that the given dependency is required.
      *
-     * The DI plugin enforces this at startup.
+     * This is ensured after `validate()` is called.
      */
     public fun require(key: DependencyKey) {
-        requirements += key to DependencyReference()
+        requiredKeys += key
+    }
+
+    /**
+     * Performs resolutions, ensuring there are no missing dependencies.
+     *
+     * @throws DependencyInjectionException if there are invalid references in the configuration
+     */
+    public fun validate() {
+        for (key in requiredKeys) {
+            resolver.value.get<Any>(key)
+        }
     }
 
     /**
      * Get the dependency from the map for the key represented by the type (and optionally, with the given name).
      */
     public inline fun <reified T> resolve(key: String? = null): T =
-        get(DependencyKey<T>(key))
+        get(DependencyKey(typeInfo<T>(), key))
 
     /**
      * Provides a delegated property for accessing a dependency from a [DependencyRegistry].
@@ -87,7 +99,7 @@ public class DependencyRegistry(
         thisRef: Any?,
         prop: KProperty<*>
     ): ReadOnlyProperty<Any?, T> {
-        val key = DependencyKey<T>()
+        val key = DependencyKey(typeInfo<T>())
             .also(::require)
         return ReadOnlyProperty { _, _ ->
             get(key)
@@ -111,7 +123,7 @@ public class DependencyRegistry(
      * Basic call for providing a dependency, like `provide<Service> { ServiceImpl() }`.
      */
     public inline fun <reified T> provide(name: String? = null, noinline provide: DependencyResolver.() -> T?) {
-        set(DependencyKey<T>(name), provide)
+        set(DependencyKey(typeInfo<T>(), name), provide)
     }
 }
 
@@ -208,25 +220,3 @@ public class ProcessingDependencyResolver(
             null
         }
 }
-
-/**
- * Used for tracing references to dependency keys in the application.
- *
- * Both called for lazy `resolve` access and `provide` for easier debugging.
- */
-internal class DependencyReference : Throwable() {
-
-    /**
-     * Gets the first external API line from the stack trace.
-     */
-    fun externalTraceLine(): String =
-        externalTrace().substringBefore('\n').trim()
-
-    /**
-     * Get the stack trace string from the point of the first external API frame.
-     */
-    fun externalTrace(): String =
-        stackTraceToString()
-            .substringAfterLast("io.ktor.server.plugins.di")
-            .substringAfter('\n')
-}
diff --git a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyResolution.kt b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyResolution.kt
index cee4a81a4..4f283fe69 100644
--- a/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyResolution.kt
+++ b/ktor-server/ktor-server-plugins/ktor-server-di/common/src/io/ktor/server/plugins/di/DependencyResolution.kt
@@ -6,6 +6,7 @@ package io.ktor.server.plugins.di
 
 import io.ktor.server.config.ApplicationConfig
 import io.ktor.server.config.SerializableConfigValue
+import io.ktor.util.reflect.*
 import kotlin.reflect.KProperty
 
 /**
@@ -172,7 +173,7 @@ public operator fun DependencyMap.plus(right: DependencyMap): DependencyMap =
  * Get the dependency from the map for the key represented by the type (and optionally, with the given name).
  */
 public inline fun <reified T> DependencyMap.resolve(key: String? = null): T =
-    get(DependencyKey<T>(key))
+    get(DependencyKey(typeInfo<T>(), key))
 
 internal class MergedDependencyMap(
     private val left: DependencyMap,
@@ -230,5 +231,5 @@ public data class DependencyResolverContext(
      * Get the dependency from the map for the key represented by the type (and optionally, with the given name).
      */
     public inline fun <reified T> DependencyMap.resolve(key: String? = null): T =
-        get(DependencyKey<T>(key))
+        get(DependencyKey(typeInfo<T>(), key))
 }
diff --git a/ktor-server/ktor-server-plugins/ktor-server-di/common/test/io/ktor/server/plugins/di/DependencyInjectionTest.kt b/ktor-server/ktor-server-plugins/ktor-server-di/common/test/io/ktor/server/plugins/di/DependencyInjectionTest.kt
index 8c2081aa0..1ebc45dbe 100644
--- a/ktor-server/ktor-server-plugins/ktor-server-di/common/test/io/ktor/server/plugins/di/DependencyInjectionTest.kt
+++ b/ktor-server/ktor-server-plugins/ktor-server-di/common/test/io/ktor/server/plugins/di/DependencyInjectionTest.kt
@@ -7,11 +7,13 @@ package io.ktor.server.plugins.di
 import io.ktor.client.request.get
 import io.ktor.client.statement.bodyAsText
 import io.ktor.server.application.*
+import io.ktor.server.plugins.di.dependencies
 import io.ktor.server.response.respondText
 import io.ktor.server.routing.*
 import io.ktor.server.testing.*
 import io.ktor.test.dispatcher.runTestWithRealTime
 import io.ktor.util.logging.Logger
+import io.ktor.util.reflect.*
 import kotlinx.coroutines.test.TestResult
 import kotlinx.serialization.Serializable
 import kotlin.reflect.KClass
@@ -118,23 +120,16 @@ class DependencyInjectionTest {
     @Test
     fun `fails on server startup`() = runTestWithRealTime {
         val infoLogs = mutableListOf<String>()
-        val errorLogs = mutableListOf<String>()
-        assertFailsWith<DependencyInjectionException> {
+        assertFailsWith<MissingDependencyException> {
             runTestApplication {
                 environment {
                     log = object : Logger by log {
                         override fun info(message: String) {
                             infoLogs += message
                         }
-                        override fun error(message: String) {
-                            errorLogs += message
-                        }
                     }
                 }
                 application {
-                    dependencies {
-                        provide<BankService> { BankServiceImpl() }
-                    }
                     val service: GreetingService by dependencies
                     routing {
                         get("/ok") {
@@ -155,12 +150,6 @@ class DependencyInjectionTest {
                 "Application started" in message
             }
         )
-        assertEquals(2, errorLogs.size)
-        val (missing, summary) = errorLogs
-        val missingKey = DependencyKey<GreetingService>()
-        assertContains(missing, "Cannot resolve $missingKey")
-        assertContains(summary, "Dependency resolution failed")
-        assertContains(summary, "$missingKey: Missing declaration")
     }
 
     @Test
@@ -302,7 +291,7 @@ class DependencyInjectionTest {
             dependencies {
                 provide<GreetingService> { GreetingServiceImpl() }
             }
-            assertEquals(listOf(DependencyKey<GreetingService>()), assignmentKeys)
+            assertEquals(listOf(DependencyKey(typeInfo<GreetingService>())), assignmentKeys)
         }
     }
 
@@ -325,7 +314,7 @@ class DependencyInjectionTest {
 
     @Test
     fun `external maps`() = runTestDI({
-        include(dependencyMapOf(DependencyKey<GreetingService>() to GreetingServiceImpl()))
+        include(dependencyMapOf(DependencyKey(typeInfo<GreetingService>()) to GreetingServiceImpl()))
     }) {
         val service: GreetingService by dependencies
         assertEquals(HELLO, service.hello())
@@ -333,8 +322,8 @@ class DependencyInjectionTest {
 
     @Test
     fun `external map order precedence`() = runTestDI({
-        include(dependencyMapOf(DependencyKey<GreetingService>() to GreetingServiceImpl()))
-        include(dependencyMapOf(DependencyKey<GreetingService>() to BankGreetingService()))
+        include(dependencyMapOf(DependencyKey(typeInfo<GreetingService>()) to GreetingServiceImpl()))
+        include(dependencyMapOf(DependencyKey(typeInfo<GreetingService>()) to BankGreetingService()))
     }) {
         val service: GreetingService by dependencies
         assertEquals(HELLO_CUSTOMER, service.hello())
@@ -342,7 +331,7 @@ class DependencyInjectionTest {
 
     @Test
     fun `external map declarations precedence`() = runTestDI({
-        include(dependencyMapOf(DependencyKey<GreetingService>() to GreetingServiceImpl()))
+        include(dependencyMapOf(DependencyKey(typeInfo<GreetingService>()) to GreetingServiceImpl()))
     }) {
         dependencies.provide<GreetingService> { BankGreetingService() }
 
