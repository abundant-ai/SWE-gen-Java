diff --git a/kotlin/codegen/pom.xml b/kotlin/codegen/pom.xml
index f80ace23..dc8f7304 100644
--- a/kotlin/codegen/pom.xml
+++ b/kotlin/codegen/pom.xml
@@ -25,7 +25,7 @@
     <dependency>
       <groupId>com.squareup</groupId>
       <artifactId>kotlinpoet</artifactId>
-      <version>1.0.1</version>
+      <version>1.0.0</version>
     </dependency>
     <dependency>
       <groupId>com.google.auto</groupId>
diff --git a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/TypeResolver.kt b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/TypeResolver.kt
index acd9fbc0..3843c926 100644
--- a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/TypeResolver.kt
+++ b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/TypeResolver.kt
@@ -35,18 +35,18 @@ open class TypeResolver {
 
       is ParameterizedTypeName -> {
             typeName.rawType.parameterizedBy(*(typeName.typeArguments.map { resolve(it) }.toTypedArray()))
-            .copy(nullable = typeName.isNullable)
+            .asNullableIf(typeName.isNullable)
       }
 
       is WildcardTypeName -> {
         when {
           typeName.inTypes.size == 1 -> {
             WildcardTypeName.consumerOf(resolve(typeName.inTypes[0]))
-                .copy(nullable = typeName.isNullable)
+                .asNullableIf(typeName.isNullable)
           }
           typeName.outTypes.size == 1 -> {
             WildcardTypeName.producerOf(resolve(typeName.outTypes[0]))
-                .copy(nullable = typeName.isNullable)
+                .asNullableIf(typeName.isNullable)
           }
           else -> {
             throw IllegalArgumentException(
diff --git a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/kotlintypes.kt b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/kotlintypes.kt
index 5387b604..b1169434 100644
--- a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/kotlintypes.kt
+++ b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/kotlintypes.kt
@@ -26,3 +26,7 @@ internal fun TypeName.rawType(): ClassName {
     else -> throw IllegalArgumentException("Cannot get raw type from $this")
   }
 }
+
+internal fun TypeName.asNullableIf(condition: Boolean): TypeName {
+  return if (condition) copy(nullable = true) else this
+}
diff --git a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/metadata.kt b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/metadata.kt
index bb1aeaec..55173522 100644
--- a/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/metadata.kt
+++ b/kotlin/codegen/src/main/java/com/squareup/moshi/kotlin/codegen/metadata.kt
@@ -77,17 +77,17 @@ internal fun Type.asTypeName(
   if (hasFlexibleUpperBound()) {
     return WildcardTypeName.producerOf(
         flexibleUpperBound.asTypeName(nameResolver, getTypeParameter, useAbbreviatedType))
-        .copy(nullable = nullable)
+        .asNullableIf(nullable)
   } else if (hasOuterType()) {
     return WildcardTypeName.consumerOf(
         outerType.asTypeName(nameResolver, getTypeParameter, useAbbreviatedType))
-        .copy(nullable = nullable)
+        .asNullableIf(nullable)
   }
 
   val realType = when {
     hasTypeParameter() -> return getTypeParameter(typeParameter)
         .asTypeName(nameResolver, getTypeParameter, useAbbreviatedType)
-        .copy(nullable = nullable)
+        .asNullableIf(nullable)
     hasTypeParameterName() -> typeParameterName
     useAbbreviatedType && hasAbbreviatedType() -> abbreviatedType.typeAliasName
     else -> className
@@ -121,5 +121,5 @@ internal fun Type.asTypeName(
     typeName = (typeName as ClassName).parameterizedBy(*remappedArgs)
   }
 
-  return typeName.copy(nullable = nullable)
+  return typeName.asNullableIf(nullable)
 }
diff --git a/kotlin/tests/src/test/kotlin/com/squareup/moshi/kotlin/codgen/LooksLikeAClass/ClassInPackageThatLooksLikeAClass.kt b/kotlin/tests/src/test/kotlin/com/squareup/moshi/kotlin/codgen/LooksLikeAClass/ClassInPackageThatLooksLikeAClass.kt
deleted file mode 100644
index 22cf6199..00000000
--- a/kotlin/tests/src/test/kotlin/com/squareup/moshi/kotlin/codgen/LooksLikeAClass/ClassInPackageThatLooksLikeAClass.kt
+++ /dev/null
@@ -1,9 +0,0 @@
-package com.squareup.moshi.kotlin.codgen.LooksLikeAClass
-
-import com.squareup.moshi.JsonClass
-
-/**
- * https://github.com/square/moshi/issues/783
- */
-@JsonClass(generateAdapter = true)
-data class ClassInPackageThatLooksLikeAClass(val foo: String)
\ No newline at end of file
