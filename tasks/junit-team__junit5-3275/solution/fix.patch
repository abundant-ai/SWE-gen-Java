diff --git a/documentation/src/docs/asciidoc/release-notes/release-notes-5.10.0-M1.adoc b/documentation/src/docs/asciidoc/release-notes/release-notes-5.10.0-M1.adoc
index 14d07a5f0..9a11fb59b 100644
--- a/documentation/src/docs/asciidoc/release-notes/release-notes-5.10.0-M1.adoc
+++ b/documentation/src/docs/asciidoc/release-notes/release-notes-5.10.0-M1.adoc
@@ -106,6 +106,8 @@ repository on GitHub.
   temporary directories. See the
   <<../user-guide/index.adoc#writing-tests-built-in-extensions-TempDirectory, User Guide>>
   for details.
+* New `junit.jupiter.tempdir.factory.default` configuration parameter to set the default
+  `TempDirFactory` for temporary directories.
 * If `@MethodSource` is used with a non-static factory method that should be `static`, the
   exception thrown now provides the user a meaningful explanation of how to address the
   problem.
diff --git a/documentation/src/docs/asciidoc/user-guide/writing-tests.adoc b/documentation/src/docs/asciidoc/user-guide/writing-tests.adoc
index 9b355fce5..cdbba9435 100644
--- a/documentation/src/docs/asciidoc/user-guide/writing-tests.adoc
+++ b/documentation/src/docs/asciidoc/user-guide/writing-tests.adoc
@@ -2643,3 +2643,19 @@ temporary directory. The following example shows how to do it.
 ----
 include::{testDir}/example/TempDirectoryDemo.java[tags=user_guide_factory_jimfs]
 ----
+
+You can use the `junit.jupiter.tempdir.factory.default`
+<<running-tests-config-params, configuration parameter>> to specify the fully qualified
+class name of the `TempDirFactory` you would like to use by default. Just like for
+factories configured via the `factory` attribute of the `@TempDir` annotation,
+the supplied class has to implement the `TempDirFactory` interface. The default factory
+will be used for all `@TempDir` annotations unless the `factory` attribute of the
+annotation specifies a different factory.
+
+In summary, the factory for a temporary directory is determined according to the
+following precedence rules:
+
+1. The `factory` attribute of the `@TempDir` annotation, if present
+2. The default `TempDirFactory` configured via the configuration
+parameter, if present
+3. Otherwise, `org.junit.jupiter.api.io.TempDirFactory$Standard` will be used.
diff --git a/junit-jupiter-api/src/main/java/org/junit/jupiter/api/io/TempDir.java b/junit-jupiter-api/src/main/java/org/junit/jupiter/api/io/TempDir.java
index 13a94f78c..2a39549fd 100644
--- a/junit-jupiter-api/src/main/java/org/junit/jupiter/api/io/TempDir.java
+++ b/junit-jupiter-api/src/main/java/org/junit/jupiter/api/io/TempDir.java
@@ -26,7 +26,6 @@ import java.nio.file.Path;
 import org.apiguardian.api.API;
 import org.junit.jupiter.api.extension.ExtensionConfigurationException;
 import org.junit.jupiter.api.extension.ParameterResolutionException;
-import org.junit.jupiter.api.io.TempDirFactory.Standard;
 
 /**
  * {@code @TempDir} can be used to annotate a field in a test class or a
@@ -97,6 +96,22 @@ import org.junit.jupiter.api.io.TempDirFactory.Standard;
 @API(status = STABLE, since = "5.10")
 public @interface TempDir {
 
+	/**
+	 * Property name used to set the default temporary directory factory class name:
+	 * {@value}
+	 *
+	 * <h4>Supported Values</h4>
+	 *
+	 * <p>Supported values include fully qualified class names for types that
+	 * implement {@link TempDirFactory}.
+	 *
+	 * <p>If not specified, the default is {@link TempDirFactory.Standard}.
+	 *
+	 * @since 5.10
+	 */
+	@API(status = EXPERIMENTAL, since = "5.10")
+	String DEFAULT_FACTORY_PROPERTY_NAME = "junit.jupiter.tempdir.factory.default";
+
 	/**
 	 * Factory for the temporary directory.
 	 *
@@ -105,12 +120,19 @@ public @interface TempDir {
 	 *
 	 * <p>Defaults to {@link TempDirFactory.Standard}.
 	 *
+	 * <p>As an alternative to setting this attribute, a global
+	 * {@link TempDirFactory} can be configured for the entire test suite via
+	 * the {@value #DEFAULT_FACTORY_PROPERTY_NAME} configuration parameter.
+	 * See the User Guide for details. Note, however, that a {@code @TempDir}
+	 * declaration with a custom {@code factory} always overrides a global
+	 * {@code TempDirFactory}.
+	 *
 	 * @return the type of {@code TempDirFactory} to use
 	 * @since 5.10
 	 * @see TempDirFactory
 	 */
 	@API(status = EXPERIMENTAL, since = "5.10")
-	Class<? extends TempDirFactory> factory() default Standard.class;
+	Class<? extends TempDirFactory> factory() default TempDirFactory.class;
 
 	/**
 	 * Property name used to set the scope of temporary directories created via
diff --git a/junit-jupiter-api/src/main/java/org/junit/jupiter/api/io/TempDirFactory.java b/junit-jupiter-api/src/main/java/org/junit/jupiter/api/io/TempDirFactory.java
index 3ee97de2e..910daec3e 100644
--- a/junit-jupiter-api/src/main/java/org/junit/jupiter/api/io/TempDirFactory.java
+++ b/junit-jupiter-api/src/main/java/org/junit/jupiter/api/io/TempDirFactory.java
@@ -30,8 +30,11 @@ import org.junit.jupiter.api.extension.ExtensionContext;
  *
  * <p>Concrete implementations must have a <em>default constructor</em>.
  *
- * <p>A {@link TempDirFactory} can be configured <em>locally</em> for a test class
- * field or method parameter via the {@link TempDir @TempDir} annotation.
+ * <p>A {@link TempDirFactory} can be configured <em>globally</em> for the
+ * entire test suite via the {@value TempDir#DEFAULT_FACTORY_PROPERTY_NAME}
+ * configuration parameter (see the User Guide for details) or <em>locally</em>
+ * for a test class field or method parameter via the {@link TempDir @TempDir}
+ * annotation.
  *
  * @since 5.10
  * @see TempDir @TempDir
diff --git a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/Constants.java b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/Constants.java
index fbde0fc11..f4e4dc9ca 100644
--- a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/Constants.java
+++ b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/Constants.java
@@ -359,6 +359,16 @@ public final class Constants {
 	@API(status = EXPERIMENTAL, since = "5.9")
 	public static final String DEFAULT_TIMEOUT_THREAD_MODE_PROPERTY_NAME = Timeout.DEFAULT_TIMEOUT_THREAD_MODE_PROPERTY_NAME;
 
+	/**
+	 * Property name used to set the default factory for temporary directories created via
+	 * {@link TempDir @TempDir} annotation: {@value}
+	 *
+	 * @since 5.10
+	 * @see TempDir#DEFAULT_FACTORY_PROPERTY_NAME
+	 */
+	@API(status = EXPERIMENTAL, since = "5.10")
+	public static final String DEFAULT_TEMP_DIR_FACTORY_PROPERTY_NAME = TempDir.DEFAULT_FACTORY_PROPERTY_NAME;
+
 	private Constants() {
 		/* no-op */
 	}
diff --git a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/CachingJupiterConfiguration.java b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/CachingJupiterConfiguration.java
index ebf547344..2d61b58c1 100644
--- a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/CachingJupiterConfiguration.java
+++ b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/CachingJupiterConfiguration.java
@@ -12,11 +12,13 @@ package org.junit.jupiter.engine.config;
 
 import static org.apiguardian.api.API.Status.INTERNAL;
 import static org.junit.jupiter.api.io.TempDir.DEFAULT_CLEANUP_MODE_PROPERTY_NAME;
+import static org.junit.jupiter.api.io.TempDir.DEFAULT_FACTORY_PROPERTY_NAME;
 
 import java.util.Optional;
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.function.Function;
 import java.util.function.Predicate;
+import java.util.function.Supplier;
 
 import org.apiguardian.api.API;
 import org.junit.jupiter.api.ClassOrderer;
@@ -25,6 +27,7 @@ import org.junit.jupiter.api.MethodOrderer;
 import org.junit.jupiter.api.TestInstance;
 import org.junit.jupiter.api.extension.ExecutionCondition;
 import org.junit.jupiter.api.io.CleanupMode;
+import org.junit.jupiter.api.io.TempDirFactory;
 import org.junit.jupiter.api.parallel.ExecutionMode;
 
 /**
@@ -115,4 +118,11 @@ public class CachingJupiterConfiguration implements JupiterConfiguration {
 			key -> delegate.getDefaultTempDirCleanupMode());
 	}
 
+	@SuppressWarnings("unchecked")
+	@Override
+	public Supplier<TempDirFactory> getDefaultTempDirFactorySupplier() {
+		return (Supplier<TempDirFactory>) cache.computeIfAbsent(DEFAULT_FACTORY_PROPERTY_NAME,
+			key -> delegate.getDefaultTempDirFactorySupplier());
+	}
+
 }
diff --git a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/DefaultJupiterConfiguration.java b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/DefaultJupiterConfiguration.java
index ae8a49449..d64c4ceee 100644
--- a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/DefaultJupiterConfiguration.java
+++ b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/DefaultJupiterConfiguration.java
@@ -13,10 +13,12 @@ package org.junit.jupiter.engine.config;
 import static org.apiguardian.api.API.Status.INTERNAL;
 import static org.junit.jupiter.api.io.CleanupMode.ALWAYS;
 import static org.junit.jupiter.api.io.TempDir.DEFAULT_CLEANUP_MODE_PROPERTY_NAME;
+import static org.junit.jupiter.api.io.TempDir.DEFAULT_FACTORY_PROPERTY_NAME;
 
 import java.util.Optional;
 import java.util.function.Function;
 import java.util.function.Predicate;
+import java.util.function.Supplier;
 
 import org.apiguardian.api.API;
 import org.junit.jupiter.api.ClassOrderer;
@@ -25,6 +27,7 @@ import org.junit.jupiter.api.MethodOrderer;
 import org.junit.jupiter.api.TestInstance.Lifecycle;
 import org.junit.jupiter.api.extension.ExecutionCondition;
 import org.junit.jupiter.api.io.CleanupMode;
+import org.junit.jupiter.api.io.TempDirFactory;
 import org.junit.jupiter.api.parallel.ExecutionMode;
 import org.junit.platform.commons.util.ClassNamePatternFilterUtils;
 import org.junit.platform.commons.util.Preconditions;
@@ -56,6 +59,9 @@ public class DefaultJupiterConfiguration implements JupiterConfiguration {
 	private static final EnumConfigurationParameterConverter<CleanupMode> cleanupModeConverter = //
 		new EnumConfigurationParameterConverter<>(CleanupMode.class, "cleanup mode");
 
+	private static final InstantiatingConfigurationParameterConverter<TempDirFactory> tempDirFactoryConverter = //
+		new InstantiatingConfigurationParameterConverter<>(TempDirFactory.class, "temp dir factory");
+
 	private final ConfigurationParameters configurationParameters;
 
 	public DefaultJupiterConfiguration(ConfigurationParameters configurationParameters) {
@@ -128,4 +134,11 @@ public class DefaultJupiterConfiguration implements JupiterConfiguration {
 		return cleanupModeConverter.get(configurationParameters, DEFAULT_CLEANUP_MODE_PROPERTY_NAME, ALWAYS);
 	}
 
+	@Override
+	public Supplier<TempDirFactory> getDefaultTempDirFactorySupplier() {
+		Supplier<Optional<TempDirFactory>> supplier = tempDirFactoryConverter.supply(configurationParameters,
+			DEFAULT_FACTORY_PROPERTY_NAME);
+		return () -> supplier.get().orElse(TempDirFactory.Standard.INSTANCE);
+	}
+
 }
diff --git a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/InstantiatingConfigurationParameterConverter.java b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/InstantiatingConfigurationParameterConverter.java
index 7f77d4712..ddc5acd12 100644
--- a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/InstantiatingConfigurationParameterConverter.java
+++ b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/InstantiatingConfigurationParameterConverter.java
@@ -11,7 +11,9 @@
 package org.junit.jupiter.engine.config;
 
 import java.util.Optional;
+import java.util.function.Supplier;
 
+import org.junit.platform.commons.function.Try;
 import org.junit.platform.commons.logging.Logger;
 import org.junit.platform.commons.logging.LoggerFactory;
 import org.junit.platform.commons.util.ReflectionUtils;
@@ -33,18 +35,23 @@ class InstantiatingConfigurationParameterConverter<T> {
 	}
 
 	Optional<T> get(ConfigurationParameters configurationParameters, String key) {
+		return supply(configurationParameters, key).get();
+	}
+
+	Supplier<Optional<T>> supply(ConfigurationParameters configurationParameters, String key) {
 		// @formatter:off
 		return configurationParameters.get(key)
 				.map(String::trim)
 				.filter(className -> !className.isEmpty())
-				.flatMap(className -> newInstance(className, key));
+				.map(className -> newInstanceSupplier(className, key))
+				.orElse(Optional::empty);
 		// @formatter:on
 	}
 
-	private Optional<T> newInstance(String className, String key) {
+	private Supplier<Optional<T>> newInstanceSupplier(String className, String key) {
+		Try<Class<?>> clazz = ReflectionUtils.tryToLoadClass(className);
 		// @formatter:off
-		return ReflectionUtils.tryToLoadClass(className)
-				.andThenTry(ReflectionUtils::newInstance)
+		return () -> clazz.andThenTry(ReflectionUtils::newInstance)
 				.andThenTry(this.clazz::cast)
 				.ifSuccess(generator -> logSuccessMessage(className, key))
 				.ifFailure(cause -> logFailureMessage(className, key, cause))
diff --git a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/JupiterConfiguration.java b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/JupiterConfiguration.java
index d0027c15e..559b4d7d5 100644
--- a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/JupiterConfiguration.java
+++ b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/config/JupiterConfiguration.java
@@ -15,6 +15,7 @@ import static org.apiguardian.api.API.Status.INTERNAL;
 import java.util.Optional;
 import java.util.function.Function;
 import java.util.function.Predicate;
+import java.util.function.Supplier;
 
 import org.apiguardian.api.API;
 import org.junit.jupiter.api.ClassOrderer;
@@ -23,6 +24,7 @@ import org.junit.jupiter.api.MethodOrderer;
 import org.junit.jupiter.api.TestInstance;
 import org.junit.jupiter.api.extension.ExecutionCondition;
 import org.junit.jupiter.api.io.CleanupMode;
+import org.junit.jupiter.api.io.TempDirFactory;
 import org.junit.jupiter.api.parallel.Execution;
 import org.junit.jupiter.api.parallel.ExecutionMode;
 
@@ -66,4 +68,6 @@ public interface JupiterConfiguration {
 
 	CleanupMode getDefaultTempDirCleanupMode();
 
+	Supplier<TempDirFactory> getDefaultTempDirFactorySupplier();
+
 }
diff --git a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/extension/TempDirectory.java b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/extension/TempDirectory.java
index 3cd8a47fc..d8dbdd377 100644
--- a/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/extension/TempDirectory.java
+++ b/junit-jupiter-engine/src/main/java/org/junit/jupiter/engine/extension/TempDirectory.java
@@ -117,15 +117,17 @@ class TempDirectory implements BeforeAllCallback, BeforeEachCallback, ParameterR
 	private void injectFields(ExtensionContext context, Object testInstance, Class<?> testClass,
 			Predicate<Field> predicate) {
 
+		Scope scope = getScope(context);
+
 		findAnnotatedFields(testClass, TempDir.class, predicate).forEach(field -> {
 			assertNonFinalField(field);
 			assertSupportedType("field", field.getType());
 
 			try {
 				CleanupMode cleanupMode = determineCleanupModeForField(field);
-				TempDirFactory factory = getTempDirFactoryForField(field);
+				TempDirFactory factory = determineTempDirFactoryForField(field, scope);
 				makeAccessible(field).set(testInstance,
-					getPathOrFile(field, field.getType(), factory, cleanupMode, context));
+					getPathOrFile(field, field.getType(), factory, cleanupMode, scope, context));
 			}
 			catch (Throwable t) {
 				ExceptionUtils.throwAsUncheckedException(t);
@@ -156,8 +158,10 @@ class TempDirectory implements BeforeAllCallback, BeforeEachCallback, ParameterR
 		Class<?> parameterType = parameterContext.getParameter().getType();
 		assertSupportedType("parameter", parameterType);
 		CleanupMode cleanupMode = determineCleanupModeForParameter(parameterContext);
-		TempDirFactory factory = getTempDirFactoryForParameter(parameterContext);
-		return getPathOrFile(parameterContext.getParameter(), parameterType, factory, cleanupMode, extensionContext);
+		Scope scope = getScope(extensionContext);
+		TempDirFactory factory = determineTempDirFactoryForParameter(parameterContext, scope);
+		return getPathOrFile(parameterContext.getParameter(), parameterType, factory, cleanupMode, scope,
+			extensionContext);
 	}
 
 	private CleanupMode determineCleanupModeForField(Field field) {
@@ -177,22 +181,40 @@ class TempDirectory implements BeforeAllCallback, BeforeEachCallback, ParameterR
 		return cleanupMode == DEFAULT ? this.configuration.getDefaultTempDirCleanupMode() : cleanupMode;
 	}
 
-	private TempDirFactory getTempDirFactoryForField(Field field) {
+	@SuppressWarnings("deprecation")
+	private Scope getScope(ExtensionContext context) {
+		return context.getRoot().getStore(NAMESPACE).getOrComputeIfAbsent( //
+			Scope.class, //
+			__ -> new EnumConfigurationParameterConverter<>(Scope.class, "@TempDir scope") //
+					.get(TempDir.SCOPE_PROPERTY_NAME, context::getConfigurationParameter, Scope.PER_DECLARATION), //
+			Scope.class //
+		);
+	}
+
+	private TempDirFactory determineTempDirFactoryForField(Field field, Scope scope) {
 		TempDir tempDir = findAnnotation(field, TempDir.class).orElseThrow(
 			() -> new JUnitException("Field " + field + " must be annotated with @TempDir"));
-		return getTempDirFactory(tempDir);
+		return determineTempDirFactory(tempDir, scope);
 	}
 
-	private TempDirFactory getTempDirFactoryForParameter(ParameterContext parameterContext) {
+	private TempDirFactory determineTempDirFactoryForParameter(ParameterContext parameterContext, Scope scope) {
 		TempDir tempDir = parameterContext.findAnnotation(TempDir.class).orElseThrow(() -> new JUnitException(
 			"Parameter " + parameterContext.getParameter() + " must be annotated with @TempDir"));
-		return getTempDirFactory(tempDir);
+		return determineTempDirFactory(tempDir, scope);
 	}
 
-	private static TempDirFactory getTempDirFactory(TempDir tempDir) {
+	@SuppressWarnings("deprecation")
+	private TempDirFactory determineTempDirFactory(TempDir tempDir, Scope scope) {
 		Class<? extends TempDirFactory> factory = tempDir.factory();
-		return factory == TempDirFactory.Standard.class //
-				? TempDirFactory.Standard.INSTANCE
+
+		if (factory != TempDirFactory.class && scope == Scope.PER_CONTEXT) {
+			throw new ExtensionConfigurationException("Custom @TempDir factory is not supported with "
+					+ TempDir.SCOPE_PROPERTY_NAME + "=" + Scope.PER_CONTEXT.name().toLowerCase() + ". Use "
+					+ TempDir.DEFAULT_FACTORY_PROPERTY_NAME + " instead.");
+		}
+
+		return factory == TempDirFactory.class //
+				? this.configuration.getDefaultTempDirFactorySupplier().get()
 				: ReflectionUtils.newInstance(factory);
 	}
 
@@ -209,16 +231,8 @@ class TempDirectory implements BeforeAllCallback, BeforeEachCallback, ParameterR
 		}
 	}
 
-	@SuppressWarnings("deprecation")
 	private Object getPathOrFile(AnnotatedElement sourceElement, Class<?> type, TempDirFactory factory,
-			CleanupMode cleanupMode, ExtensionContext extensionContext) {
-		Scope scope = getScope(extensionContext);
-
-		if (scope == Scope.PER_CONTEXT && factory != TempDirFactory.Standard.INSTANCE) {
-			throw new ExtensionConfigurationException("Custom @TempDir factory is not supported with "
-					+ TempDir.SCOPE_PROPERTY_NAME + "=" + Scope.PER_CONTEXT.toString().toLowerCase());
-		}
-
+			CleanupMode cleanupMode, Scope scope, ExtensionContext extensionContext) {
 		Namespace namespace = scope == Scope.PER_DECLARATION //
 				? NAMESPACE.append(sourceElement) //
 				: NAMESPACE;
@@ -230,16 +244,6 @@ class TempDirectory implements BeforeAllCallback, BeforeEachCallback, ParameterR
 		return (type == Path.class) ? path : path.toFile();
 	}
 
-	@SuppressWarnings("deprecation")
-	private Scope getScope(ExtensionContext context) {
-		return context.getRoot().getStore(NAMESPACE).getOrComputeIfAbsent( //
-			Scope.class, //
-			__ -> new EnumConfigurationParameterConverter<>(Scope.class, "@TempDir scope") //
-					.get(TempDir.SCOPE_PROPERTY_NAME, context::getConfigurationParameter, Scope.PER_DECLARATION), //
-			Scope.class //
-		);
-	}
-
 	static CloseablePath createTempDir(TempDirFactory factory, CleanupMode cleanupMode,
 			ExtensionContext executionContext) {
 		try {
@@ -273,21 +277,24 @@ class TempDirectory implements BeforeAllCallback, BeforeEachCallback, ParameterR
 
 		@Override
 		public void close() throws IOException {
-			if (cleanupMode == NEVER
-					|| (cleanupMode == ON_SUCCESS && executionContext.getExecutionException().isPresent())) {
-				logger.info(() -> "Skipping cleanup of temp dir " + dir + " due to cleanup mode configuration.");
-				return;
-			}
+			try {
+				if (cleanupMode == NEVER
+						|| (cleanupMode == ON_SUCCESS && executionContext.getExecutionException().isPresent())) {
+					logger.info(() -> "Skipping cleanup of temp dir " + dir + " due to cleanup mode configuration.");
+					return;
+				}
 
-			FileOperations fileOperations = executionContext.getStore(NAMESPACE) //
-					.getOrDefault(FILE_OPERATIONS_KEY, FileOperations.class, FileOperations.DEFAULT);
+				FileOperations fileOperations = executionContext.getStore(NAMESPACE) //
+						.getOrDefault(FILE_OPERATIONS_KEY, FileOperations.class, FileOperations.DEFAULT);
 
-			SortedMap<Path, IOException> failures = deleteAllFilesAndDirectories(fileOperations);
-			if (!failures.isEmpty()) {
-				throw createIOExceptionWithAttachedFailures(failures);
+				SortedMap<Path, IOException> failures = deleteAllFilesAndDirectories(fileOperations);
+				if (!failures.isEmpty()) {
+					throw createIOExceptionWithAttachedFailures(failures);
+				}
+			}
+			finally {
+				factory.close();
 			}
-
-			factory.close();
 		}
 
 		private SortedMap<Path, IOException> deleteAllFilesAndDirectories(FileOperations fileOperations)
