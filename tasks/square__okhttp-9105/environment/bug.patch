diff --git a/okhttp/src/commonJvmAndroid/kotlin/okhttp3/Request.kt b/okhttp/src/commonJvmAndroid/kotlin/okhttp3/Request.kt
index 1f0a68e50..071490bec 100644
--- a/okhttp/src/commonJvmAndroid/kotlin/okhttp3/Request.kt
+++ b/okhttp/src/commonJvmAndroid/kotlin/okhttp3/Request.kt
@@ -82,10 +82,8 @@ class Request internal constructor(
 
   init {
     val connectionHeader = headers["Connection"]
-    if ("upgrade".equals(connectionHeader, ignoreCase = true)) {
-      require(body == null || body.contentLength() == 0L) {
-        "expected a null or empty request body with 'Connection: upgrade'"
-      }
+    require(body == null || !"upgrade".equals(connectionHeader, ignoreCase = true)) {
+      "expected a null request body with 'Connection: upgrade'"
     }
   }
 
diff --git a/okhttp/src/commonJvmAndroid/kotlin/okhttp3/internal/http/CallServerInterceptor.kt b/okhttp/src/commonJvmAndroid/kotlin/okhttp3/internal/http/CallServerInterceptor.kt
index f87deff9f..da5a00adc 100644
--- a/okhttp/src/commonJvmAndroid/kotlin/okhttp3/internal/http/CallServerInterceptor.kt
+++ b/okhttp/src/commonJvmAndroid/kotlin/okhttp3/internal/http/CallServerInterceptor.kt
@@ -40,7 +40,9 @@ object CallServerInterceptor : Interceptor {
     var responseBuilder: Response.Builder? = null
     var sendRequestException: IOException? = null
     val hasRequestBody = HttpMethod.permitsRequestBody(request.method) && requestBody != null
-    val isUpgradeRequest = "upgrade".equals(request.header("Connection"), ignoreCase = true)
+    val isUpgradeRequest =
+      !hasRequestBody &&
+        "upgrade".equals(request.header("Connection"), ignoreCase = true)
     try {
       exchange.writeRequestHeaders(request)
 
diff --git a/okhttp/src/jvmTest/kotlin/okhttp3/internal/http/HttpUpgradesTest.kt b/okhttp/src/jvmTest/kotlin/okhttp3/internal/http/HttpUpgradesTest.kt
index a0f0ac7da..a9666fc39 100644
--- a/okhttp/src/jvmTest/kotlin/okhttp3/internal/http/HttpUpgradesTest.kt
+++ b/okhttp/src/jvmTest/kotlin/okhttp3/internal/http/HttpUpgradesTest.kt
@@ -31,7 +31,6 @@ import okhttp3.Protocol
 import okhttp3.RecordingEventListener
 import okhttp3.RecordingHostnameVerifier
 import okhttp3.Request
-import okhttp3.RequestBody
 import okhttp3.RequestBody.Companion.toRequestBody
 import okhttp3.internal.duplex.MockSocketHandler
 import okhttp3.testing.PlatformRule
@@ -59,7 +58,8 @@ class HttpUpgradesTest {
       .eventListenerFactory(clientTestRule.wrap(listener))
       .build()
 
-  fun executeAndCheckUpgrade(request: Request) {
+  @Test
+  fun upgrade() {
     val socketHandler =
       MockSocketHandler()
         .apply {
@@ -73,8 +73,9 @@ class HttpUpgradesTest {
     server.enqueue(socketHandler.upgradeResponse())
 
     client
-      .newCall(request)
-      .execute()
+      .newCall(
+        upgradeRequest(),
+      ).execute()
       .use { response ->
         assertThat(response.code).isEqualTo(HTTP_SWITCHING_PROTOCOLS)
         val socket = response.socket!!
@@ -97,16 +98,6 @@ class HttpUpgradesTest {
       }
   }
 
-  @Test
-  fun upgrade() {
-    executeAndCheckUpgrade(upgradeRequest())
-  }
-
-  @Test
-  fun upgradeWithRequestBody() {
-    executeAndCheckUpgrade(upgradeRequest().newBuilder().post(RequestBody.EMPTY).build())
-  }
-
   @Test
   fun upgradeHttps() {
     enableTls(Protocol.HTTP_1_1)
@@ -192,7 +183,7 @@ class HttpUpgradesTest {
   }
 
   @Test
-  fun upgradeEventsWithoutRequestBody() {
+  fun upgradeEvents() {
     upgrade()
 
     assertThat(listener.recordedEventTypes()).containsExactly(
@@ -219,36 +210,7 @@ class HttpUpgradesTest {
   }
 
   @Test
-  fun upgradeEventsWithRequestBody() {
-    upgradeWithRequestBody()
-
-    assertThat(listener.recordedEventTypes()).containsExactly(
-      "CallStart",
-      "ProxySelectStart",
-      "ProxySelectEnd",
-      "DnsStart",
-      "DnsEnd",
-      "ConnectStart",
-      "ConnectEnd",
-      "ConnectionAcquired",
-      "RequestHeadersStart",
-      "RequestHeadersEnd",
-      "RequestBodyStart",
-      "RequestBodyEnd",
-      "ResponseHeadersStart",
-      "ResponseHeadersEnd",
-      "RequestBodyStart",
-      "FollowUpDecision",
-      "ResponseBodyStart",
-      "ResponseBodyEnd",
-      "ConnectionReleased",
-      "CallEnd",
-      "RequestBodyEnd",
-    )
-  }
-
-  @Test
-  fun upgradeRequestMustHaveAnEmptyBody() {
+  fun upgradeRequestMustNotHaveABody() {
     val e =
       assertFailsWith<IllegalArgumentException> {
         Request
@@ -258,7 +220,7 @@ class HttpUpgradesTest {
           .post("Hello".toRequestBody())
           .build()
       }
-    assertThat(e).hasMessage("expected a null or empty request body with 'Connection: upgrade'")
+    assertThat(e).hasMessage("expected a null request body with 'Connection: upgrade'")
   }
 
   private fun enableTls(vararg protocols: Protocol) {
