diff --git a/ktor-server/ktor-server-core/common/src/io/ktor/server/config/MapConfigDecoder.kt b/ktor-server/ktor-server-core/common/src/io/ktor/server/config/MapConfigDecoder.kt
index 39ba7d024..b5bc43c73 100644
--- a/ktor-server/ktor-server-core/common/src/io/ktor/server/config/MapConfigDecoder.kt
+++ b/ktor-server/ktor-server-core/common/src/io/ktor/server/config/MapConfigDecoder.kt
@@ -59,8 +59,6 @@ internal class MapConfigDecoder(
         return if (map.containsPrefix(fullPath)) {
             currentPath = fullPath
             newIndex
-        } else if (descriptor.isElementOptional(newIndex)) {
-            decodeElementIndex(descriptor)
         } else {
             CompositeDecoder.DECODE_DONE
         }
diff --git a/ktor-server/ktor-server-core/common/test/io/ktor/server/config/MapDecoderTest.kt b/ktor-server/ktor-server-core/common/test/io/ktor/server/config/MapDecoderTest.kt
index be4556eba..c46a70762 100644
--- a/ktor-server/ktor-server-core/common/test/io/ktor/server/config/MapDecoderTest.kt
+++ b/ktor-server/ktor-server-core/common/test/io/ktor/server/config/MapDecoderTest.kt
@@ -50,14 +50,6 @@ class MapDecoderTest {
         val enumMap: Map<String, TestEnum>
     )
 
-    @Serializable
-    data class Address(
-        val streetName: String,
-        val postalCode: String,
-        val unitNumber: String? = null,
-        val municipality: String,
-    )
-
     @Test
     fun testSimpleTypes() {
         val map = mapOf(
@@ -214,19 +206,4 @@ class MapDecoderTest {
             SimpleConfig.serializer().deserialize(decoder)
         }
     }
-
-    @Test
-    fun testOptionals() {
-        val map = mapOf(
-            "streetName" to "Test street",
-            "postalCode" to "12345",
-            "municipality" to "Test municipality"
-        )
-        val decoder = MapConfigDecoder(map)
-        val config = Address.serializer().deserialize(decoder)
-        assertEquals("Test street", config.streetName)
-        assertEquals("12345", config.postalCode)
-        assertEquals("Test municipality", config.municipality)
-        assertEquals(null, config.unitNumber)
-    }
 }
diff --git a/ktor-server/ktor-server-core/jvm/src/io/ktor/server/config/HoconDecoder.kt b/ktor-server/ktor-server-core/jvm/src/io/ktor/server/config/HoconDecoder.kt
index c4bb11cfb..0f37d5f59 100644
--- a/ktor-server/ktor-server-core/jvm/src/io/ktor/server/config/HoconDecoder.kt
+++ b/ktor-server/ktor-server-core/jvm/src/io/ktor/server/config/HoconDecoder.kt
@@ -30,8 +30,6 @@ internal open class HoconDecoder(
         return if (config.hasPath(fullPath)) {
             currentPath = fullPath
             newIndex
-        } else if (descriptor.isElementOptional(newIndex)) {
-            decodeElementIndex(descriptor)
         } else {
             CompositeDecoder.DECODE_DONE
         }
diff --git a/ktor-server/ktor-server-core/jvm/test/io/ktor/tests/config/HoconDecoderTest.kt b/ktor-server/ktor-server-core/jvm/test/io/ktor/tests/config/HoconDecoderTest.kt
index 41ff46a3b..70fc97162 100644
--- a/ktor-server/ktor-server-core/jvm/test/io/ktor/tests/config/HoconDecoderTest.kt
+++ b/ktor-server/ktor-server-core/jvm/test/io/ktor/tests/config/HoconDecoderTest.kt
@@ -220,26 +220,6 @@ class HoconDecoderTest {
         }
     }
 
-    @Test
-    fun `default values`() {
-        val content = """
-            address {
-                streetName = "Main Street"
-                postalCode = "12345"
-                municipality = "Test City"
-                # unitNumber is intentionally omitted to test default value
-            }
-        """.trimIndent()
-
-        val address = parseConfig(content)
-            .propertyOrNull("address")?.getAs<Address>()
-
-        assertNotNull(address)
-        assertEquals("Main Street", address.streetName)
-        assertEquals("Test City", address.municipality)
-        assertNull(address.unitNumber)
-    }
-
     private fun parseConfig(content: String): HoconApplicationConfig =
         HoconApplicationConfig(ConfigFactory.parseString(content))
 
@@ -314,12 +294,4 @@ class HoconDecoderTest {
         val enumValue: TestEnum,
         val enumList: List<TestEnum>
     )
-
-    @Serializable
-    data class Address(
-        val streetName: String,
-        val postalCode: String,
-        val unitNumber: String? = null,
-        val municipality: String,
-    )
 }
